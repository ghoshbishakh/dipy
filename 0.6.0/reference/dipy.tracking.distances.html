<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dipy &mdash; dipy 0.6.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="dipy 0.6.0 documentation" href="../index.html" />
    <link rel="up" title="dipy tracking" href="tracking.html" />
    <link rel="next" title="dipy.tracking.eudx" href="dipy.tracking.eudx.html" />
    <link rel="prev" title="dipy tracking" href="tracking.html" />
  <meta name="keywords" content="dipy, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="dipy logo"  border="0" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.tracking.eudx.html" title="dipy.tracking.eudx"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tracking.html" title="dipy tracking"
             accesskey="P">previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >dipy reference</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="tracking.html" accesskey="U">dipy tracking</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

  
<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../devel/index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.sourceforge.net/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.sourceforge.net/software/projects/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="http://mail.scipy.org/mailman/listinfo/nipy-devel">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.sourceforge.net/software/license/index.html">License</a></li>
  </ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="tracking.html"
                        title="previous chapter">dipy tracking</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dipy.tracking.eudx.html"
                        title="next chapter"><code class="docutils literal"><span class="pre">dipy.tracking.eudx</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/dipy.tracking.distances.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox-ml" style="display: none">
  <h3>Search mailing list archive</h3>
  <script type="text/javascript">
    function mlsearch(curobj)
    {
    curobj.q.value="site:mail.scipy.org/pipermail/nipy-devel/ "+curobj.userquery.value
    }
  </script>
  <form action="http://www.google.com/search" method="get" onSubmit="mlsearch(this)">
    <input name="userquery" size="13" type="text" /> <input type="submit" value="Go" />
    <input name="q" type="hidden" />
  </form>
</div>
  
<div id="searchbox-site" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="13" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-dipy.tracking.distances">
<span id="dipy-tracking-distances"></span><h1><a class="reference internal" href="#module-dipy.tracking.distances" title="dipy.tracking.distances"><code class="xref py py-mod docutils literal"><span class="pre">dipy.tracking.distances</span></code></a><a class="headerlink" href="#module-dipy.tracking.distances" title="Permalink to this headline">¶</a></h1>
<p>Optimized track distances, similarities and clustering algorithms using
track distances</p>
<dl class="function">
<dt id="dipy.tracking.distances.approx_polygon_track">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">approx_polygon_track</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.approx_polygon_track" title="Permalink to this definition">¶</a></dt>
<dd><p>Fast and simple trajectory approximation algorithm by Eleftherios and Ian</p>
<p>It will reduce the number of points of the track by keeping
intact the start and endpoints of the track and trying to remove
as many points as possible without distorting much the shape of
the track</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array(N,3)</p>
<blockquote>
<div><p>initial trajectory</p>
</div></blockquote>
<p><strong>alpha</strong> : float</p>
<blockquote>
<div><p>smoothing parameter (&lt;0.392 smoother, &gt;0.392 rougher) if the
trajectory was a smooth circle then with alpha =0.393
~=pi/8. the circle would be approximated with an decahexagon if
alpha = 0.7853 ~=pi/4. with an octagon.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>characteristic_points: list of M array(3,) points</strong> :</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Assuming that a good approximation for a circle is an octagon then
that means that the points of the octagon will have angle alpha =
2*pi/8 = pi/4 . We calculate the angle between every two neighbour
segments of a trajectory and if the angle is higher than pi/4 we
choose that point as a characteristic point otherwise we move at the
next point.</p>
<p class="rubric">Examples</p>
<p>Approximating a helix:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.75</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyz</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">xyza</span> <span class="o">=</span> <span class="n">approx_polygon_track</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">xyza</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.approximate_mdl_trajectory">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">approximate_mdl_trajectory</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.approximate_mdl_trajectory" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of Lee et al Approximate Trajectory
Partitioning Algorithm</p>
<p>This is base on the minimum description length principle</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz</strong> : array(N,3)</p>
<blockquote>
<div><p>initial trajectory</p>
</div></blockquote>
<p><strong>alpha</strong> : float</p>
<blockquote>
<div><p>smoothing parameter (&gt;1 smoother, &lt;1  rougher)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>characteristic_points</strong> : list of M array(3,) points</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.bundles_distances_mam">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">bundles_distances_mam</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.bundles_distances_mam" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate distances between list of tracks A and list of tracks B</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tracksA</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</div></blockquote>
<p><strong>tracksB</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</div></blockquote>
<p><strong>metric</strong> : str</p>
<blockquote>
<div><p>&#8216;avg&#8217;, &#8216;min&#8217;, &#8216;max&#8217;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>DM</strong> : array, shape (len(tracksA), len(tracksB))</p>
<blockquote class="last">
<div><p>distances between tracksA and tracksB according to metric</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.bundles_distances_mdf">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">bundles_distances_mdf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.bundles_distances_mdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate distances between list of tracks A and list of tracks B</p>
<p>All tracks need to have the same number of points</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tracksA</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, [(N,3) .. (N,3)]</p>
</div></blockquote>
<p><strong>tracksB</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, [(N,3) .. (N,3)]</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>DM</strong> : array, shape (len(tracksA), len(tracksB))</p>
<blockquote class="last">
<div><p>distances between tracksA and tracksB according to metric</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">dipy.metrics.downsample</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.cut_plane">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">cut_plane</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.cut_plane" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract divergence vectors and points of intersection
between planes normal to the reference fiber and other tracks</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tracks</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</div></blockquote>
<p><strong>ref</strong> : array, shape (N,3)</p>
<blockquote>
<div><p>reference track</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>hits</strong> : sequence</p>
<blockquote class="last">
<div><p>list of points and rcds (radial coefficient of divergence)``</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The orthogonality relationship
np.inner(hits[p][q][0:3]-ref[p+1],ref[p+2]-ref[r][p+1]) will hold throughout
for every point q in the hits plane at point (p+1) on the reference track.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">refx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bundlex</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">2.5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">cut_plane</span><span class="p">(</span><span class="n">bundlex</span><span class="p">,</span><span class="n">refx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">[[ 1.          1.5         0.          0.70710683  0.        ]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">[[ 2.          2.5         0.          0.70710677  0.        ]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.intersect_segment_cylinder">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">intersect_segment_cylinder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.intersect_segment_cylinder" title="Permalink to this definition">¶</a></dt>
<dd><p>Intersect Segment S(t) = sa +t(sb-sa), 0 &lt;=t&lt;= 1 against cylinder specified by p,q and r</p>
<p>See p.197 from Real Time Collision Detection by C. Ericson</p>
<p class="rubric">Examples</p>
<p>Define cylinder using a segment defined by</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">=</span><span class="mf">0.5</span>
</pre></div>
</div>
<p>Define segment</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sa</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">1</span> <span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sb</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</pre></div>
</div>
<p>Intersection</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">intersect_segment_cylinder</span><span class="p">(</span><span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
<span class="go">(1.0, 0.25, 0.75)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.larch_3merge">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">larch_3merge</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.larch_3merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Reassign tracks to existing clusters by merging clusters that their
representative tracks are not very distant i.e. less than sqd_thr. Using
tracks consisting of 3 points (first, mid and last). This is necessary
after running larch_fast_split after multiple split in different levels
(squared thresholds) as some of them have created independent clusters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>C</strong> : graph with clusters</p>
<blockquote>
<div><p>of indices 3tracks (tracks consisting of 3 points only)</p>
</div></blockquote>
<p><strong>sqd_trh: float</strong> :</p>
<blockquote>
<div><p>squared euclidean distance threshold</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>C</strong> : dict</p>
<blockquote class="last">
<div><p>a tree graph containing the clusters</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.larch_3split">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">larch_3split</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.larch_3split" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a first pass clustering using 3 points on the tracks only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tracks</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape <code class="docutils literal"><span class="pre">(N1,3)</span> <span class="pre">..</span> <span class="pre">(Nm,3)</span></code>, where 3 points are
(first, mid and last)</p>
</div></blockquote>
<p><strong>indices</strong> : None or sequence, optional</p>
<blockquote>
<div><p>Sequence of integer indices of tracks</p>
</div></blockquote>
<p><strong>trh</strong> : float, optional</p>
<blockquote>
<div><p>squared euclidean distance threshold</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>C</strong> : dict</p>
<blockquote class="last">
<div><p>A tree graph containing the clusters.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If a 3 point track (3track) is far away from all clusters then add a new
cluster and assign this 3track as the rep(representative) track for the new
cluster. Otherwise the rep 3track of each cluster is the average track of
the cluster.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">larch_3split</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is an example of how to visualize the clustering above:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">fvtk</span>
<span class="n">r</span><span class="o">=</span><span class="n">fvtk</span><span class="o">.</span><span class="n">ren</span><span class="p">()</span>
<span class="n">fvtk</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">fvtk</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span><span class="n">fvtk</span><span class="o">.</span><span class="n">red</span><span class="p">))</span>
<span class="n">fvtk</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;indices&#39;</span><span class="p">]:</span>
        <span class="n">fos</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">fvtk</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">color</span><span class="p">))</span>
<span class="n">fvtk</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">fvtk</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">fos</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;rep3&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">],</span><span class="n">fos</span><span class="o">.</span><span class="n">white</span><span class="p">))</span>
<span class="n">fvtk</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.lee_angle_distance">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">lee_angle_distance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.lee_angle_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates angle distance metric for the distance between two line segments</p>
<p>Based on Lee , Han &amp; Whang SIGMOD07.</p>
<p>This function assumes that norm(end0-start0)&gt;norm(end1-start1) i.e. that the
first segment will be bigger than the second one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>start0</strong> : float array(3,)</p>
<p><strong>end0</strong> : float array(3,)</p>
<p><strong>start1</strong> : float array(3,)</p>
<p><strong>end1</strong> : float array(3,)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>angle_distance</strong> : float</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>l_0 = np.inner(end0-start0,end0-start0)
l_1 = np.inner(end1-start1,end1-start1)</p>
<p>cos_theta_squared = np.inner(end0-start0,end1-start1)**2/ (l_0*l_1)
return np.sqrt((1-cos_theta_squared)*l_1)</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lee_angle_distance</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">2.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.lee_perpendicular_distance">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">lee_perpendicular_distance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.lee_perpendicular_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates perpendicular distance metric for the distance between two line segments</p>
<p>Based on Lee , Han &amp; Whang SIGMOD07.</p>
<p>This function assumes that norm(end0-start0)&gt;norm(end1-start1) i.e. that the
first segment will be bigger than the second one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>start0</strong> : float array(3,)</p>
<p><strong>end0</strong> : float array(3,)</p>
<p><strong>start1</strong> : float array(3,)</p>
<p><strong>end1</strong> : float array(3,)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>perpendicular_distance: float</strong> :</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>l0 = np.inner(end0-start0,end0-start0)
l1 = np.inner(end1-start1,end1-start1)</p>
<p>k0=end0-start0</p>
<p>u1 = np.inner(start1-start0,k0)/l0
u2 = np.inner(end1-start0,k0)/l0</p>
<p>ps = start0+u1*k0
pe = start0+u2*k0</p>
<p>lperp1 = np.sqrt(np.inner(ps-start1,ps-start1))
lperp2 = np.sqrt(np.inner(pe-end1,pe-end1))</p>
<dl class="docutils">
<dt>if lperp1+lperp2 &gt; 0.:</dt>
<dd>return (lperp1**2+lperp2**2)/(lperp1+lperp2)</dd>
<dt>else:</dt>
<dd>return 0.</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">lee_perpendicular_distance</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="go">5.78788757324</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.local_skeleton_clustering">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">local_skeleton_clustering</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.local_skeleton_clustering" title="Permalink to this definition">¶</a></dt>
<dd><p>Efficient tractography clustering</p>
<p>Every track can needs to have the same number of points.
Use <cite>dipy.tracking.metrics.downsample</cite> to restrict the number of points</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tracks</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N,3) .. (N,3) where N=points</p>
</div></blockquote>
<p><strong>d_thr</strong> : float</p>
<blockquote>
<div><p>average euclidean distance threshold</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>C</strong> : dict</p>
<blockquote class="last">
<div><p>Clusters.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dipy.tracking.metrics.html#dipy.tracking.metrics.downsample" title="dipy.tracking.metrics.downsample"><code class="xref py py-obj docutils literal"><span class="pre">dipy.tracking.metrics.downsample</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>The distance calculated between two tracks:</p>
<div class="highlight-python"><div class="highlight"><pre>t_1       t_2

0*   a    *0
  \       |
   \      |
   1*     |
    |  b  *1
    |      \
    2*      \
        c    *2
</pre></div>
</div>
<p>is equal to <img class="math" src="../_images/math/ff002d0adcdd9c81e0ef3aa25bbec2bae9548ced.png" alt="(a+b+c)/3"/> where <img class="math" src="../_images/math/7dd2a5ea01fbd72ad2a58dd1f3d6ecbfde6208a1.png" alt="a"/> the euclidean distance between <code class="docutils literal"><span class="pre">t_1[0]</span></code>
and <code class="docutils literal"><span class="pre">t_2[0]</span></code>, <img class="math" src="../_images/math/5e87bf41a96deddf6cb485ff530f153f2590e9cc.png" alt="b"/> between <code class="docutils literal"><span class="pre">t_1[1]</span></code> and <code class="docutils literal"><span class="pre">t_2[1]</span></code> and <img class="math" src="../_images/math/65868d23a5bfe5b3b2d819386b19c14fa36af134.png" alt="c"/> between
<code class="docutils literal"><span class="pre">t_1[2]</span></code> and <code class="docutils literal"><span class="pre">t_2[2]</span></code>. Also the same with t2 flipped (so <code class="docutils literal"><span class="pre">t_1[0]</span></code>
compared to <code class="docutils literal"><span class="pre">t_2[2]</span></code> etc).</p>
<p>Visualization:</p>
<p>It is possible to visualize the clustering C from the example
above using the fvtk module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">dipy.viz</span> <span class="kn">import</span> <span class="n">fvtk</span>
<span class="n">r</span><span class="o">=</span><span class="n">fvtk</span><span class="o">.</span><span class="n">ren</span><span class="p">()</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;indices&#39;</span><span class="p">]:</span>
        <span class="n">fvtk</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">fvtk</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">color</span><span class="p">))</span>
<span class="n">fvtk</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">local_skeleton_clustering</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span> <span class="n">d_thr</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.local_skeleton_clustering_3pts">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">local_skeleton_clustering_3pts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.local_skeleton_clustering_3pts" title="Permalink to this definition">¶</a></dt>
<dd><p>Does a first pass clustering</p>
<p>Every track can only have 3 pts neither less or more.
Use <cite>dipy.tracking.metrics.downsample</cite> to restrict the number of points</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tracks</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N,3) .. (N,3) where N=3</p>
</div></blockquote>
<p><strong>d_thr</strong> : float</p>
<blockquote>
<div><p>Average euclidean distance threshold</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>C</strong> : dict</p>
<blockquote class="last">
<div><p>Clusters.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>It is possible to visualize the clustering C from the example
above using the fvtk module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">r</span><span class="o">=</span><span class="n">fvtk</span><span class="o">.</span><span class="n">ren</span><span class="p">()</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">C</span><span class="p">:</span>
    <span class="n">color</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">C</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;indices&#39;</span><span class="p">]:</span>
        <span class="n">fvtk</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">fos</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">tracks</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">color</span><span class="p">))</span>
<span class="n">fvtk</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tracks</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.7</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">3.4</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.9</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">4.6</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">0</span><span class="p">]]),</span>
<span class="gp">... </span>        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span><span class="o">=</span><span class="n">local_skeleton_clustering_3pts</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span><span class="n">d_thr</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.mam_distances">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">mam_distances</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.mam_distances" title="Permalink to this definition">¶</a></dt>
<dd><p>Min/Max/Mean Average Minimum Distance between tracks xyz1 and xyz2</p>
<p>Based on the metrics in Zhang, Correia, Laidlaw 2008
<a class="reference external" href="http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=4479455">http://ieeexplore.ieee.org/xpl/freeabs_all.jsp?arnumber=4479455</a>
which in turn are based on those of Corouge et al. 2004</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz1</strong> : array, shape (N1,3), dtype float32</p>
<p><strong>xyz2</strong> : array, shape (N2,3), dtype float32</p>
<blockquote>
<div><p>arrays representing x,y,z of the N1 and N2 points of two tracks</p>
</div></blockquote>
<p><strong>metrics</strong> : {&#8216;avg&#8217;,&#8217;min&#8217;,&#8217;max&#8217;,&#8217;all&#8217;}</p>
<blockquote>
<div><p>Metric to calculate.  {&#8216;avg&#8217;,&#8217;min&#8217;,&#8217;max&#8217;} return a scalar. &#8216;all&#8217;
returns a tuple</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>avg_mcd</strong> : float</p>
<blockquote>
<div><p>average_mean_closest_distance</p>
</div></blockquote>
<p><strong>min_mcd</strong> : float</p>
<blockquote>
<div><p>minimum_mean_closest_distance</p>
</div></blockquote>
<p><strong>max_mcd</strong> : float</p>
<blockquote class="last">
<div><p>maximum_mean_closest_distance</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Algorithmic description</p>
<p>Lets say we have curves A and B.</p>
<p>For every point in A calculate the minimum distance from every point
in B stored in minAB</p>
<p>For every point in B calculate the minimum distance from every point
in A stored in minBA</p>
<p>find average of minAB stored as avg_minAB
find average of minBA stored as avg_minBA</p>
<p>if metric is &#8216;avg&#8217; then return (avg_minAB + avg_minBA)/2.0
if metric is &#8216;min&#8217; then return min(avg_minAB,avg_minBA)
if metric is &#8216;max&#8217; then return max(avg_minAB,avg_minBA)</p>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.minimum_closest_distance">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">minimum_closest_distance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.minimum_closest_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the minimum distance between two curves xyz1, xyz2</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xyz1</strong> : array, shape (N1,3), dtype float32</p>
<p><strong>xyz2</strong> : array, shape (N2,3), dtype float32</p>
<blockquote>
<div><p>arrays representing x,y,z of the N1 and N2 points  of two tracks</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>md</strong> : minimum distance</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Algorithmic description</p>
<p>Lets say we have curves A and B</p>
<p>for every point in A calculate the minimum distance from every point in B stored in minAB
for every point in B calculate the minimum distance from every point in A stored in minBA
find min of minAB stored in min_minAB
find min of minBA stored in min_minBA</p>
<p>Then return (min_minAB + min_minBA)/2.0</p>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.most_similar_track_mam">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">most_similar_track_mam</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.most_similar_track_mam" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the most similar track in a bundle
using distances calculated from Zhang et. al 2008.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tracks</strong> : sequence</p>
<blockquote>
<div><p>of tracks as arrays, shape (N1,3) .. (Nm,3)</p>
</div></blockquote>
<p><strong>metric</strong> : str</p>
<blockquote>
<div><p>&#8216;avg&#8217;, &#8216;min&#8217;, &#8216;max&#8217;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>si</strong> : int</p>
<blockquote>
<div><p>index of the most similar track in tracks. This can be used as a
reference track for a bundle.</p>
</div></blockquote>
<p><strong>s</strong> : array, shape (len(tracks),)</p>
<blockquote class="last">
<div><p>similarities between tracks[si] and the rest of the tracks in
the bundle</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>A vague description of this function is given below:</p>
<p>for (i,j) in tracks_combinations_of_2:</p>
<blockquote>
<div><p>calculate the mean_closest_distance from i to j  (mcd_i)
calculate the mean_closest_distance from j to i  (mcd_j)</p>
<dl class="docutils">
<dt>if &#8216;avg&#8217;:</dt>
<dd>s holds the average similarities</dd>
<dt>if &#8216;min&#8217;:</dt>
<dd>s holds the minimum similarities</dd>
<dt>if &#8216;max&#8217;:</dt>
<dd>s holds the maximum similarities</dd>
</dl>
</div></blockquote>
<p>si holds the index of the track with min {avg,min,max} average metric</p>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.norm_3vec">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">norm_3vec</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.norm_3vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Euclidean (L2) norm of length 3 vector</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>vec</strong> : array-like shape (3,)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>norm</strong> : float</p>
<blockquote class="last">
<div><p>Euclidean norm</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.normalized_3vec">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">normalized_3vec</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.normalized_3vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Return normalized 3D vector</p>
<p>Vector divided by Euclidean (L2) norm</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>vec</strong> : array-like shape (3,)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>vec_out</strong> : array shape (3,)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.point_segment_sq_distance">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">point_segment_sq_distance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.point_segment_sq_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the squared distance from a point c to a finite line segment ab.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_segment_sq_distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_segment_sq_distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
<span class="go">9.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_segment_sq_distance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="go">2.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.point_track_sq_distance_check">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">point_track_sq_distance_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.point_track_sq_distance_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if square distance of track from point is smaller than threshold</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>track: array,float32, shape (N,3)</strong> :</p>
<p><strong>point: array,float32, shape (3,)</strong> :</p>
<p><strong>sq_dist_thr: double, threshold</strong> :</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>bool: True, if sq_distance &lt;= sq_dist_thr, otherwise False.</strong> :</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_track_sq_distance_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_track_sq_distance_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="o">.</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point_track_sq_distance_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="mi">2</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.track_dist_3pts">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">track_dist_3pts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.track_dist_3pts" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the euclidean distance between two 3pt tracks</p>
<p>Both direct and flip distances are calculated but only the smallest is returned</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array, shape (3,3)</p>
<p><strong>a three point track</strong> :</p>
<p><strong>b</strong> : array, shape (3,3)</p>
<p><strong>a three point track</strong> :</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>dist :float</strong> :</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">3.5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">track_dist_3pts</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
<span class="go">2.72157287598</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="dipy.tracking.distances.track_roi_intersection_check">
<code class="descclassname">dipy.tracking.distances.</code><code class="descname">track_roi_intersection_check</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.tracking.distances.track_roi_intersection_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a track is intersecting a region of interest</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>track: array,float32, shape (N,3)</strong> :</p>
<p><strong>roi: array,float32, shape (M,3)</strong> :</p>
<p><strong>sq_dist_thr: double, threshold, check squared euclidean distance from every roi point</strong> :</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>bool: True, if sq_distance &lt;= sq_dist_thr, otherwise False.</strong> :</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">roi</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">track_roi_intersection_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">roi</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">track_roi_intersection_check</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]],</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;f4&#39;</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dipy.tracking.eudx.html" title="dipy.tracking.eudx"
             >next</a> |</li>
        <li class="right" >
          <a href="tracking.html" title="dipy tracking"
             >previous</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >dipy reference</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="tracking.html" >dipy tracking</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2008-2013, dipy developers &lt;nipy-devel@neuroimaging.scipy.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>