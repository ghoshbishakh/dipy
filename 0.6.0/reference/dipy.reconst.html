<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dipy &mdash; dipy 0.6.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/dipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="dipy 0.6.0 documentation" href="../index.html" />
  <meta name="keywords" content="dipy, dMRI, DTI, DSI, diffusion MRI, Tensor,
  neuroimaging, python, neuroscience, Eleftherios, Garyfallidis, tractography,
  streamlines, fiber tracking">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
 <a href="../index.html">
  <img src="../_static/dipy-banner.png" alt="dipy logo"  border="0" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

  
<h4> Site Navigation </h4>
  <ul>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../devel/index.html">Development</a></li>
  </ul>

<h4> NIPY Community </h4>
  <ul class="simple">
    <li><a class="reference external"
	href="http://nipy.sourceforge.net/">Community Home</a></li>
    <li><a class="reference external"
	href="http://nipy.sourceforge.net/software/projects/">NIPY Projects</a></li>
    <li><a class="reference external"
	href="http://mail.scipy.org/mailman/listinfo/nipy-devel">Mailing List</a></li>
    <li><a class="reference external"
	href="http://nipy.sourceforge.net/software/license/index.html">License</a></li>
  </ul>


  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">reconst</span></code></a><ul>
<li><a class="reference internal" href="#module-dipy.reconst.base">Module: <code class="docutils literal"><span class="pre">reconst.base</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.benchmarks">Module: <code class="docutils literal"><span class="pre">reconst.benchmarks</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.benchmarks.bench_bounding_box">Module: <code class="docutils literal"><span class="pre">reconst.benchmarks.bench_bounding_box</span></code></a></li>
<li><a class="reference internal" href="#module-reconst-benchmarks-bench-csd">Module: <code class="docutils literal"><span class="pre">reconst.benchmarks.bench_csd</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.benchmarks.bench_peaks">Module: <code class="docutils literal"><span class="pre">reconst.benchmarks.bench_peaks</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.benchmarks.bench_squash">Module: <code class="docutils literal"><span class="pre">reconst.benchmarks.bench_squash</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.benchmarks.bench_vec_val_sum">Module: <code class="docutils literal"><span class="pre">reconst.benchmarks.bench_vec_val_sum</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.cache">Module: <code class="docutils literal"><span class="pre">reconst.cache</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.cross_validation">Module: <code class="docutils literal"><span class="pre">reconst.cross_validation</span></code></a></li>
<li><a class="reference internal" href="#module-reconst-csdeconv">Module: <code class="docutils literal"><span class="pre">reconst.csdeconv</span></code></a></li>
<li><a class="reference internal" href="#module-reconst-dki">Module: <code class="docutils literal"><span class="pre">reconst.dki</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.dsi">Module: <code class="docutils literal"><span class="pre">reconst.dsi</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.dti">Module: <code class="docutils literal"><span class="pre">reconst.dti</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.gqi">Module: <code class="docutils literal"><span class="pre">reconst.gqi</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.interpolate">Module: <code class="docutils literal"><span class="pre">reconst.interpolate</span></code></a></li>
<li><a class="reference internal" href="#module-reconst-mapmri">Module: <code class="docutils literal"><span class="pre">reconst.mapmri</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.multi_voxel">Module: <code class="docutils literal"><span class="pre">reconst.multi_voxel</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.odf">Module: <code class="docutils literal"><span class="pre">reconst.odf</span></code></a></li>
<li><a class="reference internal" href="#module-reconst-peaks">Module: <code class="docutils literal"><span class="pre">reconst.peaks</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.sfm">Module: <code class="docutils literal"><span class="pre">reconst.sfm</span></code></a></li>
<li><a class="reference internal" href="#module-dipy.reconst.shm">Module: <code class="docutils literal"><span class="pre">reconst.shm</span></code></a><ul>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-reconst-shore">Module: <code class="docutils literal"><span class="pre">reconst.shore</span></code></a><ul>
<li><a class="reference internal" href="#bench">bench</a></li>
<li><a class="reference internal" href="#test">test</a></li>
<li><a class="reference internal" href="#reconstfit"><code class="docutils literal"><span class="pre">ReconstFit</span></code></a></li>
<li><a class="reference internal" href="#reconstmodel"><code class="docutils literal"><span class="pre">ReconstModel</span></code></a></li>
<li><a class="reference internal" href="#bench-bounding-box">bench_bounding_box</a></li>
<li><a class="reference internal" href="#bounding-box">bounding_box</a></li>
<li><a class="reference internal" href="#measure">measure</a></li>
<li><a class="reference internal" href="#constrainedsphericaldeconvmodel"><code class="docutils literal"><span class="pre">ConstrainedSphericalDeconvModel</span></code></a></li>
<li><a class="reference internal" href="#gradienttable"><code class="docutils literal"><span class="pre">GradientTable</span></code></a></li>
<li><a class="reference internal" href="#bench-csdeconv">bench_csdeconv</a></li>
<li><a class="reference internal" href="#num-grad">num_grad</a></li>
<li><a class="reference internal" href="#read-stanford-labels">read_stanford_labels</a></li>
<li><a class="reference internal" href="#bench-local-maxima">bench_local_maxima</a></li>
<li><a class="reference internal" href="#get-sphere">get_sphere</a></li>
<li><a class="reference internal" href="#local-maxima">local_maxima</a></li>
<li><a class="reference internal" href="#id7">measure</a></li>
<li><a class="reference internal" href="#unique-edges">unique_edges</a></li>
<li><a class="reference internal" href="#bench-quick-squash">bench_quick_squash</a></li>
<li><a class="reference internal" href="#id8">measure</a></li>
<li><a class="reference internal" href="#ndindex">ndindex</a></li>
<li><a class="reference internal" href="#old-squash">old_squash</a></li>
<li><a class="reference internal" href="#quick-squash">quick_squash</a></li>
<li><a class="reference internal" href="#reduce">reduce</a></li>
<li><a class="reference internal" href="#bench-vec-val-vect">bench_vec_val_vect</a></li>
<li><a class="reference internal" href="#id9">measure</a></li>
<li><a class="reference internal" href="#randn">randn</a></li>
<li><a class="reference internal" href="#vec-val-vect">vec_val_vect</a></li>
<li><a class="reference internal" href="#with-einsum">with_einsum</a></li>
<li><a class="reference internal" href="#cache"><code class="docutils literal"><span class="pre">Cache</span></code></a></li>
<li><a class="reference internal" href="#auto-attr">auto_attr</a></li>
<li><a class="reference internal" href="#range"><code class="docutils literal"><span class="pre">range</span></code></a></li>
<li><a class="reference internal" href="#coeff-of-determination">coeff_of_determination</a></li>
<li><a class="reference internal" href="#kfold-xval">kfold_xval</a></li>
<li><a class="reference internal" href="#axsymshresponse"><code class="docutils literal"><span class="pre">AxSymShResponse</span></code></a></li>
<li><a class="reference internal" href="#constrainedsdtmodel"><code class="docutils literal"><span class="pre">ConstrainedSDTModel</span></code></a></li>
<li><a class="reference internal" href="#id11"><code class="docutils literal"><span class="pre">ConstrainedSphericalDeconvModel</span></code></a></li>
<li><a class="reference internal" href="#sphharmfit"><code class="docutils literal"><span class="pre">SphHarmFit</span></code></a></li>
<li><a class="reference internal" href="#sphharmmodel"><code class="docutils literal"><span class="pre">SphHarmModel</span></code></a></li>
<li><a class="reference internal" href="#tensormodel"><code class="docutils literal"><span class="pre">TensorModel</span></code></a></li>
<li><a class="reference internal" href="#id12"><code class="docutils literal"><span class="pre">range</span></code></a></li>
<li><a class="reference internal" href="#auto-response">auto_response</a></li>
<li><a class="reference internal" href="#cart2sphere">cart2sphere</a></li>
<li><a class="reference internal" href="#csdeconv">csdeconv</a></li>
<li><a class="reference internal" href="#estimate-response">estimate_response</a></li>
<li><a class="reference internal" href="#fa-trace-to-lambdas">fa_trace_to_lambdas</a></li>
<li><a class="reference internal" href="#forward-sdeconv-mat">forward_sdeconv_mat</a></li>
<li><a class="reference internal" href="#forward-sdt-deconv-mat">forward_sdt_deconv_mat</a></li>
<li><a class="reference internal" href="#fractional-anisotropy">fractional_anisotropy</a></li>
<li><a class="reference internal" href="#id13">get_sphere</a></li>
<li><a class="reference internal" href="#lazy-index">lazy_index</a></li>
<li><a class="reference internal" href="#lpn">lpn</a></li>
<li><a class="reference internal" href="#multi-voxel-fit">multi_voxel_fit</a></li>
<li><a class="reference internal" href="#id14">ndindex</a></li>
<li><a class="reference internal" href="#odf-deconv">odf_deconv</a></li>
<li><a class="reference internal" href="#odf-sh-to-sharp">odf_sh_to_sharp</a></li>
<li><a class="reference internal" href="#peaks-from-model">peaks_from_model</a></li>
<li><a class="reference internal" href="#quad">quad</a></li>
<li><a class="reference internal" href="#real-sph-harm">real_sph_harm</a></li>
<li><a class="reference internal" href="#real-sym-sh-basis">real_sym_sh_basis</a></li>
<li><a class="reference internal" href="#recursive-response">recursive_response</a></li>
<li><a class="reference internal" href="#response-from-mask">response_from_mask</a></li>
<li><a class="reference internal" href="#sh-to-rh">sh_to_rh</a></li>
<li><a class="reference internal" href="#single-tensor">single_tensor</a></li>
<li><a class="reference internal" href="#sph-harm-ind-list">sph_harm_ind_list</a></li>
<li><a class="reference internal" href="#vec2vec-rotmat">vec2vec_rotmat</a></li>
<li><a class="reference internal" href="#diffusionkurtosisfit"><code class="docutils literal"><span class="pre">DiffusionKurtosisFit</span></code></a></li>
<li><a class="reference internal" href="#diffusionkurtosismodel"><code class="docutils literal"><span class="pre">DiffusionKurtosisModel</span></code></a></li>
<li><a class="reference internal" href="#id15"><code class="docutils literal"><span class="pre">ReconstModel</span></code></a></li>
<li><a class="reference internal" href="#tensorfit"><code class="docutils literal"><span class="pre">TensorFit</span></code></a></li>
<li><a class="reference internal" href="#id16"><code class="docutils literal"><span class="pre">range</span></code></a></li>
<li><a class="reference internal" href="#wcons">Wcons</a></li>
<li><a class="reference internal" href="#wrotate">Wrotate</a></li>
<li><a class="reference internal" href="#wrotate-element">Wrotate_element</a></li>
<li><a class="reference internal" href="#apparent-kurtosis-coef">apparent_kurtosis_coef</a></li>
<li><a class="reference internal" href="#id17">auto_attr</a></li>
<li><a class="reference internal" href="#axial-diffusivity">axial_diffusivity</a></li>
<li><a class="reference internal" href="#axial-kurtosis">axial_kurtosis</a></li>
<li><a class="reference internal" href="#carlson-rd">carlson_rd</a></li>
<li><a class="reference internal" href="#carlson-rf">carlson_rf</a></li>
<li><a class="reference internal" href="#decompose-tensor">decompose_tensor</a></li>
<li><a class="reference internal" href="#design-matrix">design_matrix</a></li>
<li><a class="reference internal" href="#dki-prediction">dki_prediction</a></li>
<li><a class="reference internal" href="#from-lower-triangular">from_lower_triangular</a></li>
<li><a class="reference internal" href="#lower-triangular">lower_triangular</a></li>
<li><a class="reference internal" href="#mean-diffusivity">mean_diffusivity</a></li>
<li><a class="reference internal" href="#mean-kurtosis">mean_kurtosis</a></li>
<li><a class="reference internal" href="#id18">ndindex</a></li>
<li><a class="reference internal" href="#ols-fit-dki">ols_fit_dki</a></li>
<li><a class="reference internal" href="#radial-diffusivity">radial_diffusivity</a></li>
<li><a class="reference internal" href="#radial-kurtosis">radial_kurtosis</a></li>
<li><a class="reference internal" href="#split-dki-param">split_dki_param</a></li>
<li><a class="reference internal" href="#wls-fit-dki">wls_fit_dki</a></li>
<li><a class="reference internal" href="#id19"><code class="docutils literal"><span class="pre">Cache</span></code></a></li>
<li><a class="reference internal" href="#diffusionspectrumdeconvfit"><code class="docutils literal"><span class="pre">DiffusionSpectrumDeconvFit</span></code></a></li>
<li><a class="reference internal" href="#diffusionspectrumdeconvmodel"><code class="docutils literal"><span class="pre">DiffusionSpectrumDeconvModel</span></code></a></li>
<li><a class="reference internal" href="#diffusionspectrumfit"><code class="docutils literal"><span class="pre">DiffusionSpectrumFit</span></code></a></li>
<li><a class="reference internal" href="#diffusionspectrummodel"><code class="docutils literal"><span class="pre">DiffusionSpectrumModel</span></code></a></li>
<li><a class="reference internal" href="#odffit"><code class="docutils literal"><span class="pre">OdfFit</span></code></a></li>
<li><a class="reference internal" href="#odfmodel"><code class="docutils literal"><span class="pre">OdfModel</span></code></a></li>
<li><a class="reference internal" href="#lr-deconv">LR_deconv</a></li>
<li><a class="reference internal" href="#create-qspace">create_qspace</a></li>
<li><a class="reference internal" href="#create-qtable">create_qtable</a></li>
<li><a class="reference internal" href="#fftn">fftn</a></li>
<li><a class="reference internal" href="#fftshift">fftshift</a></li>
<li><a class="reference internal" href="#gen-psf">gen_PSF</a></li>
<li><a class="reference internal" href="#half-to-full-qspace">half_to_full_qspace</a></li>
<li><a class="reference internal" href="#hanning-filter">hanning_filter</a></li>
<li><a class="reference internal" href="#ifftshift">ifftshift</a></li>
<li><a class="reference internal" href="#map-coordinates">map_coordinates</a></li>
<li><a class="reference internal" href="#id22">multi_voxel_fit</a></li>
<li><a class="reference internal" href="#pdf-interp-coords">pdf_interp_coords</a></li>
<li><a class="reference internal" href="#pdf-odf">pdf_odf</a></li>
<li><a class="reference internal" href="#project-hemisph-bvecs">project_hemisph_bvecs</a></li>
<li><a class="reference internal" href="#threshold-propagator">threshold_propagator</a></li>
<li><a class="reference internal" href="#id23"><code class="docutils literal"><span class="pre">ReconstModel</span></code></a></li>
<li><a class="reference internal" href="#sphere"><code class="docutils literal"><span class="pre">Sphere</span></code></a></li>
<li><a class="reference internal" href="#id24"><code class="docutils literal"><span class="pre">TensorFit</span></code></a></li>
<li><a class="reference internal" href="#id25"><code class="docutils literal"><span class="pre">TensorModel</span></code></a></li>
<li><a class="reference internal" href="#id34"><code class="docutils literal"><span class="pre">range</span></code></a></li>
<li><a class="reference internal" href="#apparent-diffusion-coef">apparent_diffusion_coef</a></li>
<li><a class="reference internal" href="#id35">auto_attr</a></li>
<li><a class="reference internal" href="#id36">axial_diffusivity</a></li>
<li><a class="reference internal" href="#color-fa">color_fa</a></li>
<li><a class="reference internal" href="#id37">decompose_tensor</a></li>
<li><a class="reference internal" href="#id38">design_matrix</a></li>
<li><a class="reference internal" href="#determinant">determinant</a></li>
<li><a class="reference internal" href="#deviatoric">deviatoric</a></li>
<li><a class="reference internal" href="#eig-from-lo-tri">eig_from_lo_tri</a></li>
<li><a class="reference internal" href="#eigh">eigh</a></li>
<li><a class="reference internal" href="#id39">fractional_anisotropy</a></li>
<li><a class="reference internal" href="#id40">from_lower_triangular</a></li>
<li><a class="reference internal" href="#geodesic-anisotropy">geodesic_anisotropy</a></li>
<li><a class="reference internal" href="#id41">get_sphere</a></li>
<li><a class="reference internal" href="#gradient-table">gradient_table</a></li>
<li><a class="reference internal" href="#isotropic">isotropic</a></li>
<li><a class="reference internal" href="#iter-fit-tensor">iter_fit_tensor</a></li>
<li><a class="reference internal" href="#linearity">linearity</a></li>
<li><a class="reference internal" href="#id42">lower_triangular</a></li>
<li><a class="reference internal" href="#id43">mean_diffusivity</a></li>
<li><a class="reference internal" href="#mode">mode</a></li>
<li><a class="reference internal" href="#nlls-fit-tensor">nlls_fit_tensor</a></li>
<li><a class="reference internal" href="#norm">norm</a></li>
<li><a class="reference internal" href="#ols-fit-tensor">ols_fit_tensor</a></li>
<li><a class="reference internal" href="#pinv">pinv</a></li>
<li><a class="reference internal" href="#planarity">planarity</a></li>
<li><a class="reference internal" href="#quantize-evecs">quantize_evecs</a></li>
<li><a class="reference internal" href="#id46">radial_diffusivity</a></li>
<li><a class="reference internal" href="#restore-fit-tensor">restore_fit_tensor</a></li>
<li><a class="reference internal" href="#sphericity">sphericity</a></li>
<li><a class="reference internal" href="#tensor-prediction">tensor_prediction</a></li>
<li><a class="reference internal" href="#trace">trace</a></li>
<li><a class="reference internal" href="#id47">vec_val_vect</a></li>
<li><a class="reference internal" href="#vector-norm">vector_norm</a></li>
<li><a class="reference internal" href="#wls-fit-tensor">wls_fit_tensor</a></li>
<li><a class="reference internal" href="#id50"><code class="docutils literal"><span class="pre">Cache</span></code></a></li>
<li><a class="reference internal" href="#generalizedqsamplingfit"><code class="docutils literal"><span class="pre">GeneralizedQSamplingFit</span></code></a></li>
<li><a class="reference internal" href="#generalizedqsamplingmodel"><code class="docutils literal"><span class="pre">GeneralizedQSamplingModel</span></code></a></li>
<li><a class="reference internal" href="#id51"><code class="docutils literal"><span class="pre">OdfFit</span></code></a></li>
<li><a class="reference internal" href="#id52"><code class="docutils literal"><span class="pre">OdfModel</span></code></a></li>
<li><a class="reference internal" href="#equatorial-maximum">equatorial_maximum</a></li>
<li><a class="reference internal" href="#equatorial-zone-vertices">equatorial_zone_vertices</a></li>
<li><a class="reference internal" href="#gfa">gfa</a></li>
<li><a class="reference internal" href="#id53">local_maxima</a></li>
<li><a class="reference internal" href="#id54">multi_voxel_fit</a></li>
<li><a class="reference internal" href="#normalize-qa">normalize_qa</a></li>
<li><a class="reference internal" href="#npa">npa</a></li>
<li><a class="reference internal" href="#odf-sum">odf_sum</a></li>
<li><a class="reference internal" href="#patch-maximum">patch_maximum</a></li>
<li><a class="reference internal" href="#patch-sum">patch_sum</a></li>
<li><a class="reference internal" href="#patch-vertices">patch_vertices</a></li>
<li><a class="reference internal" href="#polar-zone-vertices">polar_zone_vertices</a></li>
<li><a class="reference internal" href="#remove-similar-vertices">remove_similar_vertices</a></li>
<li><a class="reference internal" href="#squared-radial-component">squared_radial_component</a></li>
<li><a class="reference internal" href="#triple-odf-maxima">triple_odf_maxima</a></li>
<li><a class="reference internal" href="#upper-hemi-map">upper_hemi_map</a></li>
<li><a class="reference internal" href="#interpolator"><code class="docutils literal"><span class="pre">Interpolator</span></code></a></li>
<li><a class="reference internal" href="#nearestneighborinterpolator"><code class="docutils literal"><span class="pre">NearestNeighborInterpolator</span></code></a></li>
<li><a class="reference internal" href="#outsideimage"><code class="docutils literal"><span class="pre">OutsideImage</span></code></a></li>
<li><a class="reference internal" href="#trilinearinterpolator"><code class="docutils literal"><span class="pre">TriLinearInterpolator</span></code></a></li>
<li><a class="reference internal" href="#array">array</a></li>
<li><a class="reference internal" href="#trilinear-interp">trilinear_interp</a></li>
<li><a class="reference internal" href="#mapmrifit"><code class="docutils literal"><span class="pre">MapmriFit</span></code></a></li>
<li><a class="reference internal" href="#mapmrimodel"><code class="docutils literal"><span class="pre">MapmriModel</span></code></a></li>
<li><a class="reference internal" href="#id55"><code class="docutils literal"><span class="pre">ReconstFit</span></code></a></li>
<li><a class="reference internal" href="#id56"><code class="docutils literal"><span class="pre">ReconstModel</span></code></a></li>
<li><a class="reference internal" href="#b-mat">b_mat</a></li>
<li><a class="reference internal" href="#create-rspace">create_rspace</a></li>
<li><a class="reference internal" href="#factorial">factorial</a></li>
<li><a class="reference internal" href="#factorial2">factorial2</a></li>
<li><a class="reference internal" href="#id57">gradient_table</a></li>
<li><a class="reference internal" href="#hermite">hermite</a></li>
<li><a class="reference internal" href="#mapmri-eap">mapmri_EAP</a></li>
<li><a class="reference internal" href="#mapmri-index-matrix">mapmri_index_matrix</a></li>
<li><a class="reference internal" href="#mapmri-odf-matrix">mapmri_odf_matrix</a></li>
<li><a class="reference internal" href="#mapmri-phi-1d">mapmri_phi_1d</a></li>
<li><a class="reference internal" href="#mapmri-phi-3d">mapmri_phi_3d</a></li>
<li><a class="reference internal" href="#mapmri-phi-matrix">mapmri_phi_matrix</a></li>
<li><a class="reference internal" href="#mapmri-psi-1d">mapmri_psi_1d</a></li>
<li><a class="reference internal" href="#mapmri-psi-3d">mapmri_psi_3d</a></li>
<li><a class="reference internal" href="#mapmri-psi-matrix">mapmri_psi_matrix</a></li>
<li><a class="reference internal" href="#id58">multi_voxel_fit</a></li>
<li><a class="reference internal" href="#optional-package">optional_package</a></li>
<li><a class="reference internal" href="#warn">warn</a></li>
<li><a class="reference internal" href="#callablearray"><code class="docutils literal"><span class="pre">CallableArray</span></code></a></li>
<li><a class="reference internal" href="#multivoxelfit"><code class="docutils literal"><span class="pre">MultiVoxelFit</span></code></a></li>
<li><a class="reference internal" href="#id59"><code class="docutils literal"><span class="pre">ReconstFit</span></code></a></li>
<li><a class="reference internal" href="#as-strided">as_strided</a></li>
<li><a class="reference internal" href="#id60">multi_voxel_fit</a></li>
<li><a class="reference internal" href="#id61">ndindex</a></li>
<li><a class="reference internal" href="#id62"><code class="docutils literal"><span class="pre">OdfFit</span></code></a></li>
<li><a class="reference internal" href="#id63"><code class="docutils literal"><span class="pre">OdfModel</span></code></a></li>
<li><a class="reference internal" href="#id64"><code class="docutils literal"><span class="pre">ReconstFit</span></code></a></li>
<li><a class="reference internal" href="#id65"><code class="docutils literal"><span class="pre">ReconstModel</span></code></a></li>
<li><a class="reference internal" href="#id66">gfa</a></li>
<li><a class="reference internal" href="#minmax-normalize">minmax_normalize</a></li>
<li><a class="reference internal" href="#hemisphere"><code class="docutils literal"><span class="pre">HemiSphere</span></code></a></li>
<li><a class="reference internal" href="#intemporarydirectory"><code class="docutils literal"><span class="pre">InTemporaryDirectory</span></code></a></li>
<li><a class="reference internal" href="#peaksandmetrics"><code class="docutils literal"><span class="pre">PeaksAndMetrics</span></code></a></li>
<li><a class="reference internal" href="#peaksandmetricsdirectiongetter"><code class="docutils literal"><span class="pre">PeaksAndMetricsDirectionGetter</span></code></a></li>
<li><a class="reference internal" href="#id67"><code class="docutils literal"><span class="pre">Sphere</span></code></a></li>
<li><a class="reference internal" href="#repeat"><code class="docutils literal"><span class="pre">repeat</span></code></a></li>
<li><a class="reference internal" href="#xrange"><code class="docutils literal"><span class="pre">xrange</span></code></a></li>
<li><a class="reference internal" href="#pool">Pool</a></li>
<li><a class="reference internal" href="#cpu-count">cpu_count</a></li>
<li><a class="reference internal" href="#id68">gfa</a></li>
<li><a class="reference internal" href="#id69">local_maxima</a></li>
<li><a class="reference internal" href="#id70">ndindex</a></li>
<li><a class="reference internal" href="#peak-directions">peak_directions</a></li>
<li><a class="reference internal" href="#peak-directions-nl">peak_directions_nl</a></li>
<li><a class="reference internal" href="#id71">peaks_from_model</a></li>
<li><a class="reference internal" href="#id72">remove_similar_vertices</a></li>
<li><a class="reference internal" href="#reshape-peaks-for-visualization">reshape_peaks_for_visualization</a></li>
<li><a class="reference internal" href="#search-descending">search_descending</a></li>
<li><a class="reference internal" href="#sh-to-sf-matrix">sh_to_sf_matrix</a></li>
<li><a class="reference internal" href="#id73">warn</a></li>
<li><a class="reference internal" href="#id74"><code class="docutils literal"><span class="pre">Cache</span></code></a></li>
<li><a class="reference internal" href="#exponentialisotropicfit"><code class="docutils literal"><span class="pre">ExponentialIsotropicFit</span></code></a></li>
<li><a class="reference internal" href="#exponentialisotropicmodel"><code class="docutils literal"><span class="pre">ExponentialIsotropicModel</span></code></a></li>
<li><a class="reference internal" href="#isotropicfit"><code class="docutils literal"><span class="pre">IsotropicFit</span></code></a></li>
<li><a class="reference internal" href="#isotropicmodel"><code class="docutils literal"><span class="pre">IsotropicModel</span></code></a></li>
<li><a class="reference internal" href="#id75"><code class="docutils literal"><span class="pre">ReconstFit</span></code></a></li>
<li><a class="reference internal" href="#id76"><code class="docutils literal"><span class="pre">ReconstModel</span></code></a></li>
<li><a class="reference internal" href="#sparsefasciclefit"><code class="docutils literal"><span class="pre">SparseFascicleFit</span></code></a></li>
<li><a class="reference internal" href="#sparsefasciclemodel"><code class="docutils literal"><span class="pre">SparseFascicleModel</span></code></a></li>
<li><a class="reference internal" href="#id81">auto_attr</a></li>
<li><a class="reference internal" href="#nanmean">nanmean</a></li>
<li><a class="reference internal" href="#id82">optional_package</a></li>
<li><a class="reference internal" href="#sfm-design-matrix">sfm_design_matrix</a></li>
<li><a class="reference internal" href="#id87"><code class="docutils literal"><span class="pre">Cache</span></code></a></li>
<li><a class="reference internal" href="#csaodfmodel"><code class="docutils literal"><span class="pre">CsaOdfModel</span></code></a></li>
<li><a class="reference internal" href="#looseversion"><code class="docutils literal"><span class="pre">LooseVersion</span></code></a></li>
<li><a class="reference internal" href="#id89"><code class="docutils literal"><span class="pre">OdfFit</span></code></a></li>
<li><a class="reference internal" href="#id90"><code class="docutils literal"><span class="pre">OdfModel</span></code></a></li>
<li><a class="reference internal" href="#opdtmodel"><code class="docutils literal"><span class="pre">OpdtModel</span></code></a></li>
<li><a class="reference internal" href="#qballbasemodel"><code class="docutils literal"><span class="pre">QballBaseModel</span></code></a></li>
<li><a class="reference internal" href="#qballmodel"><code class="docutils literal"><span class="pre">QballModel</span></code></a></li>
<li><a class="reference internal" href="#residualbootstrapwrapper"><code class="docutils literal"><span class="pre">ResidualBootstrapWrapper</span></code></a></li>
<li><a class="reference internal" href="#id94"><code class="docutils literal"><span class="pre">SphHarmFit</span></code></a></li>
<li><a class="reference internal" href="#id95"><code class="docutils literal"><span class="pre">SphHarmModel</span></code></a></li>
<li><a class="reference internal" href="#anisotropic-power">anisotropic_power</a></li>
<li><a class="reference internal" href="#id96">auto_attr</a></li>
<li><a class="reference internal" href="#bootstrap-data-array">bootstrap_data_array</a></li>
<li><a class="reference internal" href="#bootstrap-data-voxel">bootstrap_data_voxel</a></li>
<li><a class="reference internal" href="#calculate-max-order">calculate_max_order</a></li>
<li><a class="reference internal" href="#id100">cart2sphere</a></li>
<li><a class="reference internal" href="#concatenate">concatenate</a></li>
<li><a class="reference internal" href="#diag">diag</a></li>
<li><a class="reference internal" href="#diff">diff</a></li>
<li><a class="reference internal" href="#dot">dot</a></li>
<li><a class="reference internal" href="#empty">empty</a></li>
<li><a class="reference internal" href="#eye">eye</a></li>
<li><a class="reference internal" href="#id101">forward_sdeconv_mat</a></li>
<li><a class="reference internal" href="#gen-dirac">gen_dirac</a></li>
<li><a class="reference internal" href="#hat">hat</a></li>
<li><a class="reference internal" href="#id102">lazy_index</a></li>
<li><a class="reference internal" href="#lcr-matrix">lcr_matrix</a></li>
<li><a class="reference internal" href="#id103">lpn</a></li>
<li><a class="reference internal" href="#normalize-data">normalize_data</a></li>
<li><a class="reference internal" href="#order-from-ncoef">order_from_ncoef</a></li>
<li><a class="reference internal" href="#id104">pinv</a></li>
<li><a class="reference internal" href="#randint">randint</a></li>
<li><a class="reference internal" href="#id107">real_sph_harm</a></li>
<li><a class="reference internal" href="#id108">real_sym_sh_basis</a></li>
<li><a class="reference internal" href="#real-sym-sh-mrtrix">real_sym_sh_mrtrix</a></li>
<li><a class="reference internal" href="#sf-to-sh">sf_to_sh</a></li>
<li><a class="reference internal" href="#id109">sh_to_rh</a></li>
<li><a class="reference internal" href="#sh-to-sf">sh_to_sf</a></li>
<li><a class="reference internal" href="#id110">sh_to_sf_matrix</a></li>
<li><a class="reference internal" href="#smooth-pinv">smooth_pinv</a></li>
<li><a class="reference internal" href="#id111">sph_harm_ind_list</a></li>
<li><a class="reference internal" href="#spherical-harmonics">spherical_harmonics</a></li>
<li><a class="reference internal" href="#svd">svd</a></li>
<li><a class="reference internal" href="#unique">unique</a></li>
<li><a class="reference internal" href="#id112"><code class="docutils literal"><span class="pre">Cache</span></code></a></li>
<li><a class="reference internal" href="#shorefit"><code class="docutils literal"><span class="pre">ShoreFit</span></code></a></li>
<li><a class="reference internal" href="#shoremodel"><code class="docutils literal"><span class="pre">ShoreModel</span></code></a></li>
<li><a class="reference internal" href="#id113">cart2sphere</a></li>
<li><a class="reference internal" href="#id114">create_rspace</a></li>
<li><a class="reference internal" href="#id115">factorial</a></li>
<li><a class="reference internal" href="#genlaguerre">genlaguerre</a></li>
<li><a class="reference internal" href="#l-shore">l_shore</a></li>
<li><a class="reference internal" href="#id116">multi_voxel_fit</a></li>
<li><a class="reference internal" href="#n-shore">n_shore</a></li>
<li><a class="reference internal" href="#id117">optional_package</a></li>
<li><a class="reference internal" href="#id118">real_sph_harm</a></li>
<li><a class="reference internal" href="#shore-indices">shore_indices</a></li>
<li><a class="reference internal" href="#shore-matrix">shore_matrix</a></li>
<li><a class="reference internal" href="#shore-matrix-odf">shore_matrix_odf</a></li>
<li><a class="reference internal" href="#shore-matrix-pdf">shore_matrix_pdf</a></li>
<li><a class="reference internal" href="#shore-order">shore_order</a></li>
<li><a class="reference internal" href="#id119">warn</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/dipy.reconst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox-ml" style="display: none">
  <h3>Search mailing list archive</h3>
  <script type="text/javascript">
    function mlsearch(curobj)
    {
    curobj.q.value="site:mail.scipy.org/pipermail/nipy-devel/ "+curobj.userquery.value
    }
  </script>
  <form action="http://www.google.com/search" method="get" onSubmit="mlsearch(this)">
    <input name="userquery" size="13" type="text" /> <input type="submit" value="Go" />
    <input name="q" type="hidden" />
  </form>
</div>
  
<div id="searchbox-site" style="display: none">
  <h3>Search this site</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="13" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox-ml').show(0);</script>
<script type="text/javascript">$('#searchbox-site').show(0);</script>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-dipy.reconst">
<span id="reconst"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">reconst</span></code><a class="headerlink" href="#module-dipy.reconst" title="Permalink to this headline">¶</a></h1>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.bench" title="dipy.reconst.bench"><code class="xref py py-obj docutils literal"><span class="pre">bench</span></code></a></td>
<td>Run benchmarks for module using nose.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.test" title="dipy.reconst.test"><code class="xref py py-obj docutils literal"><span class="pre">test</span></code></a></td>
<td>Run tests for module using nose.</td>
</tr>
</tbody>
</table>
<div class="section" id="module-dipy.reconst.base">
<span id="module-reconst-base"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.base</span></code><a class="headerlink" href="#module-dipy.reconst.base" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.base.ReconstFit" title="dipy.reconst.base.ReconstFit"><code class="xref py py-obj docutils literal"><span class="pre">ReconstFit</span></code></a></td>
<td>Abstract class which holds the fit result of ReconstModel</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-obj docutils literal"><span class="pre">ReconstModel</span></code></a></td>
<td>Abstract class for signal reconstruction models</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.benchmarks">
<span id="module-reconst-benchmarks"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.benchmarks</span></code><a class="headerlink" href="#module-dipy.reconst.benchmarks" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.benchmarks.bench_bounding_box">
<span id="module-reconst-benchmarks-bench-bounding-box"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.benchmarks.bench_bounding_box</span></code><a class="headerlink" href="#module-dipy.reconst.benchmarks.bench_bounding_box" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_bounding_box.bench_bounding_box" title="dipy.reconst.benchmarks.bench_bounding_box.bench_bounding_box"><code class="xref py py-obj docutils literal"><span class="pre">bench_bounding_box</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_bounding_box.bounding_box" title="dipy.reconst.benchmarks.bench_bounding_box.bounding_box"><code class="xref py py-obj docutils literal"><span class="pre">bounding_box</span></code></a>(vol)</td>
<td>Compute the bounding box of nonzero intensity voxels in the volume.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_bounding_box.measure" title="dipy.reconst.benchmarks.bench_bounding_box.measure"><code class="xref py py-obj docutils literal"><span class="pre">measure</span></code></a>(code_str[,&nbsp;times,&nbsp;label])</td>
<td>Return elapsed time for executing code in the namespace of the caller.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-reconst-benchmarks-bench-csd">
<h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.benchmarks.bench_csd</span></code><a class="headerlink" href="#module-reconst-benchmarks-bench-csd" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ConstrainedSphericalDeconvModel</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">GradientTable</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">bench_csdeconv</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">num_grad</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">read_stanford_labels</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.benchmarks.bench_peaks">
<span id="module-reconst-benchmarks-bench-peaks"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.benchmarks.bench_peaks</span></code><a class="headerlink" href="#module-dipy.reconst.benchmarks.bench_peaks" title="Permalink to this headline">¶</a></h2>
<p>Benchmarks for peak finding</p>
<p>Run all benchmarks with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">dipy.reconst</span> <span class="kn">as</span> <span class="nn">dire</span>
<span class="n">dire</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span>
</pre></div>
</div>
<p>If you have doctests enabled by default in nose (with a noserc file or
environment variable), and you have a numpy version &lt;= 1.6.1, this will also run
the doctests, let&#8217;s hope they pass.</p>
<p>Run this benchmark with:</p>
<blockquote>
<div>nosetests -s &#8211;match &#8216;(?:^|[b_.//-])[Bb]ench&#8217; /path/to/bench_peaks.py</div></blockquote>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_peaks.bench_local_maxima" title="dipy.reconst.benchmarks.bench_peaks.bench_local_maxima"><code class="xref py py-obj docutils literal"><span class="pre">bench_local_maxima</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_peaks.get_sphere" title="dipy.reconst.benchmarks.bench_peaks.get_sphere"><code class="xref py py-obj docutils literal"><span class="pre">get_sphere</span></code></a>([name])</td>
<td>provide triangulated spheres</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_peaks.local_maxima" title="dipy.reconst.benchmarks.bench_peaks.local_maxima"><code class="xref py py-obj docutils literal"><span class="pre">local_maxima</span></code></a>(odf,&nbsp;edges)</td>
<td>Finds the local maxima of a function evaluated on a discrete set of points.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_peaks.measure" title="dipy.reconst.benchmarks.bench_peaks.measure"><code class="xref py py-obj docutils literal"><span class="pre">measure</span></code></a>(code_str[,&nbsp;times,&nbsp;label])</td>
<td>Return elapsed time for executing code in the namespace of the caller.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_peaks.unique_edges" title="dipy.reconst.benchmarks.bench_peaks.unique_edges"><code class="xref py py-obj docutils literal"><span class="pre">unique_edges</span></code></a>(faces[,&nbsp;return_mapping])</td>
<td>Extract all unique edges from given triangular faces.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.benchmarks.bench_squash">
<span id="module-reconst-benchmarks-bench-squash"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.benchmarks.bench_squash</span></code><a class="headerlink" href="#module-dipy.reconst.benchmarks.bench_squash" title="Permalink to this headline">¶</a></h2>
<p>Benchmarks for fast squashing</p>
<p>Run all benchmarks with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">dipy.reconst</span> <span class="kn">as</span> <span class="nn">dire</span>
<span class="n">dire</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span>
</pre></div>
</div>
<p>If you have doctests enabled by default in nose (with a noserc file or
environment variable), and you have a numpy version &lt;= 1.6.1, this will also run
the doctests, let&#8217;s hope they pass.</p>
<p>Run this benchmark with:</p>
<blockquote>
<div>nosetests -s &#8211;match &#8216;(?:^|[b_.//-])[Bb]ench&#8217; /path/to/bench_squash.py</div></blockquote>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_squash.bench_quick_squash" title="dipy.reconst.benchmarks.bench_squash.bench_quick_squash"><code class="xref py py-obj docutils literal"><span class="pre">bench_quick_squash</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_squash.measure" title="dipy.reconst.benchmarks.bench_squash.measure"><code class="xref py py-obj docutils literal"><span class="pre">measure</span></code></a>(code_str[,&nbsp;times,&nbsp;label])</td>
<td>Return elapsed time for executing code in the namespace of the caller.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_squash.ndindex" title="dipy.reconst.benchmarks.bench_squash.ndindex"><code class="xref py py-obj docutils literal"><span class="pre">ndindex</span></code></a>(shape)</td>
<td>An N-dimensional iterator object to index arrays.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_squash.old_squash" title="dipy.reconst.benchmarks.bench_squash.old_squash"><code class="xref py py-obj docutils literal"><span class="pre">old_squash</span></code></a>(arr[,&nbsp;mask,&nbsp;fill])</td>
<td>Try and make a standard array from an object array</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_squash.quick_squash" title="dipy.reconst.benchmarks.bench_squash.quick_squash"><code class="xref py py-obj docutils literal"><span class="pre">quick_squash</span></code></a></td>
<td>Try and make a standard array from an object array</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="http://docs.python.org/library/functions.html#reduce" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">reduce</span></code></a></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.benchmarks.bench_vec_val_sum">
<span id="module-reconst-benchmarks-bench-vec-val-sum"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.benchmarks.bench_vec_val_sum</span></code><a class="headerlink" href="#module-dipy.reconst.benchmarks.bench_vec_val_sum" title="Permalink to this headline">¶</a></h2>
<p>Benchmarks for vec / val summation routine</p>
<p>Run benchmarks with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">dipy.reconst</span> <span class="kn">as</span> <span class="nn">dire</span>
<span class="n">dire</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span>
</pre></div>
</div>
<p>If you have doctests enabled by default in nose (with a noserc file or
environment variable), and you have a numpy version &lt;= 1.6.1, this will also run
the doctests, let&#8217;s hope they pass.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_vec_val_sum.bench_vec_val_vect" title="dipy.reconst.benchmarks.bench_vec_val_sum.bench_vec_val_vect"><code class="xref py py-obj docutils literal"><span class="pre">bench_vec_val_vect</span></code></a>()</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_vec_val_sum.measure" title="dipy.reconst.benchmarks.bench_vec_val_sum.measure"><code class="xref py py-obj docutils literal"><span class="pre">measure</span></code></a>(code_str[,&nbsp;times,&nbsp;label])</td>
<td>Return elapsed time for executing code in the namespace of the caller.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_vec_val_sum.randn" title="dipy.reconst.benchmarks.bench_vec_val_sum.randn"><code class="xref py py-obj docutils literal"><span class="pre">randn</span></code></a>(d0,&nbsp;d1,&nbsp;...,&nbsp;dn)</td>
<td>Return a sample (or samples) from the &#8220;standard normal&#8221; distribution.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_vec_val_sum.vec_val_vect" title="dipy.reconst.benchmarks.bench_vec_val_sum.vec_val_vect"><code class="xref py py-obj docutils literal"><span class="pre">vec_val_vect</span></code></a></td>
<td>Vectorize <cite>vecs</cite>.diag(<cite>vals</cite>).`vecs`.T for last 2 dimensions of <cite>vecs</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.benchmarks.bench_vec_val_sum.with_einsum" title="dipy.reconst.benchmarks.bench_vec_val_sum.with_einsum"><code class="xref py py-obj docutils literal"><span class="pre">with_einsum</span></code></a>(f)</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.cache">
<span id="module-reconst-cache"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.cache</span></code><a class="headerlink" href="#module-dipy.reconst.cache" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.cache.Cache" title="dipy.reconst.cache.Cache"><code class="xref py py-obj docutils literal"><span class="pre">Cache</span></code></a></td>
<td>Cache values based on a key object (such as a sphere or gradient table).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.cache.auto_attr" title="dipy.reconst.cache.auto_attr"><code class="xref py py-obj docutils literal"><span class="pre">auto_attr</span></code></a>(func)</td>
<td>Decorator to create OneTimeProperty attributes.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.cross_validation">
<span id="module-reconst-cross-validation"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.cross_validation</span></code><a class="headerlink" href="#module-dipy.reconst.cross_validation" title="Permalink to this headline">¶</a></h2>
<p>Cross-validation analysis of diffusion models</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.cross_validation.range" title="dipy.reconst.cross_validation.range"><code class="xref py py-obj docutils literal"><span class="pre">range</span></code></a></td>
<td>alias of <code class="xref py py-class docutils literal"><span class="pre">xrange</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.cross_validation.coeff_of_determination" title="dipy.reconst.cross_validation.coeff_of_determination"><code class="xref py py-obj docutils literal"><span class="pre">coeff_of_determination</span></code></a>(data,&nbsp;model[,&nbsp;axis])</td>
<td>Calculate the coefficient of determination for a model prediction, relative     to data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.cross_validation.kfold_xval" title="dipy.reconst.cross_validation.kfold_xval"><code class="xref py py-obj docutils literal"><span class="pre">kfold_xval</span></code></a>(model,&nbsp;data,&nbsp;folds,&nbsp;*model_args,&nbsp;...)</td>
<td>Perform k-fold cross-validation to generate out-of-sample predictions for each measurement.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-reconst-csdeconv">
<h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.csdeconv</span></code><a class="headerlink" href="#module-reconst-csdeconv" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">AxSymShResponse</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ConstrainedSDTModel</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ConstrainedSphericalDeconvModel</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">SphHarmFit</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">SphHarmModel</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">TensorModel</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://docs.python.org/library/functions.html#range" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">range</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">auto_response</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cart2sphere</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">csdeconv</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">estimate_response</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">fa_trace_to_lambdas</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">forward_sdeconv_mat</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">forward_sdt_deconv_mat</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">fractional_anisotropy</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_sphere</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">lazy_index</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">lpn</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">multi_voxel_fit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ndindex</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">odf_deconv</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">odf_sh_to_sharp</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">peaks_from_model</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">quad</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">real_sph_harm</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">real_sym_sh_basis</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">recursive_response</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">response_from_mask</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">sh_to_rh</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">single_tensor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">sph_harm_ind_list</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">vec2vec_rotmat</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-reconst-dki">
<h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.dki</span></code><a class="headerlink" href="#module-reconst-dki" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">DiffusionKurtosisFit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">DiffusionKurtosisModel</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ReconstModel</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">TensorFit</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://docs.python.org/library/functions.html#range" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">range</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">Wcons</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">Wrotate</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">Wrotate_element</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">apparent_kurtosis_coef</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">auto_attr</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">axial_diffusivity</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">axial_kurtosis</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">carlson_rd</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">carlson_rf</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">decompose_tensor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">design_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">dki_prediction</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">from_lower_triangular</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">lower_triangular</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">mean_diffusivity</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">mean_kurtosis</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ndindex</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ols_fit_dki</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">radial_diffusivity</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">radial_kurtosis</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">split_dki_param</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">wls_fit_dki</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.dsi">
<span id="module-reconst-dsi"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.dsi</span></code><a class="headerlink" href="#module-dipy.reconst.dsi" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.Cache" title="dipy.reconst.dsi.Cache"><code class="xref py py-obj docutils literal"><span class="pre">Cache</span></code></a></td>
<td>Cache values based on a key object (such as a sphere or gradient table).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvFit" title="dipy.reconst.dsi.DiffusionSpectrumDeconvFit"><code class="xref py py-obj docutils literal"><span class="pre">DiffusionSpectrumDeconvFit</span></code></a>(model,&nbsp;data)</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvModel" title="dipy.reconst.dsi.DiffusionSpectrumDeconvModel"><code class="xref py py-obj docutils literal"><span class="pre">DiffusionSpectrumDeconvModel</span></code></a></td>
<td>alias of <code class="xref py py-class docutils literal"><span class="pre">MultiVoxelModel</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumFit" title="dipy.reconst.dsi.DiffusionSpectrumFit"><code class="xref py py-obj docutils literal"><span class="pre">DiffusionSpectrumFit</span></code></a>(model,&nbsp;data)</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumModel" title="dipy.reconst.dsi.DiffusionSpectrumModel"><code class="xref py py-obj docutils literal"><span class="pre">DiffusionSpectrumModel</span></code></a></td>
<td>alias of <code class="xref py py-class docutils literal"><span class="pre">MultiVoxelModel</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.OdfFit" title="dipy.reconst.dsi.OdfFit"><code class="xref py py-obj docutils literal"><span class="pre">OdfFit</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.OdfModel" title="dipy.reconst.dsi.OdfModel"><code class="xref py py-obj docutils literal"><span class="pre">OdfModel</span></code></a></td>
<td>An abstract class to be sub-classed by specific odf models</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.LR_deconv" title="dipy.reconst.dsi.LR_deconv"><code class="xref py py-obj docutils literal"><span class="pre">LR_deconv</span></code></a>(prop,&nbsp;psf[,&nbsp;numit,&nbsp;acc_factor])</td>
<td>Perform Lucy-Richardson deconvolution algorithm on a 3D array.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.create_qspace" title="dipy.reconst.dsi.create_qspace"><code class="xref py py-obj docutils literal"><span class="pre">create_qspace</span></code></a>(gtab,&nbsp;origin)</td>
<td>create the 3D grid which holds the signal values (q-space)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.create_qtable" title="dipy.reconst.dsi.create_qtable"><code class="xref py py-obj docutils literal"><span class="pre">create_qtable</span></code></a>(gtab)</td>
<td>create a normalized version of gradients</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.fftn" title="dipy.reconst.dsi.fftn"><code class="xref py py-obj docutils literal"><span class="pre">fftn</span></code></a>(x[,&nbsp;shape,&nbsp;axes,&nbsp;overwrite_x])</td>
<td>Return multidimensional discrete Fourier transform.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.fftshift" title="dipy.reconst.dsi.fftshift"><code class="xref py py-obj docutils literal"><span class="pre">fftshift</span></code></a>(x[,&nbsp;axes])</td>
<td>Shift the zero-frequency component to the center of the spectrum.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.gen_PSF" title="dipy.reconst.dsi.gen_PSF"><code class="xref py py-obj docutils literal"><span class="pre">gen_PSF</span></code></a>(qgrid_sampling,&nbsp;siz_x,&nbsp;siz_y,&nbsp;siz_z)</td>
<td>Generate a PSF for DSI Deconvolution by taking the ifft of the binary  q-space sampling mask and truncating it to keep only the center.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.half_to_full_qspace" title="dipy.reconst.dsi.half_to_full_qspace"><code class="xref py py-obj docutils literal"><span class="pre">half_to_full_qspace</span></code></a>(data,&nbsp;gtab)</td>
<td>Half to full Cartesian grid mapping</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.hanning_filter" title="dipy.reconst.dsi.hanning_filter"><code class="xref py py-obj docutils literal"><span class="pre">hanning_filter</span></code></a>(gtab,&nbsp;filter_width)</td>
<td>create a hanning window</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.ifftshift" title="dipy.reconst.dsi.ifftshift"><code class="xref py py-obj docutils literal"><span class="pre">ifftshift</span></code></a>(x[,&nbsp;axes])</td>
<td>The inverse of <cite>fftshift</cite>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.map_coordinates" title="dipy.reconst.dsi.map_coordinates"><code class="xref py py-obj docutils literal"><span class="pre">map_coordinates</span></code></a>(input,&nbsp;coordinates[,&nbsp;...])</td>
<td>Map the input array to new coordinates by interpolation.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">multi_voxel_fit</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.pdf_interp_coords" title="dipy.reconst.dsi.pdf_interp_coords"><code class="xref py py-obj docutils literal"><span class="pre">pdf_interp_coords</span></code></a>(sphere,&nbsp;rradius,&nbsp;origin)</td>
<td>Precompute coordinates for ODF calculation from the PDF</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.pdf_odf" title="dipy.reconst.dsi.pdf_odf"><code class="xref py py-obj docutils literal"><span class="pre">pdf_odf</span></code></a>(Pr,&nbsp;rradius,&nbsp;interp_coords)</td>
<td>Calculates the real ODF from the diffusion propagator(PDF) Pr</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.project_hemisph_bvecs" title="dipy.reconst.dsi.project_hemisph_bvecs"><code class="xref py py-obj docutils literal"><span class="pre">project_hemisph_bvecs</span></code></a>(gtab)</td>
<td>Project any near identical bvecs to the other hemisphere</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dsi.html#dipy.reconst.dsi.threshold_propagator" title="dipy.reconst.dsi.threshold_propagator"><code class="xref py py-obj docutils literal"><span class="pre">threshold_propagator</span></code></a>(P[,&nbsp;estimated_snr])</td>
<td>Applies hard threshold on the propagator to remove background noise for the  deconvolution.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.dti">
<span id="module-reconst-dti"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.dti</span></code><a class="headerlink" href="#module-dipy.reconst.dti" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ReconstModel</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">Sphere</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit" title="dipy.reconst.dti.TensorFit"><code class="xref py py-obj docutils literal"><span class="pre">TensorFit</span></code></a>(model,&nbsp;model_params)</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.TensorModel" title="dipy.reconst.dti.TensorModel"><code class="xref py py-obj docutils literal"><span class="pre">TensorModel</span></code></a>(gtab[,&nbsp;fit_method])</td>
<td>Diffusion Tensor</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://docs.python.org/library/functions.html#range" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">range</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">apparent_diffusion_coef</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.auto_attr" title="dipy.reconst.dti.auto_attr"><code class="xref py py-obj docutils literal"><span class="pre">auto_attr</span></code></a>(func)</td>
<td>Decorator to create OneTimeProperty attributes.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.axial_diffusivity" title="dipy.reconst.dti.axial_diffusivity"><code class="xref py py-obj docutils literal"><span class="pre">axial_diffusivity</span></code></a>(evals[,&nbsp;axis])</td>
<td>Axial Diffusivity (AD) of a diffusion tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.color_fa" title="dipy.reconst.dti.color_fa"><code class="xref py py-obj docutils literal"><span class="pre">color_fa</span></code></a>(fa,&nbsp;evecs)</td>
<td>Color fractional anisotropy of diffusion tensor</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.decompose_tensor" title="dipy.reconst.dti.decompose_tensor"><code class="xref py py-obj docutils literal"><span class="pre">decompose_tensor</span></code></a>(tensor[,&nbsp;min_diffusivity])</td>
<td>Returns eigenvalues and eigenvectors given a diffusion tensor</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.design_matrix" title="dipy.reconst.dti.design_matrix"><code class="xref py py-obj docutils literal"><span class="pre">design_matrix</span></code></a>(gtab,&nbsp;bval[,&nbsp;dtype])</td>
<td>Constructs design matrix for DTI weighted least squares or least squares fitting.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">determinant</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">deviatoric</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">eig_from_lo_tri</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">eigh</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.fractional_anisotropy" title="dipy.reconst.dti.fractional_anisotropy"><code class="xref py py-obj docutils literal"><span class="pre">fractional_anisotropy</span></code></a>(evals[,&nbsp;axis])</td>
<td>Fractional anisotropy (FA) of a diffusion tensor.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.from_lower_triangular" title="dipy.reconst.dti.from_lower_triangular"><code class="xref py py-obj docutils literal"><span class="pre">from_lower_triangular</span></code></a>(D)</td>
<td>Returns a tensor given the six unique tensor elements</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">geodesic_anisotropy</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.get_sphere" title="dipy.reconst.dti.get_sphere"><code class="xref py py-obj docutils literal"><span class="pre">get_sphere</span></code></a>([name])</td>
<td>provide triangulated spheres</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">gradient_table</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">isotropic</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">iter_fit_tensor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">linearity</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.lower_triangular" title="dipy.reconst.dti.lower_triangular"><code class="xref py py-obj docutils literal"><span class="pre">lower_triangular</span></code></a>(tensor[,&nbsp;b0])</td>
<td>Returns the six lower triangular values of the tensor and a dummy variable</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.mean_diffusivity" title="dipy.reconst.dti.mean_diffusivity"><code class="xref py py-obj docutils literal"><span class="pre">mean_diffusivity</span></code></a>(evals[,&nbsp;axis])</td>
<td>Mean Diffusivity (MD) of a diffusion tensor.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">mode</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">nlls_fit_tensor</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">norm</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.ols_fit_tensor" title="dipy.reconst.dti.ols_fit_tensor"><code class="xref py py-obj docutils literal"><span class="pre">ols_fit_tensor</span></code></a>(design_matrix,&nbsp;data[,&nbsp;min_signal])</td>
<td>Computes ordinary least squares (OLS) fit to calculate self-diffusion tensor using a linear regression model <a class="footnote-reference" href="#id45" id="id1">[1]</a>.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">pinv</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">planarity</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.quantize_evecs" title="dipy.reconst.dti.quantize_evecs"><code class="xref py py-obj docutils literal"><span class="pre">quantize_evecs</span></code></a>(evecs[,&nbsp;odf_vertices])</td>
<td>Find the closest orientation of an evenly distributed sphere</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.radial_diffusivity" title="dipy.reconst.dti.radial_diffusivity"><code class="xref py py-obj docutils literal"><span class="pre">radial_diffusivity</span></code></a>(evals[,&nbsp;axis])</td>
<td>Radial Diffusivity (RD) of a diffusion tensor.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">restore_fit_tensor</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">sphericity</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">tensor_prediction</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.trace" title="dipy.reconst.dti.trace"><code class="xref py py-obj docutils literal"><span class="pre">trace</span></code></a>(evals[,&nbsp;axis])</td>
<td>Trace of a diffusion tensor.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dti.vec_val_vect" title="dipy.reconst.dti.vec_val_vect"><code class="xref py py-obj docutils literal"><span class="pre">vec_val_vect</span></code></a></td>
<td>Vectorize <cite>vecs</cite>.diag(<cite>vals</cite>).`vecs`.T for last 2 dimensions of <cite>vecs</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.vector_norm" title="dipy.reconst.dti.vector_norm"><code class="xref py py-obj docutils literal"><span class="pre">vector_norm</span></code></a>(vec[,&nbsp;axis,&nbsp;keepdims])</td>
<td>Return vector Euclidean (L2) norm</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.wls_fit_tensor" title="dipy.reconst.dti.wls_fit_tensor"><code class="xref py py-obj docutils literal"><span class="pre">wls_fit_tensor</span></code></a>(design_matrix,&nbsp;data[,&nbsp;min_signal])</td>
<td>Computes weighted least squares (WLS) fit to calculate self-diffusion tensor using a linear regression model [R33].</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.gqi">
<span id="module-reconst-gqi"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.gqi</span></code><a class="headerlink" href="#module-dipy.reconst.gqi" title="Permalink to this headline">¶</a></h2>
<p>Classes and functions for generalized q-sampling</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.Cache" title="dipy.reconst.gqi.Cache"><code class="xref py py-obj docutils literal"><span class="pre">Cache</span></code></a></td>
<td>Cache values based on a key object (such as a sphere or gradient table).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.GeneralizedQSamplingFit" title="dipy.reconst.gqi.GeneralizedQSamplingFit"><code class="xref py py-obj docutils literal"><span class="pre">GeneralizedQSamplingFit</span></code></a>(model,&nbsp;data)</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.GeneralizedQSamplingModel" title="dipy.reconst.gqi.GeneralizedQSamplingModel"><code class="xref py py-obj docutils literal"><span class="pre">GeneralizedQSamplingModel</span></code></a></td>
<td>alias of <code class="xref py py-class docutils literal"><span class="pre">MultiVoxelModel</span></code></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.OdfFit" title="dipy.reconst.gqi.OdfFit"><code class="xref py py-obj docutils literal"><span class="pre">OdfFit</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.OdfModel" title="dipy.reconst.gqi.OdfModel"><code class="xref py py-obj docutils literal"><span class="pre">OdfModel</span></code></a></td>
<td>An abstract class to be sub-classed by specific odf models</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.equatorial_maximum" title="dipy.reconst.gqi.equatorial_maximum"><code class="xref py py-obj docutils literal"><span class="pre">equatorial_maximum</span></code></a>(vertices,&nbsp;odf,&nbsp;pole,&nbsp;width)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.gqi.html#dipy.reconst.gqi.equatorial_zone_vertices" title="dipy.reconst.gqi.equatorial_zone_vertices"><code class="xref py py-obj docutils literal"><span class="pre">equatorial_zone_vertices</span></code></a>(vertices,&nbsp;pole[,&nbsp;width])</td>
<td>finds the &#8216;vertices&#8217; in the equatorial zone conjugate</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.gfa" title="dipy.reconst.gqi.gfa"><code class="xref py py-obj docutils literal"><span class="pre">gfa</span></code></a>(samples)</td>
<td>The general fractional anisotropy of a function evaluated on the unit sphere</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.local_maxima" title="dipy.reconst.gqi.local_maxima"><code class="xref py py-obj docutils literal"><span class="pre">local_maxima</span></code></a>(odf,&nbsp;edges)</td>
<td>Finds the local maxima of a function evaluated on a discrete set of points.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">multi_voxel_fit</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.gqi.html#dipy.reconst.gqi.normalize_qa" title="dipy.reconst.gqi.normalize_qa"><code class="xref py py-obj docutils literal"><span class="pre">normalize_qa</span></code></a>(qa[,&nbsp;max_qa])</td>
<td>Normalize quantitative anisotropy.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.gqi.html#dipy.reconst.gqi.npa" title="dipy.reconst.gqi.npa"><code class="xref py py-obj docutils literal"><span class="pre">npa</span></code></a>(self,&nbsp;odf[,&nbsp;width])</td>
<td>non-parametric anisotropy</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.odf_sum" title="dipy.reconst.gqi.odf_sum"><code class="xref py py-obj docutils literal"><span class="pre">odf_sum</span></code></a>(odf)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.patch_maximum" title="dipy.reconst.gqi.patch_maximum"><code class="xref py py-obj docutils literal"><span class="pre">patch_maximum</span></code></a>(vertices,&nbsp;odf,&nbsp;pole,&nbsp;width)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.patch_sum" title="dipy.reconst.gqi.patch_sum"><code class="xref py py-obj docutils literal"><span class="pre">patch_sum</span></code></a>(vertices,&nbsp;odf,&nbsp;pole,&nbsp;width)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.gqi.html#dipy.reconst.gqi.patch_vertices" title="dipy.reconst.gqi.patch_vertices"><code class="xref py py-obj docutils literal"><span class="pre">patch_vertices</span></code></a>(vertices,&nbsp;pole,&nbsp;width)</td>
<td>find &#8216;vertices&#8217; within the cone of &#8216;width&#8217; degrees around &#8216;pole&#8217;</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.gqi.html#dipy.reconst.gqi.polar_zone_vertices" title="dipy.reconst.gqi.polar_zone_vertices"><code class="xref py py-obj docutils literal"><span class="pre">polar_zone_vertices</span></code></a>(vertices,&nbsp;pole[,&nbsp;width])</td>
<td>finds the &#8216;vertices&#8217; in the equatorial band around</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.remove_similar_vertices" title="dipy.reconst.gqi.remove_similar_vertices"><code class="xref py py-obj docutils literal"><span class="pre">remove_similar_vertices</span></code></a>(vertices,&nbsp;theta)</td>
<td>Returns vertices that are separated by at least theta degrees from all other vertices.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.gqi.html#dipy.reconst.gqi.squared_radial_component" title="dipy.reconst.gqi.squared_radial_component"><code class="xref py py-obj docutils literal"><span class="pre">squared_radial_component</span></code></a>(x[,&nbsp;tol])</td>
<td>Part of the GQI2 integral</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.triple_odf_maxima" title="dipy.reconst.gqi.triple_odf_maxima"><code class="xref py py-obj docutils literal"><span class="pre">triple_odf_maxima</span></code></a>(vertices,&nbsp;odf,&nbsp;width)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.gqi.html#dipy.reconst.gqi.upper_hemi_map" title="dipy.reconst.gqi.upper_hemi_map"><code class="xref py py-obj docutils literal"><span class="pre">upper_hemi_map</span></code></a>(v)</td>
<td>maps a 3-vector into the z-upper hemisphere</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.interpolate">
<span id="module-reconst-interpolate"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.interpolate</span></code><a class="headerlink" href="#module-dipy.reconst.interpolate" title="Permalink to this headline">¶</a></h2>
<p>Interpolators wrap arrays to allow the array to be indexed in continuous coordinates</p>
<p>This module uses the trackvis coordinate system, for more information about
this coordinate system please see dipy.tracking.utils
The following modules also use this coordinate system:
dipy.tracking.utils
dipy.tracking.integration
dipy.reconst.interpolate</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.interpolate.Interpolator" title="dipy.reconst.interpolate.Interpolator"><code class="xref py py-obj docutils literal"><span class="pre">Interpolator</span></code></a>(data,&nbsp;voxel_size)</td>
<td>Class to be subclassed by different interpolator types</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.interpolate.NearestNeighborInterpolator" title="dipy.reconst.interpolate.NearestNeighborInterpolator"><code class="xref py py-obj docutils literal"><span class="pre">NearestNeighborInterpolator</span></code></a>(data,&nbsp;voxel_size)</td>
<td>Interpolates data using nearest neighbor interpolation</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.interpolate.OutsideImage" title="dipy.reconst.interpolate.OutsideImage"><code class="xref py py-obj docutils literal"><span class="pre">OutsideImage</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.interpolate.TriLinearInterpolator" title="dipy.reconst.interpolate.TriLinearInterpolator"><code class="xref py py-obj docutils literal"><span class="pre">TriLinearInterpolator</span></code></a>(data,&nbsp;voxel_size)</td>
<td>Interpolates data using trilinear interpolation</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.interpolate.array" title="dipy.reconst.interpolate.array"><code class="xref py py-obj docutils literal"><span class="pre">array</span></code></a>(object[,&nbsp;dtype,&nbsp;copy,&nbsp;order,&nbsp;subok,&nbsp;ndmin])</td>
<td>Create an array.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.interpolate.trilinear_interp" title="dipy.reconst.interpolate.trilinear_interp"><code class="xref py py-obj docutils literal"><span class="pre">trilinear_interp</span></code></a></td>
<td>Interpolates data at index</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-reconst-mapmri">
<h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.mapmri</span></code><a class="headerlink" href="#module-reconst-mapmri" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">MapmriFit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">MapmriModel</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ReconstFit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ReconstModel</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">b_mat</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">create_rspace</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">factorial</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">factorial2</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">gradient_table</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">hermite</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_EAP</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_index_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_odf_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_phi_1d</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_phi_3d</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_phi_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_psi_1d</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_psi_3d</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">mapmri_psi_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">multi_voxel_fit</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">optional_package</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">warn</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.multi_voxel">
<span id="module-reconst-multi-voxel"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.multi_voxel</span></code><a class="headerlink" href="#module-dipy.reconst.multi_voxel" title="Permalink to this headline">¶</a></h2>
<p>Tools to easily make multi voxel models</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.multi_voxel.html#dipy.reconst.multi_voxel.CallableArray" title="dipy.reconst.multi_voxel.CallableArray"><code class="xref py py-obj docutils literal"><span class="pre">CallableArray</span></code></a></td>
<td>An array which can be called like a function</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.multi_voxel.html#dipy.reconst.multi_voxel.MultiVoxelFit" title="dipy.reconst.multi_voxel.MultiVoxelFit"><code class="xref py py-obj docutils literal"><span class="pre">MultiVoxelFit</span></code></a>(model,&nbsp;fit_array,&nbsp;mask)</td>
<td>Holds an array of fits and allows access to their attributes and</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ReconstFit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.multi_voxel.as_strided" title="dipy.reconst.multi_voxel.as_strided"><code class="xref py py-obj docutils literal"><span class="pre">as_strided</span></code></a>(x[,&nbsp;shape,&nbsp;strides,&nbsp;subok])</td>
<td>Make an ndarray from the given array with the given shape and strides.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">multi_voxel_fit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.multi_voxel.ndindex" title="dipy.reconst.multi_voxel.ndindex"><code class="xref py py-obj docutils literal"><span class="pre">ndindex</span></code></a>(shape)</td>
<td>An N-dimensional iterator object to index arrays.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.odf">
<span id="module-reconst-odf"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.odf</span></code><a class="headerlink" href="#module-dipy.reconst.odf" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.odf.OdfFit" title="dipy.reconst.odf.OdfFit"><code class="xref py py-obj docutils literal"><span class="pre">OdfFit</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.odf.html#dipy.reconst.odf.OdfModel" title="dipy.reconst.odf.OdfModel"><code class="xref py py-obj docutils literal"><span class="pre">OdfModel</span></code></a></td>
<td>An abstract class to be sub-classed by specific odf models</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ReconstFit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ReconstModel</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.odf.html#dipy.reconst.odf.gfa" title="dipy.reconst.odf.gfa"><code class="xref py py-obj docutils literal"><span class="pre">gfa</span></code></a>(samples)</td>
<td>The general fractional anisotropy of a function evaluated on the unit sphere</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">minmax_normalize</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-reconst-peaks">
<h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.peaks</span></code><a class="headerlink" href="#module-reconst-peaks" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">HemiSphere</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">InTemporaryDirectory</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">PeaksAndMetrics</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">PeaksAndMetricsDirectionGetter</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">Sphere</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">repeat</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="http://docs.python.org/library/functions.html#xrange" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">xrange</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">Pool</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cpu_count</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">gfa</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">local_maxima</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ndindex</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">peak_directions</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">peak_directions_nl</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">peaks_from_model</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">remove_similar_vertices</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">reshape_peaks_for_visualization</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">search_descending</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">sh_to_sf_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">warn</span></code></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.sfm">
<span id="module-reconst-sfm"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.sfm</span></code><a class="headerlink" href="#module-dipy.reconst.sfm" title="Permalink to this headline">¶</a></h2>
<p>The Sparse Fascicle Model.</p>
<p>This is an implementation of the sparse fascicle model described in
<a class="reference internal" href="#id83" id="id3">[Rokem2015]</a>. The multi b-value version of this model is described in
<a class="reference internal" href="#id84" id="id4">[Rokem2014]</a>.</p>
<table class="docutils citation" frame="void" id="rokem2015" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Rokem2015]</td><td>Ariel Rokem, Jason D. Yeatman, Franco Pestilli, Kendrick
N. Kay, Aviv Mezer, Stefan van der Walt, Brian A. Wandell
(2015). Evaluating the accuracy of diffusion MRI models in white
matter. PLoS ONE 10(4): e0123272. doi:10.1371/journal.pone.0123272</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rokem2014" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Rokem2014]</td><td>Ariel Rokem, Kimberly L. Chan, Jason D. Yeatman, Franco
Pestilli,  Brian A. Wandell (2014). Evaluating the accuracy of diffusion
models at multiple b-values with cross-validation. ISMRM 2014.</td></tr>
</tbody>
</table>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.Cache" title="dipy.reconst.sfm.Cache"><code class="xref py py-obj docutils literal"><span class="pre">Cache</span></code></a></td>
<td>Cache values based on a key object (such as a sphere or gradient table).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.ExponentialIsotropicFit" title="dipy.reconst.sfm.ExponentialIsotropicFit"><code class="xref py py-obj docutils literal"><span class="pre">ExponentialIsotropicFit</span></code></a>(model,&nbsp;params)</td>
<td>A fit to the ExponentialIsotropicModel object, based on data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.ExponentialIsotropicModel" title="dipy.reconst.sfm.ExponentialIsotropicModel"><code class="xref py py-obj docutils literal"><span class="pre">ExponentialIsotropicModel</span></code></a>(gtab)</td>
<td>Representing the isotropic signal as a fit to an exponential decay function</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.IsotropicFit" title="dipy.reconst.sfm.IsotropicFit"><code class="xref py py-obj docutils literal"><span class="pre">IsotropicFit</span></code></a>(model,&nbsp;params)</td>
<td>A fit object for representing the isotropic signal as the mean of the diffusion-weighted signal.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.IsotropicModel" title="dipy.reconst.sfm.IsotropicModel"><code class="xref py py-obj docutils literal"><span class="pre">IsotropicModel</span></code></a>(gtab)</td>
<td>A base-class for the representation of isotropic signals.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.ReconstFit" title="dipy.reconst.sfm.ReconstFit"><code class="xref py py-obj docutils literal"><span class="pre">ReconstFit</span></code></a></td>
<td>Abstract class which holds the fit result of ReconstModel</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.ReconstModel" title="dipy.reconst.sfm.ReconstModel"><code class="xref py py-obj docutils literal"><span class="pre">ReconstModel</span></code></a></td>
<td>Abstract class for signal reconstruction models</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleFit" title="dipy.reconst.sfm.SparseFascicleFit"><code class="xref py py-obj docutils literal"><span class="pre">SparseFascicleFit</span></code></a>(model,&nbsp;beta,&nbsp;S0,&nbsp;iso)</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleModel" title="dipy.reconst.sfm.SparseFascicleModel"><code class="xref py py-obj docutils literal"><span class="pre">SparseFascicleModel</span></code></a>(gtab[,&nbsp;sphere,&nbsp;...])</td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.auto_attr" title="dipy.reconst.sfm.auto_attr"><code class="xref py py-obj docutils literal"><span class="pre">auto_attr</span></code></a>(func)</td>
<td>Decorator to create OneTimeProperty attributes.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.nanmean" title="dipy.reconst.sfm.nanmean"><code class="xref py py-obj docutils literal"><span class="pre">nanmean</span></code></a>(a[,&nbsp;axis,&nbsp;dtype,&nbsp;out,&nbsp;keepdims])</td>
<td>Compute the arithmetic mean along the specified axis, ignoring NaNs.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.optional_package" title="dipy.reconst.sfm.optional_package"><code class="xref py py-obj docutils literal"><span class="pre">optional_package</span></code></a>(name[,&nbsp;trip_msg])</td>
<td>Return package-like thing and module setup for package <cite>name</cite></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.sfm_design_matrix" title="dipy.reconst.sfm.sfm_design_matrix"><code class="xref py py-obj docutils literal"><span class="pre">sfm_design_matrix</span></code></a>(gtab,&nbsp;sphere,&nbsp;response[,&nbsp;mode])</td>
<td>Construct the SFM design matrix</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-dipy.reconst.shm">
<span id="module-reconst-shm"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.shm</span></code><a class="headerlink" href="#module-dipy.reconst.shm" title="Permalink to this headline">¶</a></h2>
<p>Tools for using spherical harmonic models to fit diffusion data</p>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Aganj, I., et. al. 2009. ODF Reconstruction in Q-Ball Imaging With Solid</dt>
<dd>Angle Consideration.</dd>
<dt>Descoteaux, M., et. al. 2007. Regularized, fast, and robust analytical</dt>
<dd>Q-ball imaging.</dd>
<dt>Tristan-Vega, A., et. al. 2010. A new methodology for estimation of fiber</dt>
<dd>populations in white matter of the brain with Funk-Radon transform.</dd>
<dt>Tristan-Vega, A., et. al. 2009. Estimation of fiber orientation probability</dt>
<dd>density functions in high angular resolution diffusion imaging.</dd>
</dl>
</div>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.Cache" title="dipy.reconst.shm.Cache"><code class="xref py py-obj docutils literal"><span class="pre">Cache</span></code></a></td>
<td>Cache values based on a key object (such as a sphere or gradient table).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.CsaOdfModel" title="dipy.reconst.shm.CsaOdfModel"><code class="xref py py-obj docutils literal"><span class="pre">CsaOdfModel</span></code></a>(gtab,&nbsp;sh_order[,&nbsp;smooth,&nbsp;...])</td>
<td>Implementation of Constant Solid Angle reconstruction method.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">LooseVersion</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.shm.OdfFit" title="dipy.reconst.shm.OdfFit"><code class="xref py py-obj docutils literal"><span class="pre">OdfFit</span></code></a></td>
<td><p class="rubric">Methods</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.OdfModel" title="dipy.reconst.shm.OdfModel"><code class="xref py py-obj docutils literal"><span class="pre">OdfModel</span></code></a></td>
<td>An abstract class to be sub-classed by specific odf models</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.OpdtModel" title="dipy.reconst.shm.OpdtModel"><code class="xref py py-obj docutils literal"><span class="pre">OpdtModel</span></code></a>(gtab,&nbsp;sh_order[,&nbsp;smooth,&nbsp;...])</td>
<td>Implementation of Orientation Probability Density Transform reconstruction method.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">QballBaseModel</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.QballModel" title="dipy.reconst.shm.QballModel"><code class="xref py py-obj docutils literal"><span class="pre">QballModel</span></code></a>(gtab,&nbsp;sh_order[,&nbsp;smooth,&nbsp;...])</td>
<td>Implementation of regularized Qball reconstruction method.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.ResidualBootstrapWrapper" title="dipy.reconst.shm.ResidualBootstrapWrapper"><code class="xref py py-obj docutils literal"><span class="pre">ResidualBootstrapWrapper</span></code></a>(signal_object,&nbsp;B,&nbsp;...)</td>
<td>Returns a residual bootstrap sample of the signal_object when indexed</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmFit" title="dipy.reconst.shm.SphHarmFit"><code class="xref py py-obj docutils literal"><span class="pre">SphHarmFit</span></code></a>(model,&nbsp;shm_coef,&nbsp;mask)</td>
<td>Diffusion data fit to a spherical harmonic model</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmModel" title="dipy.reconst.shm.SphHarmModel"><code class="xref py py-obj docutils literal"><span class="pre">SphHarmModel</span></code></a>(gtab,&nbsp;sh_order[,&nbsp;smooth,&nbsp;...])</td>
<td>The base class to sub-classed by specific spherical harmonic models of</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">anisotropic_power</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">auto_attr</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.bootstrap_data_array" title="dipy.reconst.shm.bootstrap_data_array"><code class="xref py py-obj docutils literal"><span class="pre">bootstrap_data_array</span></code></a>(data,&nbsp;H,&nbsp;R[,&nbsp;permute])</td>
<td>Applies the Residual Bootstraps to the data given H and R</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.bootstrap_data_voxel" title="dipy.reconst.shm.bootstrap_data_voxel"><code class="xref py py-obj docutils literal"><span class="pre">bootstrap_data_voxel</span></code></a>(data,&nbsp;H,&nbsp;R[,&nbsp;permute])</td>
<td>Like bootstrap_data_array but faster when for a single voxel</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">calculate_max_order</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.cart2sphere" title="dipy.reconst.shm.cart2sphere"><code class="xref py py-obj docutils literal"><span class="pre">cart2sphere</span></code></a>(x,&nbsp;y,&nbsp;z)</td>
<td>Return angles for Cartesian 3D coordinates <cite>x</cite>, <cite>y</cite>, and <cite>z</cite></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.shm.concatenate" title="dipy.reconst.shm.concatenate"><code class="xref py py-obj docutils literal"><span class="pre">concatenate</span></code></a>((a1,&nbsp;a2,&nbsp;...)[,&nbsp;axis])</td>
<td>Join a sequence of arrays along an existing axis.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.diag" title="dipy.reconst.shm.diag"><code class="xref py py-obj docutils literal"><span class="pre">diag</span></code></a>(v[,&nbsp;k])</td>
<td>Extract a diagonal or construct a diagonal array.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.shm.diff" title="dipy.reconst.shm.diff"><code class="xref py py-obj docutils literal"><span class="pre">diff</span></code></a>(a[,&nbsp;n,&nbsp;axis])</td>
<td>Calculate the n-th order discrete difference along given axis.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.dot" title="dipy.reconst.shm.dot"><code class="xref py py-obj docutils literal"><span class="pre">dot</span></code></a>(a,&nbsp;b[,&nbsp;out])</td>
<td>Dot product of two arrays.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.shm.empty" title="dipy.reconst.shm.empty"><code class="xref py py-obj docutils literal"><span class="pre">empty</span></code></a>(shape[,&nbsp;dtype,&nbsp;order])</td>
<td>Return a new array of given shape and type, without initializing entries.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.eye" title="dipy.reconst.shm.eye"><code class="xref py py-obj docutils literal"><span class="pre">eye</span></code></a>(N[,&nbsp;M,&nbsp;k,&nbsp;dtype])</td>
<td>Return a 2-D array with ones on the diagonal and zeros elsewhere.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">forward_sdeconv_mat</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">gen_dirac</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.hat" title="dipy.reconst.shm.hat"><code class="xref py py-obj docutils literal"><span class="pre">hat</span></code></a>(B)</td>
<td>Returns the hat matrix for the design matrix B</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.lazy_index" title="dipy.reconst.shm.lazy_index"><code class="xref py py-obj docutils literal"><span class="pre">lazy_index</span></code></a>(index)</td>
<td>Produces a lazy index</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.lcr_matrix" title="dipy.reconst.shm.lcr_matrix"><code class="xref py py-obj docutils literal"><span class="pre">lcr_matrix</span></code></a>(H)</td>
<td>Returns a matrix for computing leveraged, centered residuals from data</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.lpn" title="dipy.reconst.shm.lpn"><code class="xref py py-obj docutils literal"><span class="pre">lpn</span></code></a>(n,&nbsp;z)</td>
<td>Compute sequence of Legendre functions of the first kind (polynomials), Pn(z) and derivatives for all degrees from 0 to n (inclusive).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.normalize_data" title="dipy.reconst.shm.normalize_data"><code class="xref py py-obj docutils literal"><span class="pre">normalize_data</span></code></a>(data,&nbsp;where_b0[,&nbsp;min_signal,&nbsp;out])</td>
<td>Normalizes the data with respect to the mean b0</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">order_from_ncoef</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.shm.pinv" title="dipy.reconst.shm.pinv"><code class="xref py py-obj docutils literal"><span class="pre">pinv</span></code></a>(a[,&nbsp;rcond])</td>
<td>Compute the (Moore-Penrose) pseudo-inverse of a matrix.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.randint" title="dipy.reconst.shm.randint"><code class="xref py py-obj docutils literal"><span class="pre">randint</span></code></a>(low[,&nbsp;high,&nbsp;size])</td>
<td>Return random integers from <cite>low</cite> (inclusive) to <cite>high</cite> (exclusive).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.real_sph_harm" title="dipy.reconst.shm.real_sph_harm"><code class="xref py py-obj docutils literal"><span class="pre">real_sph_harm</span></code></a>(m,&nbsp;n,&nbsp;theta,&nbsp;phi)</td>
<td>Compute real spherical harmonics, where the real harmonic <img class="math" src="../_images/math/310565e8642905e73f4bd6c638d08275537ab1eb.png" alt="Y^m_n"/> is</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">real_sym_sh_basis</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">real_sym_sh_mrtrix</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.sf_to_sh" title="dipy.reconst.shm.sf_to_sh"><code class="xref py py-obj docutils literal"><span class="pre">sf_to_sh</span></code></a>(sf,&nbsp;sphere[,&nbsp;sh_order,&nbsp;basis_type,&nbsp;...])</td>
<td>Spherical function to spherical harmonics (SH).</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">sh_to_rh</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.sh_to_sf" title="dipy.reconst.shm.sh_to_sf"><code class="xref py py-obj docutils literal"><span class="pre">sh_to_sf</span></code></a>(sh,&nbsp;sphere,&nbsp;sh_order[,&nbsp;basis_type])</td>
<td>Spherical harmonics (SH) to spherical function (SF).</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">sh_to_sf_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.smooth_pinv" title="dipy.reconst.shm.smooth_pinv"><code class="xref py py-obj docutils literal"><span class="pre">smooth_pinv</span></code></a>(B,&nbsp;L)</td>
<td>Regularized psudo-inverse</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.sph_harm_ind_list" title="dipy.reconst.shm.sph_harm_ind_list"><code class="xref py py-obj docutils literal"><span class="pre">sph_harm_ind_list</span></code></a>(sh_order)</td>
<td>Returns the degree (n) and order (m) of all the symmetric spherical harmonics of degree less then or equal it sh_order.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">spherical_harmonics</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.shm.svd" title="dipy.reconst.shm.svd"><code class="xref py py-obj docutils literal"><span class="pre">svd</span></code></a>(a[,&nbsp;full_matrices,&nbsp;compute_uv])</td>
<td>Singular Value Decomposition.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.unique" title="dipy.reconst.shm.unique"><code class="xref py py-obj docutils literal"><span class="pre">unique</span></code></a>(ar[,&nbsp;return_index,&nbsp;return_inverse,&nbsp;...])</td>
<td>Find the unique elements of an array.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-reconst-shore">
<h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">reconst.shore</span></code><a class="headerlink" href="#module-reconst-shore" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">Cache</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ShoreFit</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ShoreModel</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">cart2sphere</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">create_rspace</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">factorial</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">genlaguerre</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">l_shore</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">multi_voxel_fit</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">n_shore</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">optional_package</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">real_sph_harm</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">shore_indices</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">shore_matrix</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">shore_matrix_odf</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">shore_matrix_pdf</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">shore_order</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">warn</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<div class="section" id="bench">
<h3>bench<a class="headerlink" href="#bench" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.bench">
<code class="descclassname">dipy.reconst.</code><code class="descname">bench</code><span class="sig-paren">(</span><em>self</em>, <em>label='fast'</em>, <em>verbose=1</em>, <em>extra_argv=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.bench" title="Permalink to this definition">¶</a></dt>
<dd><p>Run benchmarks for module using nose.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>label</strong> : {&#8216;fast&#8217;, &#8216;full&#8217;, &#8216;&#8217;, attribute identifier}, optional</p>
<blockquote>
<div><p>Identifies the benchmarks to run. This can be a string to pass to
the nosetests executable with the &#8216;-A&#8217; option, or one of several
special values.  Special values are:
* &#8216;fast&#8217; - the default - which corresponds to the <code class="docutils literal"><span class="pre">nosetests</span> <span class="pre">-A</span></code></p>
<blockquote>
<div><p>option of &#8216;not slow&#8217;.</p>
</div></blockquote>
<ul class="simple">
<li>&#8216;full&#8217; - fast (as above) and slow benchmarks as in the
&#8216;no -A&#8217; option to nosetests - this is the same as &#8216;&#8217;.</li>
<li>None or &#8216;&#8217; - run all tests.</li>
</ul>
<p>attribute_identifier - string passed directly to nosetests as &#8216;-A&#8217;.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity value for benchmark outputs, in the range 1-10. Default is 1.</p>
</div></blockquote>
<p><strong>extra_argv</strong> : list, optional</p>
<blockquote>
<div><p>List with any extra arguments to pass to nosetests.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>success</strong> : bool</p>
<blockquote class="last">
<div><p>Returns True if running the benchmarks works, False if an error
occurred.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Benchmarks are like tests, but have names starting with &#8220;bench&#8221; instead
of &#8220;test&#8221;, and can be found under the &#8220;benchmarks&#8221; sub-directory of the
module.</p>
<p>Each NumPy module exposes <cite>bench</cite> in its namespace to run all benchmarks
for it.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">success</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">bench</span><span class="p">()</span> 
<span class="go">Running benchmarks for numpy.lib</span>
<span class="gp">...</span>
<span class="go">using 562341 items:</span>
<span class="go">unique:</span>
<span class="go">0.11</span>
<span class="go">unique1d:</span>
<span class="go">0.11</span>
<span class="go">ratio: 1.0</span>
<span class="go">nUnique: 56230 == 56230</span>
<span class="gp">...</span>
<span class="go">OK</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">success</span> 
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="test">
<h3>test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.test">
<code class="descclassname">dipy.reconst.</code><code class="descname">test</code><span class="sig-paren">(</span><em>self</em>, <em>label='fast'</em>, <em>verbose=1</em>, <em>extra_argv=None</em>, <em>doctests=False</em>, <em>coverage=False</em>, <em>raise_warnings=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Run tests for module using nose.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>label</strong> : {&#8216;fast&#8217;, &#8216;full&#8217;, &#8216;&#8217;, attribute identifier}, optional</p>
<blockquote>
<div><p>Identifies the tests to run. This can be a string to pass to
the nosetests executable with the &#8216;-A&#8217; option, or one of several
special values.  Special values are:
* &#8216;fast&#8217; - the default - which corresponds to the <code class="docutils literal"><span class="pre">nosetests</span> <span class="pre">-A</span></code></p>
<blockquote>
<div><p>option of &#8216;not slow&#8217;.</p>
</div></blockquote>
<ul class="simple">
<li>&#8216;full&#8217; - fast (as above) and slow tests as in the
&#8216;no -A&#8217; option to nosetests - this is the same as &#8216;&#8217;.</li>
<li>None or &#8216;&#8217; - run all tests.</li>
</ul>
<p>attribute_identifier - string passed directly to nosetests as &#8216;-A&#8217;.</p>
</div></blockquote>
<p><strong>verbose</strong> : int, optional</p>
<blockquote>
<div><p>Verbosity value for test outputs, in the range 1-10. Default is 1.</p>
</div></blockquote>
<p><strong>extra_argv</strong> : list, optional</p>
<blockquote>
<div><p>List with any extra arguments to pass to nosetests.</p>
</div></blockquote>
<p><strong>doctests</strong> : bool, optional</p>
<blockquote>
<div><p>If True, run doctests in module. Default is False.</p>
</div></blockquote>
<p><strong>coverage</strong> : bool, optional</p>
<blockquote>
<div><p>If True, report coverage of NumPy code. Default is False.
(This requires the <a href="#id5"><span class="problematic" id="id6">`</span></a>coverage module:</p>
<blockquote>
<div><p>&lt;<a class="reference external" href="http://nedbatchelder.com/code/modules/coverage.html">http://nedbatchelder.com/code/modules/coverage.html</a>&gt;`_).</p>
</div></blockquote>
</div></blockquote>
<p><strong>raise_warnings</strong> : str or sequence of warnings, optional</p>
<blockquote>
<div><p>This specifies which warnings to configure as &#8216;raise&#8217; instead
of &#8216;warn&#8217; during the test execution.  Valid strings are:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;develop&#8221; : equals <code class="docutils literal"><span class="pre">(DeprecationWarning,</span> <span class="pre">RuntimeWarning)</span></code></li>
<li>&#8220;release&#8221; : equals <code class="docutils literal"><span class="pre">()</span></code>, don&#8217;t raise on any warnings.</li>
</ul>
</div></blockquote>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> : object</p>
<blockquote class="last">
<div><p>Returns the result of running the tests as a
<code class="docutils literal"><span class="pre">nose.result.TextTestResult</span></code> object.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Each NumPy module exposes <cite>test</cite> in its namespace to run all tests for it.
For example, to run all tests for numpy.lib:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
</pre></div>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">lib</span><span class="o">.</span><span class="n">test</span><span class="p">()</span> 
<span class="go">Running unit tests for numpy.lib</span>
<span class="gp">...</span>
<span class="go">Ran 976 tests in 3.933s</span>
</pre></div>
</div>
<p>OK</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">errors</span> 
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">knownfail</span> 
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="reconstfit">
<h3><a class="reference internal" href="#dipy.reconst.base.ReconstFit" title="dipy.reconst.base.ReconstFit"><code class="xref py py-class docutils literal"><span class="pre">ReconstFit</span></code></a><a class="headerlink" href="#reconstfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.base.ReconstFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.base.</code><code class="descname">ReconstFit</code><a class="headerlink" href="#dipy.reconst.base.ReconstFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract class which holds the fit result of ReconstModel</p>
<p>For example that could be holding FA or GFA etc.</p>
<dl class="method">
<dt id="dipy.reconst.base.ReconstFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.base.ReconstFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reconstmodel">
<h3><a class="reference internal" href="#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal"><span class="pre">ReconstModel</span></code></a><a class="headerlink" href="#reconstmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.base.ReconstModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.base.</code><code class="descname">ReconstModel</code><a class="headerlink" href="#dipy.reconst.base.ReconstModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract class for signal reconstruction models</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.base.ReconstModel.fit" title="dipy.reconst.base.ReconstModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.base.ReconstModel.get_directions" title="dipy.reconst.base.ReconstModel.get_directions"><code class="xref py py-obj docutils literal"><span class="pre">get_directions</span></code></a>(sig)</td>
<td>returns Nx3 array of unit vectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.base.ReconstModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.base.ReconstModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.base.ReconstModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.base.ReconstModel.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.reconst.base.ReconstModel.get_directions">
<code class="descname">get_directions</code><span class="sig-paren">(</span><em>sig</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.base.ReconstModel.get_directions" title="Permalink to this definition">¶</a></dt>
<dd><p>returns Nx3 array of unit vectors</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="bench-bounding-box">
<h3>bench_bounding_box<a class="headerlink" href="#bench-bounding-box" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_bounding_box.bench_bounding_box">
<code class="descclassname">dipy.reconst.benchmarks.bench_bounding_box.</code><code class="descname">bench_bounding_box</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_bounding_box.bench_bounding_box" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="bounding-box">
<h3>bounding_box<a class="headerlink" href="#bounding-box" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_bounding_box.bounding_box">
<code class="descclassname">dipy.reconst.benchmarks.bench_bounding_box.</code><code class="descname">bounding_box</code><span class="sig-paren">(</span><em>vol</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_bounding_box.bounding_box" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the bounding box of nonzero intensity voxels in the volume.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>vol</strong> : ndarray</p>
<blockquote>
<div><p>Volume to compute bounding box on.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>npmins</strong> : list</p>
<blockquote>
<div><p>Array containg minimum index of each dimension</p>
</div></blockquote>
<p><strong>npmaxs</strong> : list</p>
<blockquote class="last">
<div><p>Array containg maximum index of each dimension</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="measure">
<h3>measure<a class="headerlink" href="#measure" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_bounding_box.measure">
<code class="descclassname">dipy.reconst.benchmarks.bench_bounding_box.</code><code class="descname">measure</code><span class="sig-paren">(</span><em>code_str</em>, <em>times=1</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_bounding_box.measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return elapsed time for executing code in the namespace of the caller.</p>
<p>The supplied code string is compiled with the Python builtin <code class="docutils literal"><span class="pre">compile</span></code>.
The precision of the timing is 10 milli-seconds. If the code will execute
fast on this timescale, it can be executed many times to get reasonable
timing accuracy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>code_str</strong> : str</p>
<blockquote>
<div><p>The code to be timed.</p>
</div></blockquote>
<p><strong>times</strong> : int, optional</p>
<blockquote>
<div><p>The number of times the code is executed. Default is 1. The code is
only compiled once.</p>
</div></blockquote>
<p><strong>label</strong> : str, optional</p>
<blockquote>
<div><p>A label to identify <cite>code_str</cite> with. This is passed into <code class="docutils literal"><span class="pre">compile</span></code>
as the second argument (for run-time error messages).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>elapsed</strong> : float</p>
<blockquote class="last">
<div><p>Total elapsed time in seconds for executing <cite>code_str</cite> <cite>times</cite> times.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">etime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="s1">&#39;for i in range(1000): np.sqrt(i**2)&#39;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">times</span><span class="o">=</span><span class="n">times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s2">&quot;Time for a single execution : &quot;</span><span class="p">,</span> <span class="n">etime</span> <span class="o">/</span> <span class="n">times</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span>
<span class="go">Time for a single execution :  0.005 s</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="constrainedsphericaldeconvmodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">ConstrainedSphericalDeconvModel</span></code><a class="headerlink" href="#constrainedsphericaldeconvmodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="gradienttable">
<h3><code class="xref py py-class docutils literal"><span class="pre">GradientTable</span></code><a class="headerlink" href="#gradienttable" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="bench-csdeconv">
<h3>bench_csdeconv<a class="headerlink" href="#bench-csdeconv" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="num-grad">
<h3>num_grad<a class="headerlink" href="#num-grad" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="read-stanford-labels">
<h3>read_stanford_labels<a class="headerlink" href="#read-stanford-labels" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="bench-local-maxima">
<h3>bench_local_maxima<a class="headerlink" href="#bench-local-maxima" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_peaks.bench_local_maxima">
<code class="descclassname">dipy.reconst.benchmarks.bench_peaks.</code><code class="descname">bench_local_maxima</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_peaks.bench_local_maxima" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-sphere">
<h3>get_sphere<a class="headerlink" href="#get-sphere" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_peaks.get_sphere">
<code class="descclassname">dipy.reconst.benchmarks.bench_peaks.</code><code class="descname">get_sphere</code><span class="sig-paren">(</span><em>name='symmetric362'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_peaks.get_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>provide triangulated spheres</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : str</p>
<blockquote>
<div><p>which sphere - one of:
* &#8216;symmetric362&#8217;
* &#8216;symmetric642&#8217;
* &#8216;symmetric724&#8217;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>sphere</strong> : a dipy.core.sphere.Sphere class instance</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;symmetric362&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">sphere</span><span class="o">.</span><span class="n">faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(362, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">faces</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(720, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;not a sphere name&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">DataError</span>: <span class="n">No sphere called &quot;not a sphere name&quot;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="local-maxima">
<h3>local_maxima<a class="headerlink" href="#local-maxima" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_peaks.local_maxima">
<code class="descclassname">dipy.reconst.benchmarks.bench_peaks.</code><code class="descname">local_maxima</code><span class="sig-paren">(</span><em>odf</em>, <em>edges</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_peaks.local_maxima" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the local maxima of a function evaluated on a discrete set of points.</p>
<p>If a function is evaluated on some set of points where each pair of
neighboring points is an edge in edges, find the local maxima.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>odf</strong> : array, 1d, dtype=double</p>
<blockquote>
<div><p>The function evaluated on a set of discrete points.</p>
</div></blockquote>
<p><strong>edges</strong> : array (N, 2)</p>
<blockquote>
<div><p>The set of neighbor relations between the points. Every edge, ie
<cite>edges[i, :]</cite>, is a pair of neighboring points.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>peak_values</strong> : ndarray</p>
<blockquote>
<div><p>Value of odf at a maximum point. Peak values is sorted in descending
order.</p>
</div></blockquote>
<p><strong>peak_indices</strong> : ndarray</p>
<blockquote class="last">
<div><p>Indices of maximum points. Sorted in the same order as <cite>peak_values</cite> so
<cite>odf[peak_indices[i]] == peak_values[i]</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dipy.core.sphere.html#module-dipy.core.sphere" title="dipy.core.sphere"><code class="xref py py-obj docutils literal"><span class="pre">dipy.core.sphere</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="id7">
<h3>measure<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_peaks.measure">
<code class="descclassname">dipy.reconst.benchmarks.bench_peaks.</code><code class="descname">measure</code><span class="sig-paren">(</span><em>code_str</em>, <em>times=1</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_peaks.measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return elapsed time for executing code in the namespace of the caller.</p>
<p>The supplied code string is compiled with the Python builtin <code class="docutils literal"><span class="pre">compile</span></code>.
The precision of the timing is 10 milli-seconds. If the code will execute
fast on this timescale, it can be executed many times to get reasonable
timing accuracy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>code_str</strong> : str</p>
<blockquote>
<div><p>The code to be timed.</p>
</div></blockquote>
<p><strong>times</strong> : int, optional</p>
<blockquote>
<div><p>The number of times the code is executed. Default is 1. The code is
only compiled once.</p>
</div></blockquote>
<p><strong>label</strong> : str, optional</p>
<blockquote>
<div><p>A label to identify <cite>code_str</cite> with. This is passed into <code class="docutils literal"><span class="pre">compile</span></code>
as the second argument (for run-time error messages).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>elapsed</strong> : float</p>
<blockquote class="last">
<div><p>Total elapsed time in seconds for executing <cite>code_str</cite> <cite>times</cite> times.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">etime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="s1">&#39;for i in range(1000): np.sqrt(i**2)&#39;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">times</span><span class="o">=</span><span class="n">times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s2">&quot;Time for a single execution : &quot;</span><span class="p">,</span> <span class="n">etime</span> <span class="o">/</span> <span class="n">times</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span>
<span class="go">Time for a single execution :  0.005 s</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="unique-edges">
<h3>unique_edges<a class="headerlink" href="#unique-edges" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_peaks.unique_edges">
<code class="descclassname">dipy.reconst.benchmarks.bench_peaks.</code><code class="descname">unique_edges</code><span class="sig-paren">(</span><em>faces</em>, <em>return_mapping=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_peaks.unique_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract all unique edges from given triangular faces.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>faces</strong> : (N, 3) ndarray</p>
<blockquote>
<div><p>Vertex indices forming triangular faces.</p>
</div></blockquote>
<p><strong>return_mapping</strong> : bool</p>
<blockquote>
<div><p>If true, a mapping to the edges of each face is returned.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>edges</strong> : (N, 2) ndarray</p>
<blockquote>
<div><p>Unique edges.</p>
</div></blockquote>
<p><strong>mapping</strong> : (N, 3)</p>
<blockquote class="last">
<div><p>For each face, [x, y, z], a mapping to it&#8217;s edges [a, b, c].</p>
<div class="highlight-python"><div class="highlight"><pre>   y
   /               /               a/    
/                  /                   /__________          x      c     z
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="bench-quick-squash">
<h3>bench_quick_squash<a class="headerlink" href="#bench-quick-squash" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_squash.bench_quick_squash">
<code class="descclassname">dipy.reconst.benchmarks.bench_squash.</code><code class="descname">bench_quick_squash</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_squash.bench_quick_squash" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id8">
<h3>measure<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_squash.measure">
<code class="descclassname">dipy.reconst.benchmarks.bench_squash.</code><code class="descname">measure</code><span class="sig-paren">(</span><em>code_str</em>, <em>times=1</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_squash.measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return elapsed time for executing code in the namespace of the caller.</p>
<p>The supplied code string is compiled with the Python builtin <code class="docutils literal"><span class="pre">compile</span></code>.
The precision of the timing is 10 milli-seconds. If the code will execute
fast on this timescale, it can be executed many times to get reasonable
timing accuracy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>code_str</strong> : str</p>
<blockquote>
<div><p>The code to be timed.</p>
</div></blockquote>
<p><strong>times</strong> : int, optional</p>
<blockquote>
<div><p>The number of times the code is executed. Default is 1. The code is
only compiled once.</p>
</div></blockquote>
<p><strong>label</strong> : str, optional</p>
<blockquote>
<div><p>A label to identify <cite>code_str</cite> with. This is passed into <code class="docutils literal"><span class="pre">compile</span></code>
as the second argument (for run-time error messages).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>elapsed</strong> : float</p>
<blockquote class="last">
<div><p>Total elapsed time in seconds for executing <cite>code_str</cite> <cite>times</cite> times.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">etime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="s1">&#39;for i in range(1000): np.sqrt(i**2)&#39;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">times</span><span class="o">=</span><span class="n">times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s2">&quot;Time for a single execution : &quot;</span><span class="p">,</span> <span class="n">etime</span> <span class="o">/</span> <span class="n">times</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span>
<span class="go">Time for a single execution :  0.005 s</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="ndindex">
<h3>ndindex<a class="headerlink" href="#ndindex" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_squash.ndindex">
<code class="descclassname">dipy.reconst.benchmarks.bench_squash.</code><code class="descname">ndindex</code><span class="sig-paren">(</span><em>shape</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_squash.ndindex" title="Permalink to this definition">¶</a></dt>
<dd><p>An N-dimensional iterator object to index arrays.</p>
<p>Given the shape of an array, an <cite>ndindex</cite> instance iterates over
the N-dimensional index of the array. At each iteration a tuple
of indices is returned; the last dimension is iterated over first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple of ints</p>
<blockquote class="last">
<div><p>The dimensions of the array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.ndindex</span> <span class="kn">import</span> <span class="n">ndindex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">ndindex</span><span class="p">(</span><span class="n">shape</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">index</span>
<span class="go">(0, 0, 0)</span>
<span class="go">(0, 1, 0)</span>
<span class="go">(1, 0, 0)</span>
<span class="go">(1, 1, 0)</span>
<span class="go">(2, 0, 0)</span>
<span class="go">(2, 1, 0)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="old-squash">
<h3>old_squash<a class="headerlink" href="#old-squash" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_squash.old_squash">
<code class="descclassname">dipy.reconst.benchmarks.bench_squash.</code><code class="descname">old_squash</code><span class="sig-paren">(</span><em>arr</em>, <em>mask=None</em>, <em>fill=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_squash.old_squash" title="Permalink to this definition">¶</a></dt>
<dd><p>Try and make a standard array from an object array</p>
<p>This function takes an object array and attempts to convert it to a more
useful dtype. If array can be converted to a better dtype, Nones are
replaced by <cite>fill</cite>. To make the behaviour of this function more clear, here
are the most common cases:</p>
<ol class="arabic simple">
<li><cite>arr</cite> is an array of scalars of type <cite>T</cite>. Returns an array like
<cite>arr.astype(T)</cite></li>
<li><cite>arr</cite> is an array of arrays. All items in <cite>arr</cite> have the same shape
<cite>S</cite>. Returns an array with shape <cite>arr.shape + S</cite>.</li>
<li><cite>arr</cite> is an array of arrays of different shapes. Returns <cite>arr</cite>.</li>
<li>Items in <cite>arr</cite> are not ndarrys or scalars. Returns <cite>arr</cite>.</li>
</ol>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>arr</strong> : array, dtype=object</p>
<blockquote>
<div><p>The array to be converted.</p>
</div></blockquote>
<p><strong>mask</strong> : array, dtype=bool, optional</p>
<blockquote>
<div><p>Where arr has Nones.</p>
</div></blockquote>
<p><strong>fill</strong> : number, optional</p>
<blockquote>
<div><p>Nones are replaced by fill.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>result</strong> : array</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_squash</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="go">array([2, 2, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old_squash</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="go">array([0, 2, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">old_squash</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;float64&#39;)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="quick-squash">
<h3>quick_squash<a class="headerlink" href="#quick-squash" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_squash.quick_squash">
<code class="descclassname">dipy.reconst.benchmarks.bench_squash.</code><code class="descname">quick_squash</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_squash.quick_squash" title="Permalink to this definition">¶</a></dt>
<dd><p>Try and make a standard array from an object array</p>
<p>This function takes an object array and attempts to convert it to a more
useful dtype. If array can be converted to a better dtype, Nones are
replaced by <cite>fill</cite>. To make the behaviour of this function more clear, here
are the most common cases:</p>
<ol class="arabic simple">
<li><cite>obj_arr</cite> is an array of scalars of type <cite>T</cite>. Returns an array like
<cite>obj_arr.astype(T)</cite></li>
<li><cite>obj_arr</cite> is an array of arrays. All items in <cite>obj_arr</cite> have the same
shape <code class="docutils literal"><span class="pre">S</span></code>. Returns an array with shape <code class="docutils literal"><span class="pre">obj_arr.shape</span> <span class="pre">+</span> <span class="pre">S</span></code></li>
<li><cite>obj_arr</cite> is an array of arrays of different shapes. Returns <cite>obj_arr</cite>.</li>
<li>Items in <cite>obj_arr</cite> are not ndarrays or scalars. Returns <cite>obj_arr</cite>.</li>
</ol>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>obj_arr</strong> : array, dtype=object</p>
<blockquote>
<div><p>The array to be converted.</p>
</div></blockquote>
<p><strong>mask</strong> : array, dtype=bool, optional</p>
<blockquote>
<div><p>mask is nonzero where <cite>obj_arr</cite> has Nones.</p>
</div></blockquote>
<p><strong>fill</strong> : number, optional</p>
<blockquote>
<div><p>Nones are replaced by <cite>fill</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>result</strong> : array</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quick_squash</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="go">array([2, 2, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quick_squash</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="go">array([0, 2, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">quick_squash</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(3, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;float64&#39;)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="reduce">
<h3>reduce<a class="headerlink" href="#reduce" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="bench-vec-val-vect">
<h3>bench_vec_val_vect<a class="headerlink" href="#bench-vec-val-vect" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_vec_val_sum.bench_vec_val_vect">
<code class="descclassname">dipy.reconst.benchmarks.bench_vec_val_sum.</code><code class="descname">bench_vec_val_vect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_vec_val_sum.bench_vec_val_vect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="id9">
<h3>measure<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_vec_val_sum.measure">
<code class="descclassname">dipy.reconst.benchmarks.bench_vec_val_sum.</code><code class="descname">measure</code><span class="sig-paren">(</span><em>code_str</em>, <em>times=1</em>, <em>label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_vec_val_sum.measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return elapsed time for executing code in the namespace of the caller.</p>
<p>The supplied code string is compiled with the Python builtin <code class="docutils literal"><span class="pre">compile</span></code>.
The precision of the timing is 10 milli-seconds. If the code will execute
fast on this timescale, it can be executed many times to get reasonable
timing accuracy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>code_str</strong> : str</p>
<blockquote>
<div><p>The code to be timed.</p>
</div></blockquote>
<p><strong>times</strong> : int, optional</p>
<blockquote>
<div><p>The number of times the code is executed. Default is 1. The code is
only compiled once.</p>
</div></blockquote>
<p><strong>label</strong> : str, optional</p>
<blockquote>
<div><p>A label to identify <cite>code_str</cite> with. This is passed into <code class="docutils literal"><span class="pre">compile</span></code>
as the second argument (for run-time error messages).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>elapsed</strong> : float</p>
<blockquote class="last">
<div><p>Total elapsed time in seconds for executing <cite>code_str</cite> <cite>times</cite> times.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">etime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="s1">&#39;for i in range(1000): np.sqrt(i**2)&#39;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">times</span><span class="o">=</span><span class="n">times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s2">&quot;Time for a single execution : &quot;</span><span class="p">,</span> <span class="n">etime</span> <span class="o">/</span> <span class="n">times</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span>
<span class="go">Time for a single execution :  0.005 s</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="randn">
<h3>randn<a class="headerlink" href="#randn" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_vec_val_sum.randn">
<code class="descclassname">dipy.reconst.benchmarks.bench_vec_val_sum.</code><code class="descname">randn</code><span class="sig-paren">(</span><em>d0</em>, <em>d1</em>, <em>...</em>, <em>dn</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_vec_val_sum.randn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a sample (or samples) from the &#8220;standard normal&#8221; distribution.</p>
<p>If positive, int_like or int-convertible arguments are provided,
<cite>randn</cite> generates an array of shape <code class="docutils literal"><span class="pre">(d0,</span> <span class="pre">d1,</span> <span class="pre">...,</span> <span class="pre">dn)</span></code>, filled
with random floats sampled from a univariate &#8220;normal&#8221; (Gaussian)
distribution of mean 0 and variance 1 (if any of the <img class="math" src="../_images/math/2103b4c0c596f5f943d001a8b55a44c2d73fd1c0.png" alt="d_i"/> are
floats, they are first converted to integers by truncation). A single
float randomly sampled from the distribution is returned if no
argument is provided.</p>
<p>This is a convenience function.  If you want an interface that takes a
tuple as the first argument, use <cite>numpy.random.standard_normal</cite> instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>d0, d1, ..., dn</strong> : int, optional</p>
<blockquote>
<div><p>The dimensions of the returned array, should be all positive.
If no argument is given a single Python float is returned.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>Z</strong> : ndarray or float</p>
<blockquote class="last">
<div><p>A <code class="docutils literal"><span class="pre">(d0,</span> <span class="pre">d1,</span> <span class="pre">...,</span> <span class="pre">dn)</span></code>-shaped array of floating-point samples from
the standard normal distribution, or a single such float if
no parameters were supplied.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">random.standard_normal</span></code></dt>
<dd>Similar, but takes a tuple as its argument.</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>For random samples from <img class="math" src="../_images/math/d106a03e8b6cf8500c1da6536a9f8eb834258617.png" alt="N(\mu, \sigma^2)"/>, use:</p>
<p><code class="docutils literal"><span class="pre">sigma</span> <span class="pre">*</span> <span class="pre">np.random.randn(...)</span> <span class="pre">+</span> <span class="pre">mu</span></code></p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">()</span>
<span class="go">2.1923875335537315 #random</span>
</pre></div>
</div>
<p>Two-by-four array of samples from N(3, 6.25):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="mf">2.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="mi">3</span>
<span class="go">array([[-4.49401501,  4.00950034, -1.81814867,  7.29718677],  #random</span>
<span class="go">       [ 0.39924804,  4.68456316,  4.99394529,  4.84057254]]) #random</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="vec-val-vect">
<h3>vec_val_vect<a class="headerlink" href="#vec-val-vect" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_vec_val_sum.vec_val_vect">
<code class="descclassname">dipy.reconst.benchmarks.bench_vec_val_sum.</code><code class="descname">vec_val_vect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_vec_val_sum.vec_val_vect" title="Permalink to this definition">¶</a></dt>
<dd><p>Vectorize <cite>vecs</cite>.diag(<cite>vals</cite>).`vecs`.T for last 2 dimensions of <cite>vecs</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>vecs</strong> : shape (..., M, N) array</p>
<blockquote>
<div><p>containing tensor in last two dimensions; M, N usually equal to (3, 3)</p>
</div></blockquote>
<p><strong>vals</strong> : shape (..., N) array</p>
<blockquote>
<div><p>diagonal values carried in last dimension, <code class="docutils literal"><span class="pre">...</span></code> shape above must
match that for <cite>vecs</cite></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>res</strong> : shape (..., M, M) array</p>
<blockquote>
<div><p>For all the dimensions ellided by <code class="docutils literal"><span class="pre">...</span></code>, loops to get (M, N) <code class="docutils literal"><span class="pre">vec</span></code>
matrix, and (N,) <code class="docutils literal"><span class="pre">vals</span></code> vector, and calculates
<code class="docutils literal"><span class="pre">vec.dot(np.diag(val).dot(vec.T)</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong> : non-matching <code class="docutils literal"><span class="pre">...</span></code> dimensions of <cite>vecs</cite>, <cite>vals</cite></p>
<p class="last"><strong>ValueError</strong> : non-matching <code class="docutils literal"><span class="pre">N</span></code> dimensions of <cite>vecs</cite>, <cite>vals</cite></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Make a 3D array where the first dimension is only 1</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec_val_vect</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
<span class="go">array([[[   9.,   24.,   39.],</span>
<span class="go">        [  24.,   66.,  108.],</span>
<span class="go">        [  39.,  108.,  177.]]])</span>
</pre></div>
</div>
<p>That&#8217;s the same as the 2D case (apart from the float casting):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">vals</span><span class="p">),</span> <span class="n">vecs</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
<span class="go">array([[  9,  24,  39],</span>
<span class="go">       [ 24,  66, 108],</span>
<span class="go">       [ 39, 108, 177]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="with-einsum">
<h3>with_einsum<a class="headerlink" href="#with-einsum" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.benchmarks.bench_vec_val_sum.with_einsum">
<code class="descclassname">dipy.reconst.benchmarks.bench_vec_val_sum.</code><code class="descname">with_einsum</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.benchmarks.bench_vec_val_sum.with_einsum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="cache">
<h3><a class="reference internal" href="#dipy.reconst.cache.Cache" title="dipy.reconst.cache.Cache"><code class="xref py py-class docutils literal"><span class="pre">Cache</span></code></a><a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.cache.Cache">
<em class="property">class </em><code class="descclassname">dipy.reconst.cache.</code><code class="descname">Cache</code><a class="headerlink" href="#dipy.reconst.cache.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Cache values based on a key object (such as a sphere or gradient table).</p>
<p class="rubric">Notes</p>
<p>This class is meant to be used as a mix-in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">Cache</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelFit</span><span class="p">(</span><span class="n">Fit</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Inside a method on the fit, typical usage would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">odf</span><span class="p">(</span><span class="n">sphere</span><span class="p">):</span>
    <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">M</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_basis_matrix</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.cache.Cache.cache_clear" title="dipy.reconst.cache.Cache.cache_clear"><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code></a>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.cache.Cache.cache_get" title="dipy.reconst.cache.Cache.cache_get"><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code></a>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.cache.Cache.cache_set" title="dipy.reconst.cache.Cache.cache_set"><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code></a>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.cache.Cache.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.cache.Cache.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.cache.Cache.cache_clear">
<code class="descname">cache_clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.cache.Cache.cache_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.cache.Cache.cache_get">
<code class="descname">cache_get</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.cache.Cache.cache_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>default</strong> : object</p>
<blockquote>
<div><p>Value to be returned if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>v</strong> : object</p>
<blockquote class="last">
<div><p>Value from the cache associated with <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.  Returns
<cite>default</cite> if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.cache.Cache.cache_set">
<code class="descname">cache_set</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.cache.Cache.cache_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a value in the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>value</strong> : object</p>
<blockquote class="last">
<div><p>Value stored in the cache for each unique combination
of <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Imagine the following computation is very expensive</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">X1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="ow">is</span> <span class="n">X2</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="auto-attr">
<h3>auto_attr<a class="headerlink" href="#auto-attr" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.cache.auto_attr">
<code class="descclassname">dipy.reconst.cache.</code><code class="descname">auto_attr</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.cache.auto_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to create OneTimeProperty attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>func</strong> : method</p>
<blockquote class="last">
<div><p>The method that will be called the first time to compute a value.
Afterwards, the method&#8217;s name will be a standard attribute holding the
value of this computation.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MagicProp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@auto_attr</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="mi">99</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">MagicProp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">a</span>
<span class="go">99</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="range">
<h3><a class="reference internal" href="#dipy.reconst.cross_validation.range" title="dipy.reconst.cross_validation.range"><code class="xref py py-class docutils literal"><span class="pre">range</span></code></a><a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.reconst.cross_validation.range">
<code class="descclassname">dipy.reconst.cross_validation.</code><code class="descname">range</code><a class="headerlink" href="#dipy.reconst.cross_validation.range" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">xrange</span></code></p>
</dd></dl>

</div>
<div class="section" id="coeff-of-determination">
<h3>coeff_of_determination<a class="headerlink" href="#coeff-of-determination" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.cross_validation.coeff_of_determination">
<code class="descclassname">dipy.reconst.cross_validation.</code><code class="descname">coeff_of_determination</code><span class="sig-paren">(</span><em>data</em>, <em>model</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.cross_validation.coeff_of_determination" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Calculate the coefficient of determination for a model prediction, relative
to data.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : ndarray</p>
<blockquote>
<div><blockquote>
<div><p>The data</p>
</div></blockquote>
<dl class="docutils">
<dt>model <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">The predictions of a model for this data. Same shape as the data.</p>
</dd>
<dt>axis: int, optional</dt>
<dd><p class="first last">The axis along which different samples are laid out (default: -1).</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>COD</strong> : ndarray</p>
<blockquote class="last">
<div><p>The coefficient of determination. This has shape <cite>data.shape[:-1]</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>rac{SSE}{SSD})</p>
<blockquote>
<div>where SSE is the sum of the squared error between the model and the data
(sum of the squared residuals) and SSD is the sum of the squares of the
deviations of the data from the mean of the data (variance * N).</div></blockquote>
</dd></dl>

</div>
<div class="section" id="kfold-xval">
<h3>kfold_xval<a class="headerlink" href="#kfold-xval" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.cross_validation.kfold_xval">
<code class="descclassname">dipy.reconst.cross_validation.</code><code class="descname">kfold_xval</code><span class="sig-paren">(</span><em>model</em>, <em>data</em>, <em>folds</em>, <em>*model_args</em>, <em>**model_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.cross_validation.kfold_xval" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform k-fold cross-validation to generate out-of-sample predictions for
each measurement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : Model class instance</p>
<blockquote>
<div><p>The type of the model to use for prediction. The corresponding Fit
object must have a <cite>predict</cite> function implementd One of the following:
<cite>reconst.dti.TensorModel</cite> or
<cite>reconst.csdeconv.ConstrainedSphericalDeconvModel</cite>.</p>
</div></blockquote>
<p><strong>data</strong> : ndarray</p>
<blockquote>
<div><p>Diffusion MRI data acquired with the GradientTable of the model. Shape
will typically be <cite>(x, y, z, b)</cite> where <cite>xyz</cite> are spatial dimensions and
b is the number of bvals/bvecs in the GradientTable.</p>
</div></blockquote>
<p><strong>folds</strong> : int</p>
<blockquote>
<div><p>The number of divisions to apply to the data</p>
</div></blockquote>
<p><strong>model_args</strong> : list</p>
<blockquote>
<div><p>Additional arguments to the model initialization</p>
</div></blockquote>
<p><strong>model_kwargs</strong> : dict</p>
<blockquote class="last">
<div><p>Additional key-word arguments to the model initialization. If contains
the kwarg <cite>mask</cite>, this will be used as a key-word argument to the <cite>fit</cite>
method of the model object, rather than being used in the
initialization of the model object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This function assumes that a prediction API is implemented in the Model
class for which prediction is conducted. That is, the Fit object that gets
generated upon fitting the model needs to have a <cite>predict</cite> method, which
receives a GradientTable class instance as input and produces a predicted
signal as output.</p>
<p>It also assumes that the model object has <cite>bval</cite> and <cite>bvec</cite> attributes
holding b-values and corresponding unit vectors.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r42" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[R42]</a></td><td>Rokem, A., Chan, K.L. Yeatman, J.D., Pestilli, F., Mezer, A.,
Wandell, B.A., 2014. Evaluating the accuracy of diffusion models at
multiple b-values with cross-validation. ISMRM 2014.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="axsymshresponse">
<h3><code class="xref py py-class docutils literal"><span class="pre">AxSymShResponse</span></code><a class="headerlink" href="#axsymshresponse" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="constrainedsdtmodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">ConstrainedSDTModel</span></code><a class="headerlink" href="#constrainedsdtmodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id11">
<h3><code class="xref py py-class docutils literal"><span class="pre">ConstrainedSphericalDeconvModel</span></code><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sphharmfit">
<h3><code class="xref py py-class docutils literal"><span class="pre">SphHarmFit</span></code><a class="headerlink" href="#sphharmfit" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sphharmmodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">SphHarmModel</span></code><a class="headerlink" href="#sphharmmodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="tensormodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">TensorModel</span></code><a class="headerlink" href="#tensormodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id12">
<h3><code class="xref py py-class docutils literal"><span class="pre">range</span></code><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="auto-response">
<h3>auto_response<a class="headerlink" href="#auto-response" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="cart2sphere">
<h3>cart2sphere<a class="headerlink" href="#cart2sphere" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="csdeconv">
<h3>csdeconv<a class="headerlink" href="#csdeconv" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="estimate-response">
<h3>estimate_response<a class="headerlink" href="#estimate-response" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="fa-trace-to-lambdas">
<h3>fa_trace_to_lambdas<a class="headerlink" href="#fa-trace-to-lambdas" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="forward-sdeconv-mat">
<h3>forward_sdeconv_mat<a class="headerlink" href="#forward-sdeconv-mat" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="forward-sdt-deconv-mat">
<h3>forward_sdt_deconv_mat<a class="headerlink" href="#forward-sdt-deconv-mat" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="fractional-anisotropy">
<h3>fractional_anisotropy<a class="headerlink" href="#fractional-anisotropy" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id13">
<h3>get_sphere<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="lazy-index">
<h3>lazy_index<a class="headerlink" href="#lazy-index" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="lpn">
<h3>lpn<a class="headerlink" href="#lpn" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="multi-voxel-fit">
<h3>multi_voxel_fit<a class="headerlink" href="#multi-voxel-fit" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id14">
<h3>ndindex<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="odf-deconv">
<h3>odf_deconv<a class="headerlink" href="#odf-deconv" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="odf-sh-to-sharp">
<h3>odf_sh_to_sharp<a class="headerlink" href="#odf-sh-to-sharp" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="peaks-from-model">
<h3>peaks_from_model<a class="headerlink" href="#peaks-from-model" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="quad">
<h3>quad<a class="headerlink" href="#quad" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="real-sph-harm">
<h3>real_sph_harm<a class="headerlink" href="#real-sph-harm" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="real-sym-sh-basis">
<h3>real_sym_sh_basis<a class="headerlink" href="#real-sym-sh-basis" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="recursive-response">
<h3>recursive_response<a class="headerlink" href="#recursive-response" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="response-from-mask">
<h3>response_from_mask<a class="headerlink" href="#response-from-mask" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sh-to-rh">
<h3>sh_to_rh<a class="headerlink" href="#sh-to-rh" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="single-tensor">
<h3>single_tensor<a class="headerlink" href="#single-tensor" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sph-harm-ind-list">
<h3>sph_harm_ind_list<a class="headerlink" href="#sph-harm-ind-list" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="vec2vec-rotmat">
<h3>vec2vec_rotmat<a class="headerlink" href="#vec2vec-rotmat" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="diffusionkurtosisfit">
<h3><code class="xref py py-class docutils literal"><span class="pre">DiffusionKurtosisFit</span></code><a class="headerlink" href="#diffusionkurtosisfit" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="diffusionkurtosismodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">DiffusionKurtosisModel</span></code><a class="headerlink" href="#diffusionkurtosismodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id15">
<h3><code class="xref py py-class docutils literal"><span class="pre">ReconstModel</span></code><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="tensorfit">
<h3><code class="xref py py-class docutils literal"><span class="pre">TensorFit</span></code><a class="headerlink" href="#tensorfit" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id16">
<h3><code class="xref py py-class docutils literal"><span class="pre">range</span></code><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="wcons">
<h3>Wcons<a class="headerlink" href="#wcons" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="wrotate">
<h3>Wrotate<a class="headerlink" href="#wrotate" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="wrotate-element">
<h3>Wrotate_element<a class="headerlink" href="#wrotate-element" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="apparent-kurtosis-coef">
<h3>apparent_kurtosis_coef<a class="headerlink" href="#apparent-kurtosis-coef" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id17">
<h3>auto_attr<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="axial-diffusivity">
<h3>axial_diffusivity<a class="headerlink" href="#axial-diffusivity" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="axial-kurtosis">
<h3>axial_kurtosis<a class="headerlink" href="#axial-kurtosis" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="carlson-rd">
<h3>carlson_rd<a class="headerlink" href="#carlson-rd" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="carlson-rf">
<h3>carlson_rf<a class="headerlink" href="#carlson-rf" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="decompose-tensor">
<h3>decompose_tensor<a class="headerlink" href="#decompose-tensor" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="design-matrix">
<h3>design_matrix<a class="headerlink" href="#design-matrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="dki-prediction">
<h3>dki_prediction<a class="headerlink" href="#dki-prediction" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="from-lower-triangular">
<h3>from_lower_triangular<a class="headerlink" href="#from-lower-triangular" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="lower-triangular">
<h3>lower_triangular<a class="headerlink" href="#lower-triangular" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mean-diffusivity">
<h3>mean_diffusivity<a class="headerlink" href="#mean-diffusivity" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mean-kurtosis">
<h3>mean_kurtosis<a class="headerlink" href="#mean-kurtosis" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id18">
<h3>ndindex<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="ols-fit-dki">
<h3>ols_fit_dki<a class="headerlink" href="#ols-fit-dki" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="radial-diffusivity">
<h3>radial_diffusivity<a class="headerlink" href="#radial-diffusivity" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="radial-kurtosis">
<h3>radial_kurtosis<a class="headerlink" href="#radial-kurtosis" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="split-dki-param">
<h3>split_dki_param<a class="headerlink" href="#split-dki-param" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="wls-fit-dki">
<h3>wls_fit_dki<a class="headerlink" href="#wls-fit-dki" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id19">
<h3><a class="reference internal" href="#dipy.reconst.dsi.Cache" title="dipy.reconst.dsi.Cache"><code class="xref py py-class docutils literal"><span class="pre">Cache</span></code></a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.dsi.Cache">
<em class="property">class </em><code class="descclassname">dipy.reconst.dsi.</code><code class="descname">Cache</code><a class="headerlink" href="#dipy.reconst.dsi.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Cache values based on a key object (such as a sphere or gradient table).</p>
<p class="rubric">Notes</p>
<p>This class is meant to be used as a mix-in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">Cache</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelFit</span><span class="p">(</span><span class="n">Fit</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Inside a method on the fit, typical usage would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">odf</span><span class="p">(</span><span class="n">sphere</span><span class="p">):</span>
    <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">M</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_basis_matrix</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.Cache.cache_clear" title="dipy.reconst.dsi.Cache.cache_clear"><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code></a>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.Cache.cache_get" title="dipy.reconst.dsi.Cache.cache_get"><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code></a>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.Cache.cache_set" title="dipy.reconst.dsi.Cache.cache_set"><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code></a>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.dsi.Cache.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.Cache.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.Cache.cache_clear">
<code class="descname">cache_clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.Cache.cache_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.Cache.cache_get">
<code class="descname">cache_get</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.Cache.cache_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>default</strong> : object</p>
<blockquote>
<div><p>Value to be returned if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>v</strong> : object</p>
<blockquote class="last">
<div><p>Value from the cache associated with <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.  Returns
<cite>default</cite> if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.Cache.cache_set">
<code class="descname">cache_set</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.Cache.cache_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a value in the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>value</strong> : object</p>
<blockquote class="last">
<div><p>Value stored in the cache for each unique combination
of <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Imagine the following computation is very expensive</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">X1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="ow">is</span> <span class="n">X2</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="diffusionspectrumdeconvfit">
<h3><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvFit" title="dipy.reconst.dsi.DiffusionSpectrumDeconvFit"><code class="xref py py-class docutils literal"><span class="pre">DiffusionSpectrumDeconvFit</span></code></a><a class="headerlink" href="#diffusionspectrumdeconvfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.dsi.DiffusionSpectrumDeconvFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.dsi.</code><code class="descname">DiffusionSpectrumDeconvFit</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumFit" title="dipy.reconst.dsi.DiffusionSpectrumFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.dsi.DiffusionSpectrumFit</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code>(sphere)</td>
<td>Calculates the real discrete odf for a given discrete sphere</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvFit.pdf" title="dipy.reconst.dsi.DiffusionSpectrumDeconvFit.pdf"><code class="xref py py-obj docutils literal"><span class="pre">pdf</span></code></a>()</td>
<td>Applies the 3D FFT in the q-space grid to generate</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.dsi.DiffusionSpectrumDeconvFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates PDF and ODF and other properties for a single voxel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : object,</p>
<blockquote>
<div><p>DiffusionSpectrumModel</p>
</div></blockquote>
<p><strong>data</strong> : 1d ndarray,</p>
<blockquote class="last">
<div><p>signal values</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.DiffusionSpectrumDeconvFit.pdf">
<code class="descname">pdf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvFit.pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the 3D FFT in the q-space grid to generate
the DSI diffusion propagator, remove the background noise with a
hard threshold and then deconvolve the propagator with the 
Lucy-Richardson deconvolution algorithm</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="diffusionspectrumdeconvmodel">
<h3><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvModel" title="dipy.reconst.dsi.DiffusionSpectrumDeconvModel"><code class="xref py py-class docutils literal"><span class="pre">DiffusionSpectrumDeconvModel</span></code></a><a class="headerlink" href="#diffusionspectrumdeconvmodel" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.reconst.dsi.DiffusionSpectrumDeconvModel">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">DiffusionSpectrumDeconvModel</code><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumDeconvModel" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">MultiVoxelModel</span></code></p>
</dd></dl>

</div>
<div class="section" id="diffusionspectrumfit">
<h3><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumFit" title="dipy.reconst.dsi.DiffusionSpectrumFit"><code class="xref py py-class docutils literal"><span class="pre">DiffusionSpectrumFit</span></code></a><a class="headerlink" href="#diffusionspectrumfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.dsi.DiffusionSpectrumFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.dsi.</code><code class="descname">DiffusionSpectrumFit</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.odf.OdfFit" title="dipy.reconst.odf.OdfFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.odf.OdfFit</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumFit.odf" title="dipy.reconst.dsi.DiffusionSpectrumFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>Calculates the real discrete odf for a given discrete sphere</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumFit.pdf" title="dipy.reconst.dsi.DiffusionSpectrumFit.pdf"><code class="xref py py-obj docutils literal"><span class="pre">pdf</span></code></a>()</td>
<td>Applies the 3D FFT in the q-space grid to generate</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.dsi.DiffusionSpectrumFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates PDF and ODF and other properties for a single voxel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : object,</p>
<blockquote>
<div><p>DiffusionSpectrumModel</p>
</div></blockquote>
<p><strong>data</strong> : 1d ndarray,</p>
<blockquote class="last">
<div><p>signal values</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.DiffusionSpectrumFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the real discrete odf for a given discrete sphere</p>
<dl class="docutils">
<dt>..math::</dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">nowrap:</th><td class="field-body"><dl class="first docutils">
<dt>begin{equation}</dt>
<dd><p class="first last">psi_{DSI}(hat{mathbf{u}})=int_{0}^{infty}P(rhat{mathbf{u}})r^{2}dr</p>
</dd>
</dl>
<p class="last">end{equation}</p>
</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>where <img class="math" src="../_images/math/c4e53f184201bb7feb53161242bdba8fbf9a1454.png" alt="\hat{\mathbf{u}}"/> is the unit vector which corresponds to a
sphere point.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.DiffusionSpectrumFit.pdf">
<code class="descname">pdf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumFit.pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the 3D FFT in the q-space grid to generate
the diffusion propagator</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="diffusionspectrummodel">
<h3><a class="reference internal" href="#dipy.reconst.dsi.DiffusionSpectrumModel" title="dipy.reconst.dsi.DiffusionSpectrumModel"><code class="xref py py-class docutils literal"><span class="pre">DiffusionSpectrumModel</span></code></a><a class="headerlink" href="#diffusionspectrummodel" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.reconst.dsi.DiffusionSpectrumModel">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">DiffusionSpectrumModel</code><a class="headerlink" href="#dipy.reconst.dsi.DiffusionSpectrumModel" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">MultiVoxelModel</span></code></p>
</dd></dl>

</div>
<div class="section" id="odffit">
<h3><a class="reference internal" href="#dipy.reconst.dsi.OdfFit" title="dipy.reconst.dsi.OdfFit"><code class="xref py py-class docutils literal"><span class="pre">OdfFit</span></code></a><a class="headerlink" href="#odffit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.dsi.OdfFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.dsi.</code><code class="descname">OdfFit</code><a class="headerlink" href="#dipy.reconst.dsi.OdfFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.OdfFit.odf" title="dipy.reconst.dsi.OdfFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>To be implemented but specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.dsi.OdfFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.OdfFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.OdfFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.OdfFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented but specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="odfmodel">
<h3><a class="reference internal" href="#dipy.reconst.dsi.OdfModel" title="dipy.reconst.dsi.OdfModel"><code class="xref py py-class docutils literal"><span class="pre">OdfModel</span></code></a><a class="headerlink" href="#odfmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.dsi.OdfModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.dsi.</code><code class="descname">OdfModel</code><a class="headerlink" href="#dipy.reconst.dsi.OdfModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>An abstract class to be sub-classed by specific odf models</p>
<p>All odf models should provide a fit method which may take data as it&#8217;s
first and only argument.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dsi.OdfModel.fit" title="dipy.reconst.dsi.OdfModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data)</td>
<td>To be implemented by specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.dsi.OdfModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.OdfModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dsi.OdfModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.OdfModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented by specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="lr-deconv">
<h3>LR_deconv<a class="headerlink" href="#lr-deconv" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.LR_deconv">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">LR_deconv</code><span class="sig-paren">(</span><em>prop</em>, <em>psf</em>, <em>numit=5</em>, <em>acc_factor=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.LR_deconv" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform Lucy-Richardson deconvolution algorithm on a 3D array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>prop</strong> : 3-D ndarray of dtype float</p>
<blockquote>
<div><p>The 3D volume to be deconvolve</p>
</div></blockquote>
<p><strong>psf</strong> : 3-D ndarray of dtype float</p>
<blockquote>
<div><p>The filter that will be used for the deconvolution.</p>
</div></blockquote>
<p><strong>numit</strong> : int</p>
<blockquote>
<div><p>Number of Lucy-Richardson iteration to perform.</p>
</div></blockquote>
<p><strong>acc_factor</strong> : float</p>
<blockquote class="last">
<div><p>Exponential acceleration factor as in <a class="reference internal" href="#r43" id="id20">[R43]</a>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r43" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R43]</td><td><em>(<a class="fn-backref" href="#id20">1</a>, <a class="fn-backref" href="#id21">2</a>)</em> Biggs David S.C. et. al, &#8220;Acceleration of Iterative Image 
Restoration Algorithms&#8221;, Applied Optics, vol. 36, No. 8, p. 1766-1775,
1997.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="create-qspace">
<h3>create_qspace<a class="headerlink" href="#create-qspace" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.create_qspace">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">create_qspace</code><span class="sig-paren">(</span><em>gtab</em>, <em>origin</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.create_qspace" title="Permalink to this definition">¶</a></dt>
<dd><p>create the 3D grid which holds the signal values (q-space)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<p><strong>origin</strong> : (3,) ndarray</p>
<blockquote>
<div><p>center of the qspace</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>qgrid</strong> : ndarray</p>
<blockquote class="last">
<div><p>qspace coordinates</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="create-qtable">
<h3>create_qtable<a class="headerlink" href="#create-qtable" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.create_qtable">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">create_qtable</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.create_qtable" title="Permalink to this definition">¶</a></dt>
<dd><p>create a normalized version of gradients</p>
</dd></dl>

</div>
<div class="section" id="fftn">
<h3>fftn<a class="headerlink" href="#fftn" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.fftn">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">fftn</code><span class="sig-paren">(</span><em>x</em>, <em>shape=None</em>, <em>axes=None</em>, <em>overwrite_x=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.fftn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return multidimensional discrete Fourier transform.</p>
<p>The returned array contains:</p>
<div class="highlight-python"><div class="highlight"><pre>y[j_1,..,j_d] = sum[k_1=0..n_1-1, ..., k_d=0..n_d-1]
   x[k_1,..,k_d] * prod[i=1..d] exp(-sqrt(-1)*2*pi/n_i * j_i * k_i)
</pre></div>
</div>
<p>where d = len(x.shape) and n = x.shape.
Note that <code class="docutils literal"><span class="pre">y[...,</span> <span class="pre">-j_i,</span> <span class="pre">...]</span> <span class="pre">=</span> <span class="pre">y[...,</span> <span class="pre">n_i-j_i,</span> <span class="pre">...].conjugate()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>The (n-dimensional) array to transform.</p>
</div></blockquote>
<p><strong>shape</strong> : tuple of ints, optional</p>
<blockquote>
<div><p>The shape of the result.  If both <cite>shape</cite> and <cite>axes</cite> (see below) are
None, <cite>shape</cite> is <code class="docutils literal"><span class="pre">x.shape</span></code>; if <cite>shape</cite> is None but <cite>axes</cite> is
not None, then <cite>shape</cite> is <code class="docutils literal"><span class="pre">scipy.take(x.shape,</span> <span class="pre">axes,</span> <span class="pre">axis=0)</span></code>.
If <code class="docutils literal"><span class="pre">shape[i]</span> <span class="pre">&gt;</span> <span class="pre">x.shape[i]</span></code>, the i-th dimension is padded with zeros.
If <code class="docutils literal"><span class="pre">shape[i]</span> <span class="pre">&lt;</span> <span class="pre">x.shape[i]</span></code>, the i-th dimension is truncated to
length <code class="docutils literal"><span class="pre">shape[i]</span></code>.</p>
</div></blockquote>
<p><strong>axes</strong> : array_like of ints, optional</p>
<blockquote>
<div><p>The axes of <cite>x</cite> (<cite>y</cite> if <cite>shape</cite> is not None) along which the
transform is applied.</p>
</div></blockquote>
<p><strong>overwrite_x</strong> : bool, optional</p>
<blockquote>
<div><p>If True, the contents of <cite>x</cite> can be destroyed.  Default is False.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>y</strong> : complex-valued n-dimensional numpy array</p>
<blockquote class="last">
<div><p>The (n-dimensional) DFT of the input array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">ifftn</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.fftpack</span> <span class="kn">import</span> <span class="n">fftn</span><span class="p">,</span> <span class="n">ifftn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="mi">8</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">fftn</span><span class="p">(</span><span class="n">ifftn</span><span class="p">(</span><span class="n">y</span><span class="p">)))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="fftshift">
<h3>fftshift<a class="headerlink" href="#fftshift" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.fftshift">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">fftshift</code><span class="sig-paren">(</span><em>x</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.fftshift" title="Permalink to this definition">¶</a></dt>
<dd><p>Shift the zero-frequency component to the center of the spectrum.</p>
<p>This function swaps half-spaces for all axes listed (defaults to all).
Note that <code class="docutils literal"><span class="pre">y[0]</span></code> is the Nyquist component only if <code class="docutils literal"><span class="pre">len(x)</span></code> is even.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>Input array.</p>
</div></blockquote>
<p><strong>axes</strong> : int or shape tuple, optional</p>
<blockquote>
<div><p>Axes over which to shift.  Default is None, which shifts all axes.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>y</strong> : ndarray</p>
<blockquote class="last">
<div><p>The shifted array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#dipy.reconst.dsi.ifftshift" title="dipy.reconst.dsi.ifftshift"><code class="xref py py-obj docutils literal"><span class="pre">ifftshift</span></code></a></dt>
<dd>The inverse of <cite>fftshift</cite>.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftfreq</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span>
<span class="go">array([ 0.,  1.,  2.,  3.,  4., -5., -4., -3., -2., -1.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span>
<span class="go">array([-5., -4., -3., -2., -1.,  0.,  1.,  2.,  3.,  4.])</span>
</pre></div>
</div>
<p>Shift the zero-frequency component only along the second axis:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftfreq</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span>
<span class="go">array([[ 0.,  1.,  2.],</span>
<span class="go">       [ 3.,  4., -4.],</span>
<span class="go">       [-3., -2., -1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">freqs</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,))</span>
<span class="go">array([[ 2.,  0.,  1.],</span>
<span class="go">       [-4.,  3.,  4.],</span>
<span class="go">       [-1., -3., -2.]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="gen-psf">
<h3>gen_PSF<a class="headerlink" href="#gen-psf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.gen_PSF">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">gen_PSF</code><span class="sig-paren">(</span><em>qgrid_sampling</em>, <em>siz_x</em>, <em>siz_y</em>, <em>siz_z</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.gen_PSF" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a PSF for DSI Deconvolution by taking the ifft of the binary 
q-space sampling mask and truncating it to keep only the center.</p>
</dd></dl>

</div>
<div class="section" id="half-to-full-qspace">
<h3>half_to_full_qspace<a class="headerlink" href="#half-to-full-qspace" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.half_to_full_qspace">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">half_to_full_qspace</code><span class="sig-paren">(</span><em>data</em>, <em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.half_to_full_qspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Half to full Cartesian grid mapping</p>
<p>Useful when dMRI data are provided in one qspace hemisphere as
DiffusionSpectrum expects data to be in full qspace.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : array, shape (X, Y, Z, W)</p>
<blockquote>
<div><p>where (X, Y, Z) volume size and W number of gradient directions</p>
</div></blockquote>
<p><strong>gtab</strong> : GradientTable</p>
<blockquote>
<div><p>container for b-values and b-vectors (gradient directions)</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_data</strong> : array, shape (X, Y, Z, 2 * W -1)</p>
<p class="last"><strong>new_gtab</strong> : GradientTable</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>We assume here that only on b0 is provided with the initial data. If that
is not the case then you will need to write your own preparation function
before providing the gradients and the data to the DiffusionSpectrumModel
class.</p>
</dd></dl>

</div>
<div class="section" id="hanning-filter">
<h3>hanning_filter<a class="headerlink" href="#hanning-filter" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.hanning_filter">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">hanning_filter</code><span class="sig-paren">(</span><em>gtab</em>, <em>filter_width</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.hanning_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>create a hanning window</p>
<p>The signal is premultiplied by a Hanning window before
Fourier transform in order to ensure a smooth attenuation
of the signal at high q values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<p><strong>filter_width</strong> : int</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>filter</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>where N is the number of non-b0 gradient directions</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="ifftshift">
<h3>ifftshift<a class="headerlink" href="#ifftshift" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.ifftshift">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">ifftshift</code><span class="sig-paren">(</span><em>x</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.ifftshift" title="Permalink to this definition">¶</a></dt>
<dd><p>The inverse of <cite>fftshift</cite>. Although identical for even-length <cite>x</cite>, the
functions differ by one sample for odd-length <cite>x</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>Input array.</p>
</div></blockquote>
<p><strong>axes</strong> : int or shape tuple, optional</p>
<blockquote>
<div><p>Axes over which to calculate.  Defaults to None, which shifts all axes.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>y</strong> : ndarray</p>
<blockquote class="last">
<div><p>The shifted array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#dipy.reconst.dsi.fftshift" title="dipy.reconst.dsi.fftshift"><code class="xref py py-obj docutils literal"><span class="pre">fftshift</span></code></a></dt>
<dd>Shift zero-frequency component to the center of the spectrum.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftfreq</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span>
<span class="go">array([[ 0.,  1.,  2.],</span>
<span class="go">       [ 3.,  4., -4.],</span>
<span class="go">       [-3., -2., -1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">ifftshift</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">freqs</span><span class="p">))</span>
<span class="go">array([[ 0.,  1.,  2.],</span>
<span class="go">       [ 3.,  4., -4.],</span>
<span class="go">       [-3., -2., -1.]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="map-coordinates">
<h3>map_coordinates<a class="headerlink" href="#map-coordinates" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.map_coordinates">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">map_coordinates</code><span class="sig-paren">(</span><em>input</em>, <em>coordinates</em>, <em>output=None</em>, <em>order=3</em>, <em>mode='constant'</em>, <em>cval=0.0</em>, <em>prefilter=True</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.map_coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Map the input array to new coordinates by interpolation.</p>
<p>The array of coordinates is used to find, for each point in the output,
the corresponding coordinates in the input. The value of the input at
those coordinates is determined by spline interpolation of the
requested order.</p>
<p>The shape of the output is derived from that of the coordinate
array by dropping the first axis. The values of the array along
the first axis are the coordinates in the input array at which the
output value is found.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input</strong> : ndarray</p>
<blockquote>
<div><p>The input array.</p>
</div></blockquote>
<p><strong>coordinates</strong> : array_like</p>
<blockquote>
<div><p>The coordinates at which <cite>input</cite> is evaluated.</p>
</div></blockquote>
<p><strong>output</strong> : ndarray or dtype, optional</p>
<blockquote>
<div><p>The array in which to place the output, or the dtype of the returned
array.</p>
</div></blockquote>
<p><strong>order</strong> : int, optional</p>
<blockquote>
<div><p>The order of the spline interpolation, default is 3.
The order has to be in the range 0-5.</p>
</div></blockquote>
<p><strong>mode</strong> : str, optional</p>
<blockquote>
<div><p>Points outside the boundaries of the input are filled according
to the given mode (&#8216;constant&#8217;, &#8216;nearest&#8217;, &#8216;reflect&#8217; or &#8216;wrap&#8217;).
Default is &#8216;constant&#8217;.</p>
</div></blockquote>
<p><strong>cval</strong> : scalar, optional</p>
<blockquote>
<div><p>Value used for points outside the boundaries of the input if
<code class="docutils literal"><span class="pre">mode='constant'</span></code>. Default is 0.0</p>
</div></blockquote>
<p><strong>prefilter</strong> : bool, optional</p>
<blockquote>
<div><p>The parameter prefilter determines if the input is pre-filtered with
<cite>spline_filter</cite> before interpolation (necessary for spline
interpolation of order &gt; 1).  If False, it is assumed that the input is
already filtered. Default is True.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>map_coordinates</strong> : ndarray</p>
<blockquote class="last">
<div><p>The result of transforming the input. The shape of the output is
derived from that of <cite>coordinates</cite> by dropping the first axis.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">spline_filter</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">geometric_transform</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">scipy.interpolate</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">ndimage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">12.</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">array([[  0.,   1.,   2.],</span>
<span class="go">       [  3.,   4.,   5.],</span>
<span class="go">       [  6.,   7.,   8.],</span>
<span class="go">       [  9.,  10.,  11.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">[[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[ 2.  7.]</span>
</pre></div>
</div>
<p>Above, the interpolated value of a[0.5, 0.5] gives output[0], while
a[2, 1] is output[1].</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">inds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">inds</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cval</span><span class="o">=-</span><span class="mf">33.3</span><span class="p">)</span>
<span class="go">array([  2. , -33.3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">inds</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">)</span>
<span class="go">array([ 2.,  8.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ndimage</span><span class="o">.</span><span class="n">map_coordinates</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">inds</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">cval</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="go">array([ True, False], dtype=bool</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id22">
<h3>multi_voxel_fit<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="pdf-interp-coords">
<h3>pdf_interp_coords<a class="headerlink" href="#pdf-interp-coords" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.pdf_interp_coords">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">pdf_interp_coords</code><span class="sig-paren">(</span><em>sphere</em>, <em>rradius</em>, <em>origin</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.pdf_interp_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Precompute coordinates for ODF calculation from the PDF</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sphere</strong> : object,</p>
<blockquote>
<div><p>Sphere</p>
</div></blockquote>
<p><strong>rradius</strong> : array, shape (N,)</p>
<blockquote>
<div><p>line interpolation points</p>
</div></blockquote>
<p><strong>origin</strong> : array, shape (3,)</p>
<blockquote class="last">
<div><p>center of the grid</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pdf-odf">
<h3>pdf_odf<a class="headerlink" href="#pdf-odf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.pdf_odf">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">pdf_odf</code><span class="sig-paren">(</span><em>Pr</em>, <em>rradius</em>, <em>interp_coords</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.pdf_odf" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the real ODF from the diffusion propagator(PDF) Pr</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>Pr</strong> : array, shape (X, X, X)</p>
<blockquote>
<div><p>probability density function</p>
</div></blockquote>
<p><strong>rradius</strong> : array, shape (N,)</p>
<blockquote>
<div><p>interpolation range on the radius</p>
</div></blockquote>
<p><strong>interp_coords</strong> : array, shape (3, M, N)</p>
<blockquote class="last">
<div><p>coordinates in the pdf for interpolating the odf</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="project-hemisph-bvecs">
<h3>project_hemisph_bvecs<a class="headerlink" href="#project-hemisph-bvecs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.project_hemisph_bvecs">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">project_hemisph_bvecs</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.project_hemisph_bvecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Project any near identical bvecs to the other hemisphere</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : object,</p>
<blockquote class="last">
<div><p>GradientTable</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Useful only when working with some types of dsi data.</p>
</dd></dl>

</div>
<div class="section" id="threshold-propagator">
<h3>threshold_propagator<a class="headerlink" href="#threshold-propagator" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dsi.threshold_propagator">
<code class="descclassname">dipy.reconst.dsi.</code><code class="descname">threshold_propagator</code><span class="sig-paren">(</span><em>P</em>, <em>estimated_snr=15.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dsi.threshold_propagator" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies hard threshold on the propagator to remove background noise for the 
deconvolution.</p>
</dd></dl>

</div>
<div class="section" id="id23">
<h3><code class="xref py py-class docutils literal"><span class="pre">ReconstModel</span></code><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sphere">
<h3><code class="xref py py-class docutils literal"><span class="pre">Sphere</span></code><a class="headerlink" href="#sphere" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id24">
<h3><a class="reference internal" href="#dipy.reconst.dti.TensorFit" title="dipy.reconst.dti.TensorFit"><code class="xref py py-class docutils literal"><span class="pre">TensorFit</span></code></a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.dti.TensorFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.dti.</code><code class="descname">TensorFit</code><span class="sig-paren">(</span><em>model</em>, <em>model_params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit.ad" title="dipy.reconst.dti.TensorFit.ad"><code class="xref py py-obj docutils literal"><span class="pre">ad</span></code></a>()</td>
<td>Radial diffusitivity (RD) calculated from cached eigenvalues.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit.fa" title="dipy.reconst.dti.TensorFit.fa"><code class="xref py py-obj docutils literal"><span class="pre">fa</span></code></a>()</td>
<td>Fractional anisotropy (FA) calculated from cached eigenvalues.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit.lower_triangular" title="dipy.reconst.dti.TensorFit.lower_triangular"><code class="xref py py-obj docutils literal"><span class="pre">lower_triangular</span></code></a>([b0])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit.md" title="dipy.reconst.dti.TensorFit.md"><code class="xref py py-obj docutils literal"><span class="pre">md</span></code></a>()</td>
<td>Mean diffusitivity (MD) calculated from cached eigenvalues.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit.odf" title="dipy.reconst.dti.TensorFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit.rd" title="dipy.reconst.dti.TensorFit.rd"><code class="xref py py-obj docutils literal"><span class="pre">rd</span></code></a>()</td>
<td>Radial diffusitivity (RD) calculated from cached eigenvalues.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.dti.TensorFit.trace" title="dipy.reconst.dti.TensorFit.trace"><code class="xref py py-obj docutils literal"><span class="pre">trace</span></code></a>()</td>
<td>Trace of the tensor calculated from cached eigenvalues.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>model_params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a TensorFit class instance.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.ad">
<code class="descname">ad</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.ad" title="Permalink to this definition">¶</a></dt>
<dd><p>Radial diffusitivity (RD) calculated from cached eigenvalues.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ad</strong> : array (V, 1)</p>
<blockquote class="last">
<div><p>Calculated AD.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>RD is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/e702fe9f3509d1d63f1be55aa53d1bbe175594e1.png" alt="AD = \lambda_1"/></p>
</div></dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.dti.TensorFit.directions">
<code class="descname">directions</code><a class="headerlink" href="#dipy.reconst.dti.TensorFit.directions" title="Permalink to this definition">¶</a></dt>
<dd><p>For tracking - return the primary direction in each voxel</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.dti.TensorFit.evals">
<code class="descname">evals</code><a class="headerlink" href="#dipy.reconst.dti.TensorFit.evals" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the eigenvalues of the tensor as an array</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.dti.TensorFit.evecs">
<code class="descname">evecs</code><a class="headerlink" href="#dipy.reconst.dti.TensorFit.evecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the eigenvectors of teh tensor as an array</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.fa">
<code class="descname">fa</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.fa" title="Permalink to this definition">¶</a></dt>
<dd><p>Fractional anisotropy (FA) calculated from cached eigenvalues.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.lower_triangular">
<code class="descname">lower_triangular</code><span class="sig-paren">(</span><em>b0=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.lower_triangular" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.md">
<code class="descname">md</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.md" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean diffusitivity (MD) calculated from cached eigenvalues.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>md</strong> : array (V, 1)</p>
<blockquote class="last">
<div><p>Calculated MD.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>MD is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/91709af5fe224201848c2d554be84c4e63c6ed15.png" alt="MD = \frac{\lambda_1+\lambda_2+\lambda_3}{3}"/></p>
</div></dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.odf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.dti.TensorFit.quadratic_form">
<code class="descname">quadratic_form</code><a class="headerlink" href="#dipy.reconst.dti.TensorFit.quadratic_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the 3x3 diffusion tensor for each voxel</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.rd">
<code class="descname">rd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.rd" title="Permalink to this definition">¶</a></dt>
<dd><p>Radial diffusitivity (RD) calculated from cached eigenvalues.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>rd</strong> : array (V, 1)</p>
<blockquote class="last">
<div><p>Calculated RD.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>RD is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/572f03fc7e27a95ee544e9b20e467331581d3c60.png" alt="RD = \frac{\lambda_2 + \lambda_3}{2}"/></p>
</div></dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.dti.TensorFit.shape">
<code class="descname">shape</code><a class="headerlink" href="#dipy.reconst.dti.TensorFit.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorFit.trace">
<code class="descname">trace</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorFit.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace of the tensor calculated from cached eigenvalues.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>trace</strong> : array (V, 1)</p>
<blockquote class="last">
<div><p>Calculated trace.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The trace is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/89127f12730b26091bbe15c917c61052f6c1410c.png" alt="trace = \lambda_1 + \lambda_2 + \lambda_3"/></p>
</div></dd></dl>

</dd></dl>

</div>
<div class="section" id="id25">
<h3><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.TensorModel" title="dipy.reconst.dti.TensorModel"><code class="xref py py-class docutils literal"><span class="pre">TensorModel</span></code></a><a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.dti.TensorModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.dti.</code><code class="descname">TensorModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Diffusion Tensor</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.TensorModel.fit" title="dipy.reconst.dti.TensorModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td>Fit method of the DTI model class</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.dti.TensorModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>fit_method='WLS'</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A Diffusion Tensor Model <a class="reference internal" href="#r44" id="id26">[R44]</a>, <a class="reference internal" href="#r45" id="id27">[R45]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable</p>
<p><strong>fit_method</strong> : str or callable</p>
<blockquote>
<div><p>str can be one of the following:
&#8216;WLS&#8217; for weighted least squares</p>
<blockquote>
<div><p>dti.wls_fit_tensor</p>
</div></blockquote>
<dl class="docutils">
<dt>&#8216;LS&#8217; for ordinary least squares</dt>
<dd><p class="first last">dti.ols_fit_tensor</p>
</dd>
<dt>callable has to have the signature:</dt>
<dd><p class="first last">fit_method(design_matrix, data, <a href="#id28"><span class="problematic" id="id29">*</span></a>args, <a href="#id30"><span class="problematic" id="id31">**</span></a>kwargs)</p>
</dd>
</dl>
</div></blockquote>
<p><strong>args, kwargs</strong> : arguments and key-word arguments passed to the</p>
<blockquote class="last">
<div><p>fit_method. See dti.wls_fit_tensor, dti.ols_fit_tensor for details</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r44" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R44]</td><td><em>(<a class="fn-backref" href="#id26">1</a>, <a class="fn-backref" href="#id32">2</a>)</em> Basser, P.J., Mattiello, J., LeBihan, D., 1994. Estimation of
the effective self-diffusion tensor from the NMR spin echo. J Magn
Reson B 103, 247-254.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r45" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R45]</td><td><em>(<a class="fn-backref" href="#id27">1</a>, <a class="fn-backref" href="#id33">2</a>)</em> Basser, P., Pierpaoli, C., 1996. Microstructural and
physiological features of tissues elucidated by quantitative
diffusion-tensor MRI.  Journal of Magnetic Resonance 111, 209-219.</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.dti.TensorModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.TensorModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method of the DTI model class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : array</p>
<blockquote>
<div><p>The measured signal from one voxel.</p>
</div></blockquote>
<p><strong>mask</strong> : array</p>
<blockquote class="last">
<div><p>A boolean array used to mark the coordinates in the data that
should be analyzed that has the shape data.shape[-1]</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id34">
<h3><code class="xref py py-class docutils literal"><span class="pre">range</span></code><a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="apparent-diffusion-coef">
<h3>apparent_diffusion_coef<a class="headerlink" href="#apparent-diffusion-coef" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id35">
<h3>auto_attr<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.auto_attr">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">auto_attr</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.auto_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to create OneTimeProperty attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>func</strong> : method</p>
<blockquote class="last">
<div><p>The method that will be called the first time to compute a value.
Afterwards, the method&#8217;s name will be a standard attribute holding the
value of this computation.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MagicProp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@auto_attr</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="mi">99</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">MagicProp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">a</span>
<span class="go">99</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id36">
<h3>axial_diffusivity<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.axial_diffusivity">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">axial_diffusivity</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.axial_diffusivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Axial Diffusivity (AD) of a diffusion tensor.
Also called parallel diffusivity.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evals</strong> : array-like</p>
<blockquote>
<div><p>Eigenvalues of a diffusion tensor.</p>
</div></blockquote>
<p><strong>axis</strong> : int</p>
<blockquote>
<div><p>Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ad</strong> : array</p>
<blockquote class="last">
<div><p>Calculated AD.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>AD is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/e702fe9f3509d1d63f1be55aa53d1bbe175594e1.png" alt="AD = \lambda_1"/></p>
</div></dd></dl>

</div>
<div class="section" id="color-fa">
<h3>color_fa<a class="headerlink" href="#color-fa" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.color_fa">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">color_fa</code><span class="sig-paren">(</span><em>fa</em>, <em>evecs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.color_fa" title="Permalink to this definition">¶</a></dt>
<dd><p>Color fractional anisotropy of diffusion tensor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fa</strong> : array-like</p>
<blockquote>
<div><p>Array of the fractional anisotropy (can be 1D, 2D or 3D)</p>
</div></blockquote>
<p><strong>evecs</strong> : array-like</p>
<blockquote>
<div><p>eigen vectors from the tensor model</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>rgb</strong> : Array with 3 channels for each color as the last dimension.</p>
<blockquote class="last">
<div><p>Colormap of the FA with red for the x value, y for the green
value and z for the blue value.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>it is computed from the clipped FA between 0 and 1 using the following
formula</p>
<div class="math">
<p><img src="../_images/math/95943043257947521b19a17e20ec57176971d483.png" alt="rgb = abs(max(eigen_vector)) \times fa"/></p>
</div></dd></dl>

</div>
<div class="section" id="id37">
<h3>decompose_tensor<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.decompose_tensor">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">decompose_tensor</code><span class="sig-paren">(</span><em>tensor</em>, <em>min_diffusivity=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.decompose_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns eigenvalues and eigenvectors given a diffusion tensor</p>
<p>Computes tensor eigen decomposition to calculate eigenvalues and
eigenvectors (Basser et al., 1994a).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tensor</strong> : array (3, 3)</p>
<blockquote>
<div><p>Hermitian matrix representing a diffusion tensor.</p>
</div></blockquote>
<p><strong>min_diffusivity</strong> : float</p>
<blockquote>
<div><p>Because negative eigenvalues are not physical and small eigenvalues,
much smaller than the diffusion weighting, cause quite a lot of noise
in metrics such as fa, diffusivity values smaller than
<cite>min_diffusivity</cite> are replaced with <cite>min_diffusivity</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>eigvals</strong> : array (3,)</p>
<blockquote>
<div><p>Eigenvalues from eigen decomposition of the tensor. Negative
eigenvalues are replaced by zero. Sorted from largest to smallest.</p>
</div></blockquote>
<p><strong>eigvecs</strong> : array (3, 3)</p>
<blockquote class="last">
<div><p>Associated eigenvectors from eigen decomposition of the tensor.
Eigenvectors are columnar (e.g. eigvecs[:,j] is associated with
eigvals[j])</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id38">
<h3>design_matrix<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.design_matrix">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">design_matrix</code><span class="sig-paren">(</span><em>gtab</em>, <em>bval</em>, <em>dtype=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.design_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs design matrix for DTI weighted least squares or
least squares fitting. (Basser et al., 1994a)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : array with shape (3,g)</p>
<blockquote>
<div><p>Diffusion gradient table found in DICOM header as a numpy array.</p>
</div></blockquote>
<p><strong>bval</strong> : array with shape (g,)</p>
<blockquote>
<div><p>Diffusion weighting factor b for each vector in gtab.</p>
</div></blockquote>
<p><strong>dtype</strong> : string</p>
<blockquote>
<div><p>Parameter to control the dtype of returned designed matrix</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>design_matrix</strong> : array (g,7)</p>
<blockquote class="last">
<div><p>Design matrix or B matrix assuming Gaussian distributed tensor model
design_matrix[j,:] = (Bxx,Byy,Bzz,Bxy,Bxz,Byz,dummy)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="determinant">
<h3>determinant<a class="headerlink" href="#determinant" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="deviatoric">
<h3>deviatoric<a class="headerlink" href="#deviatoric" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="eig-from-lo-tri">
<h3>eig_from_lo_tri<a class="headerlink" href="#eig-from-lo-tri" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="eigh">
<h3>eigh<a class="headerlink" href="#eigh" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id39">
<h3>fractional_anisotropy<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.fractional_anisotropy">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">fractional_anisotropy</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.fractional_anisotropy" title="Permalink to this definition">¶</a></dt>
<dd><p>Fractional anisotropy (FA) of a diffusion tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evals</strong> : array-like</p>
<blockquote>
<div><p>Eigenvalues of a diffusion tensor.</p>
</div></blockquote>
<p><strong>axis</strong> : int</p>
<blockquote>
<div><p>Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>fa</strong> : array</p>
<blockquote class="last">
<div><p>Calculated FA. Range is 0 &lt;= FA &lt;= 1.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>FA is calculated using the following equation:</p>
<div class="math">
<p><img src="../_images/math/90f516a84852af7a1b51451fb4596666343f9f22.png" alt="FA = \sqrt{\frac{1}{2}\frac{(\lambda_1-\lambda_2)^2+(\lambda_1-
            \lambda_3)^2+(\lambda_2-\lambda_3)^2}{\lambda_1^2+
            \lambda_2^2+\lambda_3^2}}"/></p>
</div></dd></dl>

</div>
<div class="section" id="id40">
<h3>from_lower_triangular<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.from_lower_triangular">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">from_lower_triangular</code><span class="sig-paren">(</span><em>D</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.from_lower_triangular" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tensor given the six unique tensor elements</p>
<p>Given the six unique tensor elments (in the order: Dxx, Dxy, Dyy, Dxz, Dyz,
Dzz) returns a 3 by 3 tensor. All elements after the sixth are ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>D</strong> : array_like, (..., &gt;6)</p>
<blockquote>
<div><p>Unique elements of the tensors</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tensor</strong> : ndarray (..., 3, 3)</p>
<blockquote class="last">
<div><p>3 by 3 tensors</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="geodesic-anisotropy">
<h3>geodesic_anisotropy<a class="headerlink" href="#geodesic-anisotropy" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id41">
<h3>get_sphere<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.get_sphere">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">get_sphere</code><span class="sig-paren">(</span><em>name='symmetric362'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.get_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>provide triangulated spheres</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : str</p>
<blockquote>
<div><p>which sphere - one of:
* &#8216;symmetric362&#8217;
* &#8216;symmetric642&#8217;
* &#8216;symmetric724&#8217;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>sphere</strong> : a dipy.core.sphere.Sphere class instance</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.data</span> <span class="kn">import</span> <span class="n">get_sphere</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;symmetric362&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">sphere</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">sphere</span><span class="o">.</span><span class="n">faces</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(362, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">faces</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(720, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">verts</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">get_sphere</span><span class="p">(</span><span class="s1">&#39;not a sphere name&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">DataError</span>: <span class="n">No sphere called &quot;not a sphere name&quot;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="gradient-table">
<h3>gradient_table<a class="headerlink" href="#gradient-table" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="isotropic">
<h3>isotropic<a class="headerlink" href="#isotropic" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="iter-fit-tensor">
<h3>iter_fit_tensor<a class="headerlink" href="#iter-fit-tensor" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="linearity">
<h3>linearity<a class="headerlink" href="#linearity" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id42">
<h3>lower_triangular<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.lower_triangular">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">lower_triangular</code><span class="sig-paren">(</span><em>tensor</em>, <em>b0=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.lower_triangular" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the six lower triangular values of the tensor and a dummy variable
if b0 is not None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tensor</strong> : array_like (..., 3, 3)</p>
<blockquote>
<div><p>a collection of 3, 3 diffusion tensors</p>
</div></blockquote>
<p><strong>b0</strong> : float</p>
<blockquote>
<div><p>if b0 is not none log(b0) is returned as the dummy variable</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>D</strong> : ndarray</p>
<blockquote class="last">
<div><p>If b0 is none, then the shape will be (..., 6) otherwise (..., 7)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id43">
<h3>mean_diffusivity<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.mean_diffusivity">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">mean_diffusivity</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.mean_diffusivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean Diffusivity (MD) of a diffusion tensor. Also, called
Apparent diffusion coefficient (ADC)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evals</strong> : array-like</p>
<blockquote>
<div><p>Eigenvalues of a diffusion tensor.</p>
</div></blockquote>
<p><strong>axis</strong> : int</p>
<blockquote>
<div><p>Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>md</strong> : array</p>
<blockquote class="last">
<div><p>Calculated MD.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>MD is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/97eac5e5eacc12e3e110cc810a28c7221f9d4c32.png" alt="MD = \frac{\lambda_1 + \lambda_2 + \lambda_3}{3}"/></p>
</div></dd></dl>

</div>
<div class="section" id="mode">
<h3>mode<a class="headerlink" href="#mode" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="nlls-fit-tensor">
<h3>nlls_fit_tensor<a class="headerlink" href="#nlls-fit-tensor" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="norm">
<h3>norm<a class="headerlink" href="#norm" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="ols-fit-tensor">
<h3>ols_fit_tensor<a class="headerlink" href="#ols-fit-tensor" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.ols_fit_tensor">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">ols_fit_tensor</code><span class="sig-paren">(</span><em>design_matrix</em>, <em>data</em>, <em>min_signal=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.ols_fit_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes ordinary least squares (OLS) fit to calculate self-diffusion
tensor using a linear regression model <a class="footnote-reference" href="#id45" id="id44">[1]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>design_matrix</strong> : array (g, 7)</p>
<blockquote>
<div><p>Design matrix holding the covariants used to solve for the regression
coefficients. Use design_matrix to build a valid design matrix from
bvalues and a gradient table.</p>
</div></blockquote>
<p><strong>data</strong> : array ([X, Y, Z, ...], g)</p>
<blockquote>
<div><p>Data or response variables holding the data. Note that the last
dimension should contain the data. It makes no copies of data.</p>
</div></blockquote>
<p><strong>min_signal</strong> : default = 1</p>
<blockquote>
<div><p>All values below min_signal are repalced with min_signal. This is done
in order to avaid taking log(0) durring the tensor fitting.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>eigvals</strong> : array (..., 3)</p>
<blockquote>
<div><p>Eigenvalues from eigen decomposition of the tensor.</p>
</div></blockquote>
<p><strong>eigvecs</strong> : array (..., 3, 3)</p>
<blockquote class="last">
<div><p>Associated eigenvectors from eigen decomposition of the tensor.
Eigenvectors are columnar (e.g. eigvecs[:,j] is associated with
eigvals[j])</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">WLS_fit_tensor</span></code>, <a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.decompose_tensor" title="dipy.reconst.dti.decompose_tensor"><code class="xref py py-obj docutils literal"><span class="pre">decompose_tensor</span></code></a>, <a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.design_matrix" title="dipy.reconst.dti.design_matrix"><code class="xref py py-obj docutils literal"><span class="pre">design_matrix</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>This function is offered mainly as a quick comparison to WLS.</p>
<div class="math">
<p><img src="../_images/math/8928ac5da206e4c3e403642376c39ce4a121f12b.png" alt="y = \mathrm{data} \\
X = \mathrm{design matrix} \\

\hat{\beta}_\mathrm{OLS} = (X^T X)^{-1} X^T y"/></p>
</div><p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id45" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id44">2</a>)</em> Chung, SW., Lu, Y., Henry, R.G., 2006. Comparison of bootstrap
approaches for estimation of uncertainties of DTI parameters.
NeuroImage 33, 531-541.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pinv">
<h3>pinv<a class="headerlink" href="#pinv" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="planarity">
<h3>planarity<a class="headerlink" href="#planarity" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="quantize-evecs">
<h3>quantize_evecs<a class="headerlink" href="#quantize-evecs" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.quantize_evecs">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">quantize_evecs</code><span class="sig-paren">(</span><em>evecs</em>, <em>odf_vertices=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.quantize_evecs" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the closest orientation of an evenly distributed sphere</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evecs</strong> : ndarray</p>
<p><strong>odf_vertices</strong> : None or ndarray</p>
<blockquote>
<div><p>If None, then set vertices from symmetric362 sphere.  Otherwise use
passed ndarray as vertices</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>IN</strong> : ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id46">
<h3>radial_diffusivity<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.radial_diffusivity">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">radial_diffusivity</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.radial_diffusivity" title="Permalink to this definition">¶</a></dt>
<dd><p>Radial Diffusivity (RD) of a diffusion tensor.
Also called perpendicular diffusivity.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evals</strong> : array-like</p>
<blockquote>
<div><p>Eigenvalues of a diffusion tensor.</p>
</div></blockquote>
<p><strong>axis</strong> : int</p>
<blockquote>
<div><p>Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>rd</strong> : array</p>
<blockquote class="last">
<div><p>Calculated RD.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>RD is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/572f03fc7e27a95ee544e9b20e467331581d3c60.png" alt="RD = \frac{\lambda_2 + \lambda_3}{2}"/></p>
</div></dd></dl>

</div>
<div class="section" id="restore-fit-tensor">
<h3>restore_fit_tensor<a class="headerlink" href="#restore-fit-tensor" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sphericity">
<h3>sphericity<a class="headerlink" href="#sphericity" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="tensor-prediction">
<h3>tensor_prediction<a class="headerlink" href="#tensor-prediction" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="trace">
<h3>trace<a class="headerlink" href="#trace" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.trace">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">trace</code><span class="sig-paren">(</span><em>evals</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Trace of a diffusion tensor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>evals</strong> : array-like</p>
<blockquote>
<div><p>Eigenvalues of a diffusion tensor.</p>
</div></blockquote>
<p><strong>axis</strong> : int</p>
<blockquote>
<div><p>Axis of <cite>evals</cite> which contains 3 eigenvalues.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>trace</strong> : array</p>
<blockquote class="last">
<div><p>Calculated trace of the diffusion tensor.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Trace is calculated with the following equation:</p>
<div class="math">
<p><img src="../_images/math/6ef1ff292290f38edd65d87c93a5e802930359f1.png" alt="MD = \lambda_1 + \lambda_2 + \lambda_3"/></p>
</div></dd></dl>

</div>
<div class="section" id="id47">
<h3>vec_val_vect<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.vec_val_vect">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">vec_val_vect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.vec_val_vect" title="Permalink to this definition">¶</a></dt>
<dd><p>Vectorize <cite>vecs</cite>.diag(<cite>vals</cite>).`vecs`.T for last 2 dimensions of <cite>vecs</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>vecs</strong> : shape (..., M, N) array</p>
<blockquote>
<div><p>containing tensor in last two dimensions; M, N usually equal to (3, 3)</p>
</div></blockquote>
<p><strong>vals</strong> : shape (..., N) array</p>
<blockquote>
<div><p>diagonal values carried in last dimension, <code class="docutils literal"><span class="pre">...</span></code> shape above must
match that for <cite>vecs</cite></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>res</strong> : shape (..., M, M) array</p>
<blockquote>
<div><p>For all the dimensions ellided by <code class="docutils literal"><span class="pre">...</span></code>, loops to get (M, N) <code class="docutils literal"><span class="pre">vec</span></code>
matrix, and (N,) <code class="docutils literal"><span class="pre">vals</span></code> vector, and calculates
<code class="docutils literal"><span class="pre">vec.dot(np.diag(val).dot(vec.T)</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong> : non-matching <code class="docutils literal"><span class="pre">...</span></code> dimensions of <cite>vecs</cite>, <cite>vals</cite></p>
<p class="last"><strong>ValueError</strong> : non-matching <code class="docutils literal"><span class="pre">N</span></code> dimensions of <cite>vecs</cite>, <cite>vals</cite></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Make a 3D array where the first dimension is only 1</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec_val_vect</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
<span class="go">array([[[   9.,   24.,   39.],</span>
<span class="go">        [  24.,   66.,  108.],</span>
<span class="go">        [  39.,  108.,  177.]]])</span>
</pre></div>
</div>
<p>That&#8217;s the same as the 2D case (apart from the float casting):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">vecs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">vecs</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">vals</span><span class="p">),</span> <span class="n">vecs</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
<span class="go">array([[  9,  24,  39],</span>
<span class="go">       [ 24,  66, 108],</span>
<span class="go">       [ 39, 108, 177]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="vector-norm">
<h3>vector_norm<a class="headerlink" href="#vector-norm" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.vector_norm">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">vector_norm</code><span class="sig-paren">(</span><em>vec</em>, <em>axis=-1</em>, <em>keepdims=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.vector_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Return vector Euclidean (L2) norm</p>
<p>See <a class="reference internal" href="../glossary.html#term-unit-vector"><span class="xref std std-term">unit vector</span></a> and <a class="reference internal" href="../glossary.html#term-euclidean-norm"><span class="xref std std-term">Euclidean norm</span></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>vec</strong> : array_like</p>
<blockquote>
<div><p>Vectors to norm.</p>
</div></blockquote>
<p><strong>axis</strong> : int</p>
<blockquote>
<div><p>Axis over which to norm. By default norm over last axis. If <cite>axis</cite> is
None, <cite>vec</cite> if flattened then normed.</p>
</div></blockquote>
<p><strong>keepdims</strong> : bool</p>
<blockquote>
<div><p>If True, the output will have the same number of dimensions as <cite>vec</cite>,
with shape 1 on <cite>axis</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>norm</strong> : array</p>
<blockquote class="last">
<div><p>Euclidean norms of vectors.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vec</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">77</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vector_norm</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
<span class="go">array([ 17.,  85.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vector_norm</span><span class="p">(</span><span class="n">vec</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">array([[ 17.],</span>
<span class="go">       [ 85.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vector_norm</span><span class="p">(</span><span class="n">vec</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([  8.,  39.,  77.])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="wls-fit-tensor">
<h3>wls_fit_tensor<a class="headerlink" href="#wls-fit-tensor" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.dti.wls_fit_tensor">
<code class="descclassname">dipy.reconst.dti.</code><code class="descname">wls_fit_tensor</code><span class="sig-paren">(</span><em>design_matrix</em>, <em>data</em>, <em>min_signal=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.dti.wls_fit_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes weighted least squares (WLS) fit to calculate self-diffusion
tensor using a linear regression model <a class="reference internal" href="#r46" id="id48">[R46]</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>design_matrix</strong> : array (g, 7)</p>
<blockquote>
<div><p>Design matrix holding the covariants used to solve for the regression
coefficients.</p>
</div></blockquote>
<p><strong>data</strong> : array ([X, Y, Z, ...], g)</p>
<blockquote>
<div><p>Data or response variables holding the data. Note that the last
dimension should contain the data. It makes no copies of data.</p>
</div></blockquote>
<p><strong>min_signal</strong> : default = 1</p>
<blockquote>
<div><p>All values below min_signal are repalced with min_signal. This is done
in order to avaid taking log(0) durring the tensor fitting.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>eigvals</strong> : array (..., 3)</p>
<blockquote>
<div><p>Eigenvalues from eigen decomposition of the tensor.</p>
</div></blockquote>
<p><strong>eigvecs</strong> : array (..., 3, 3)</p>
<blockquote class="last">
<div><p>Associated eigenvectors from eigen decomposition of the tensor.
Eigenvectors are columnar (e.g. eigvecs[:,j] is associated with
eigvals[j])</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dipy.reconst.dti.html#dipy.reconst.dti.decompose_tensor" title="dipy.reconst.dti.decompose_tensor"><code class="xref py py-obj docutils literal"><span class="pre">decompose_tensor</span></code></a></p>
</div>
<p class="rubric">Notes</p>
<p>In Chung, et al. 2006, the regression of the WLS fit needed an unbiased
preliminary estimate of the weights and therefore the ordinary least
squares (OLS) estimates were used. A &#8220;two pass&#8221; method was implemented:</p>
<blockquote>
<div><ol class="arabic simple">
<li>calculate OLS estimates of the data</li>
<li>apply the OLS estimates as weights to the WLS fit of the data</li>
</ol>
</div></blockquote>
<p>This ensured heteroscadasticity could be properly modeled for various
types of bootstrap resampling (namely residual bootstrap).</p>
<div class="math">
<p><img src="../_images/math/94788fc48058ff0cf27fa827e85418e1a454651f.png" alt="y = \mathrm{data} \\
X = \mathrm{design matrix} \\
\hat{\beta}_\mathrm{WLS} = \mathrm{desired regression coefficients (e.g. tensor)}\\
\\
\hat{\beta}_\mathrm{WLS} = (X^T W X)^{-1} X^T W y \\
\\
W = \mathrm{diag}((X \hat{\beta}_\mathrm{OLS})^2),
\mathrm{where} \hat{\beta}_\mathrm{OLS} = (X^T X)^{-1} X^T y"/></p>
</div><p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r46" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R46]</td><td><em>(<a class="fn-backref" href="#id48">1</a>, <a class="fn-backref" href="#id49">2</a>)</em> Chung, SW., Lu, Y., Henry, R.G., 2006. Comparison of bootstrap
approaches for estimation of uncertainties of DTI parameters.
NeuroImage 33, 531-541.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id50">
<h3><a class="reference internal" href="#dipy.reconst.gqi.Cache" title="dipy.reconst.gqi.Cache"><code class="xref py py-class docutils literal"><span class="pre">Cache</span></code></a><a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.gqi.Cache">
<em class="property">class </em><code class="descclassname">dipy.reconst.gqi.</code><code class="descname">Cache</code><a class="headerlink" href="#dipy.reconst.gqi.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Cache values based on a key object (such as a sphere or gradient table).</p>
<p class="rubric">Notes</p>
<p>This class is meant to be used as a mix-in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">Cache</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelFit</span><span class="p">(</span><span class="n">Fit</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Inside a method on the fit, typical usage would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">odf</span><span class="p">(</span><span class="n">sphere</span><span class="p">):</span>
    <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">M</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_basis_matrix</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.Cache.cache_clear" title="dipy.reconst.gqi.Cache.cache_clear"><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code></a>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.gqi.Cache.cache_get" title="dipy.reconst.gqi.Cache.cache_get"><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code></a>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.Cache.cache_set" title="dipy.reconst.gqi.Cache.cache_set"><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code></a>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.gqi.Cache.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.Cache.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.gqi.Cache.cache_clear">
<code class="descname">cache_clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.Cache.cache_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.gqi.Cache.cache_get">
<code class="descname">cache_get</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.Cache.cache_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>default</strong> : object</p>
<blockquote>
<div><p>Value to be returned if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>v</strong> : object</p>
<blockquote class="last">
<div><p>Value from the cache associated with <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.  Returns
<cite>default</cite> if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.gqi.Cache.cache_set">
<code class="descname">cache_set</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.Cache.cache_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a value in the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>value</strong> : object</p>
<blockquote class="last">
<div><p>Value stored in the cache for each unique combination
of <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Imagine the following computation is very expensive</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">X1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="ow">is</span> <span class="n">X2</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="generalizedqsamplingfit">
<h3><a class="reference internal" href="#dipy.reconst.gqi.GeneralizedQSamplingFit" title="dipy.reconst.gqi.GeneralizedQSamplingFit"><code class="xref py py-class docutils literal"><span class="pre">GeneralizedQSamplingFit</span></code></a><a class="headerlink" href="#generalizedqsamplingfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.gqi.GeneralizedQSamplingFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.gqi.</code><code class="descname">GeneralizedQSamplingFit</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.GeneralizedQSamplingFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.odf.OdfFit" title="dipy.reconst.odf.OdfFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.odf.OdfFit</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.GeneralizedQSamplingFit.odf" title="dipy.reconst.gqi.GeneralizedQSamplingFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>Calculates the discrete ODF for a given discrete sphere.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.gqi.GeneralizedQSamplingFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.GeneralizedQSamplingFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates PDF and ODF for a single voxel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : object,</p>
<blockquote>
<div><p>DiffusionSpectrumModel</p>
</div></blockquote>
<p><strong>data</strong> : 1d ndarray,</p>
<blockquote class="last">
<div><p>signal values</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.gqi.GeneralizedQSamplingFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.GeneralizedQSamplingFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the discrete ODF for a given discrete sphere.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="generalizedqsamplingmodel">
<h3><a class="reference internal" href="#dipy.reconst.gqi.GeneralizedQSamplingModel" title="dipy.reconst.gqi.GeneralizedQSamplingModel"><code class="xref py py-class docutils literal"><span class="pre">GeneralizedQSamplingModel</span></code></a><a class="headerlink" href="#generalizedqsamplingmodel" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="dipy.reconst.gqi.GeneralizedQSamplingModel">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">GeneralizedQSamplingModel</code><a class="headerlink" href="#dipy.reconst.gqi.GeneralizedQSamplingModel" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">MultiVoxelModel</span></code></p>
</dd></dl>

</div>
<div class="section" id="id51">
<h3><a class="reference internal" href="#dipy.reconst.gqi.OdfFit" title="dipy.reconst.gqi.OdfFit"><code class="xref py py-class docutils literal"><span class="pre">OdfFit</span></code></a><a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.gqi.OdfFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.gqi.</code><code class="descname">OdfFit</code><a class="headerlink" href="#dipy.reconst.gqi.OdfFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.OdfFit.odf" title="dipy.reconst.gqi.OdfFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>To be implemented but specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.gqi.OdfFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.OdfFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.gqi.OdfFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.OdfFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented but specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id52">
<h3><a class="reference internal" href="#dipy.reconst.gqi.OdfModel" title="dipy.reconst.gqi.OdfModel"><code class="xref py py-class docutils literal"><span class="pre">OdfModel</span></code></a><a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.gqi.OdfModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.gqi.</code><code class="descname">OdfModel</code><a class="headerlink" href="#dipy.reconst.gqi.OdfModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>An abstract class to be sub-classed by specific odf models</p>
<p>All odf models should provide a fit method which may take data as it&#8217;s
first and only argument.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.gqi.OdfModel.fit" title="dipy.reconst.gqi.OdfModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data)</td>
<td>To be implemented by specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.gqi.OdfModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.OdfModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.gqi.OdfModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.OdfModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented by specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="equatorial-maximum">
<h3>equatorial_maximum<a class="headerlink" href="#equatorial-maximum" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.equatorial_maximum">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">equatorial_maximum</code><span class="sig-paren">(</span><em>vertices</em>, <em>odf</em>, <em>pole</em>, <em>width</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.equatorial_maximum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="equatorial-zone-vertices">
<h3>equatorial_zone_vertices<a class="headerlink" href="#equatorial-zone-vertices" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.equatorial_zone_vertices">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">equatorial_zone_vertices</code><span class="sig-paren">(</span><em>vertices</em>, <em>pole</em>, <em>width=5</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.equatorial_zone_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>finds the &#8216;vertices&#8217; in the equatorial zone conjugate
to &#8216;pole&#8217; with width half &#8216;width&#8217; degrees</p>
</dd></dl>

</div>
<div class="section" id="gfa">
<h3>gfa<a class="headerlink" href="#gfa" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.gfa">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">gfa</code><span class="sig-paren">(</span><em>samples</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.gfa" title="Permalink to this definition">¶</a></dt>
<dd><p>The general fractional anisotropy of a function evaluated on the unit sphere</p>
</dd></dl>

</div>
<div class="section" id="id53">
<h3>local_maxima<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.local_maxima">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">local_maxima</code><span class="sig-paren">(</span><em>odf</em>, <em>edges</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.local_maxima" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the local maxima of a function evaluated on a discrete set of points.</p>
<p>If a function is evaluated on some set of points where each pair of
neighboring points is an edge in edges, find the local maxima.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>odf</strong> : array, 1d, dtype=double</p>
<blockquote>
<div><p>The function evaluated on a set of discrete points.</p>
</div></blockquote>
<p><strong>edges</strong> : array (N, 2)</p>
<blockquote>
<div><p>The set of neighbor relations between the points. Every edge, ie
<cite>edges[i, :]</cite>, is a pair of neighboring points.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>peak_values</strong> : ndarray</p>
<blockquote>
<div><p>Value of odf at a maximum point. Peak values is sorted in descending
order.</p>
</div></blockquote>
<p><strong>peak_indices</strong> : ndarray</p>
<blockquote class="last">
<div><p>Indices of maximum points. Sorted in the same order as <cite>peak_values</cite> so
<cite>odf[peak_indices[i]] == peak_values[i]</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dipy.core.sphere.html#module-dipy.core.sphere" title="dipy.core.sphere"><code class="xref py py-obj docutils literal"><span class="pre">dipy.core.sphere</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="id54">
<h3>multi_voxel_fit<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="normalize-qa">
<h3>normalize_qa<a class="headerlink" href="#normalize-qa" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.normalize_qa">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">normalize_qa</code><span class="sig-paren">(</span><em>qa</em>, <em>max_qa=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.normalize_qa" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize quantitative anisotropy.</p>
<p>Used mostly with GQI rather than GQI2.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>qa</strong> : array, shape (X, Y, Z, N)</p>
<blockquote>
<div><p>where N is the maximum number of peaks stored</p>
</div></blockquote>
<p><strong>max_qa</strong> : float,</p>
<blockquote>
<div><p>maximum qa value. Usually found in the CSF (corticospinal fluid).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>nqa</strong> : array, shape (x, Y, Z, N)</p>
<blockquote class="last">
<div><p>normalized quantitative anisotropy</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Normalized quantitative anisotropy has the very useful property
to be very small near gray matter and background areas. Therefore, 
it can be used to mask out white matter areas.</p>
</dd></dl>

</div>
<div class="section" id="npa">
<h3>npa<a class="headerlink" href="#npa" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.npa">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">npa</code><span class="sig-paren">(</span><em>self</em>, <em>odf</em>, <em>width=5</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.npa" title="Permalink to this definition">¶</a></dt>
<dd><p>non-parametric anisotropy</p>
<p>Nimmo-Smith et. al  ISMRM 2011</p>
</dd></dl>

</div>
<div class="section" id="odf-sum">
<h3>odf_sum<a class="headerlink" href="#odf-sum" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.odf_sum">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">odf_sum</code><span class="sig-paren">(</span><em>odf</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.odf_sum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="patch-maximum">
<h3>patch_maximum<a class="headerlink" href="#patch-maximum" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.patch_maximum">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">patch_maximum</code><span class="sig-paren">(</span><em>vertices</em>, <em>odf</em>, <em>pole</em>, <em>width</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.patch_maximum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="patch-sum">
<h3>patch_sum<a class="headerlink" href="#patch-sum" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.patch_sum">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">patch_sum</code><span class="sig-paren">(</span><em>vertices</em>, <em>odf</em>, <em>pole</em>, <em>width</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.patch_sum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="patch-vertices">
<h3>patch_vertices<a class="headerlink" href="#patch-vertices" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.patch_vertices">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">patch_vertices</code><span class="sig-paren">(</span><em>vertices</em>, <em>pole</em>, <em>width</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.patch_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>find &#8216;vertices&#8217; within the cone of &#8216;width&#8217; degrees around &#8216;pole&#8217;</p>
</dd></dl>

</div>
<div class="section" id="polar-zone-vertices">
<h3>polar_zone_vertices<a class="headerlink" href="#polar-zone-vertices" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.polar_zone_vertices">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">polar_zone_vertices</code><span class="sig-paren">(</span><em>vertices</em>, <em>pole</em>, <em>width=5</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.polar_zone_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>finds the &#8216;vertices&#8217; in the equatorial band around
the &#8216;pole&#8217; of radius &#8216;width&#8217; degrees</p>
</dd></dl>

</div>
<div class="section" id="remove-similar-vertices">
<h3>remove_similar_vertices<a class="headerlink" href="#remove-similar-vertices" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.remove_similar_vertices">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">remove_similar_vertices</code><span class="sig-paren">(</span><em>vertices</em>, <em>theta</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.remove_similar_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns vertices that are separated by at least theta degrees from all
other vertices. Vertex v and -v are considered the same so if v and -v are
both in <cite>vertices</cite> only one is kept. Also if v and w are both in vertices,
w must be separated by theta degrees from both v and -v to be unique.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>vertices</strong> : (N, 3) ndarray</p>
<blockquote>
<div><p>N unit vectors</p>
</div></blockquote>
<p><strong>theta</strong> : float</p>
<blockquote>
<div><p>The minimum separation between vertices in degrees.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>unique_vertices</strong> : (M, 3) ndarray</p>
<blockquote>
<div><p>Vertices sufficiently separated from one another.</p>
</div></blockquote>
<p><strong>mapping</strong> : (N,) ndarray</p>
<blockquote class="last">
<div><p>Indices into unique_vertices. For each vertex in <cite>vertices</cite> the index
of a vertex in <cite>unique_vertices</cite> that is less than theta degrees away.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="squared-radial-component">
<h3>squared_radial_component<a class="headerlink" href="#squared-radial-component" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.squared_radial_component">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">squared_radial_component</code><span class="sig-paren">(</span><em>x</em>, <em>tol=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.squared_radial_component" title="Permalink to this definition">¶</a></dt>
<dd><p>Part of the GQI2 integral</p>
<p>Eq.8 in the referenced paper by Yeh et al. 2010</p>
</dd></dl>

</div>
<div class="section" id="triple-odf-maxima">
<h3>triple_odf_maxima<a class="headerlink" href="#triple-odf-maxima" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.triple_odf_maxima">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">triple_odf_maxima</code><span class="sig-paren">(</span><em>vertices</em>, <em>odf</em>, <em>width</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.triple_odf_maxima" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="upper-hemi-map">
<h3>upper_hemi_map<a class="headerlink" href="#upper-hemi-map" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.gqi.upper_hemi_map">
<code class="descclassname">dipy.reconst.gqi.</code><code class="descname">upper_hemi_map</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.gqi.upper_hemi_map" title="Permalink to this definition">¶</a></dt>
<dd><p>maps a 3-vector into the z-upper hemisphere</p>
</dd></dl>

</div>
<div class="section" id="interpolator">
<h3><a class="reference internal" href="#dipy.reconst.interpolate.Interpolator" title="dipy.reconst.interpolate.Interpolator"><code class="xref py py-class docutils literal"><span class="pre">Interpolator</span></code></a><a class="headerlink" href="#interpolator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.interpolate.Interpolator">
<em class="property">class </em><code class="descclassname">dipy.reconst.interpolate.</code><code class="descname">Interpolator</code><span class="sig-paren">(</span><em>data</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.Interpolator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Class to be subclassed by different interpolator types</p>
<dl class="method">
<dt id="dipy.reconst.interpolate.Interpolator.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.Interpolator.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="nearestneighborinterpolator">
<h3><a class="reference internal" href="#dipy.reconst.interpolate.NearestNeighborInterpolator" title="dipy.reconst.interpolate.NearestNeighborInterpolator"><code class="xref py py-class docutils literal"><span class="pre">NearestNeighborInterpolator</span></code></a><a class="headerlink" href="#nearestneighborinterpolator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.interpolate.NearestNeighborInterpolator">
<em class="property">class </em><code class="descclassname">dipy.reconst.interpolate.</code><code class="descname">NearestNeighborInterpolator</code><span class="sig-paren">(</span><em>data</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.NearestNeighborInterpolator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.interpolate.Interpolator" title="dipy.reconst.interpolate.Interpolator"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.interpolate.Interpolator</span></code></a></p>
<p>Interpolates data using nearest neighbor interpolation</p>
<dl class="method">
<dt id="dipy.reconst.interpolate.NearestNeighborInterpolator.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.NearestNeighborInterpolator.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="outsideimage">
<h3><a class="reference internal" href="#dipy.reconst.interpolate.OutsideImage" title="dipy.reconst.interpolate.OutsideImage"><code class="xref py py-class docutils literal"><span class="pre">OutsideImage</span></code></a><a class="headerlink" href="#outsideimage" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.interpolate.OutsideImage">
<em class="property">class </em><code class="descclassname">dipy.reconst.interpolate.</code><code class="descname">OutsideImage</code><a class="headerlink" href="#dipy.reconst.interpolate.OutsideImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.Exception" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></a></p>
<dl class="method">
<dt id="dipy.reconst.interpolate.OutsideImage.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.OutsideImage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="trilinearinterpolator">
<h3><a class="reference internal" href="#dipy.reconst.interpolate.TriLinearInterpolator" title="dipy.reconst.interpolate.TriLinearInterpolator"><code class="xref py py-class docutils literal"><span class="pre">TriLinearInterpolator</span></code></a><a class="headerlink" href="#trilinearinterpolator" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.interpolate.TriLinearInterpolator">
<em class="property">class </em><code class="descclassname">dipy.reconst.interpolate.</code><code class="descname">TriLinearInterpolator</code><span class="sig-paren">(</span><em>data</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.TriLinearInterpolator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.interpolate.Interpolator" title="dipy.reconst.interpolate.Interpolator"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.interpolate.Interpolator</span></code></a></p>
<p>Interpolates data using trilinear interpolation</p>
<p>interpolate 4d diffusion volume using 3 indices, ie data[x, y, z]</p>
<dl class="method">
<dt id="dipy.reconst.interpolate.TriLinearInterpolator.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>voxel_size</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.TriLinearInterpolator.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="array">
<h3>array<a class="headerlink" href="#array" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.interpolate.array">
<code class="descclassname">dipy.reconst.interpolate.</code><code class="descname">array</code><span class="sig-paren">(</span><em>object</em>, <em>dtype=None</em>, <em>copy=True</em>, <em>order=None</em>, <em>subok=False</em>, <em>ndmin=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.array" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>object</strong> : array_like</p>
<blockquote>
<div><p>An array, any object exposing the array interface, an
object whose __array__ method returns an array, or any
(nested) sequence.</p>
</div></blockquote>
<p><strong>dtype</strong> : data-type, optional</p>
<blockquote>
<div><p>The desired data-type for the array.  If not given, then
the type will be determined as the minimum type required
to hold the objects in the sequence.  This argument can only
be used to &#8216;upcast&#8217; the array.  For downcasting, use the
.astype(t) method.</p>
</div></blockquote>
<p><strong>copy</strong> : bool, optional</p>
<blockquote>
<div><p>If true (default), then the object is copied.  Otherwise, a copy
will only be made if __array__ returns a copy, if obj is a
nested sequence, or if a copy is needed to satisfy any of the other
requirements (<cite>dtype</cite>, <cite>order</cite>, etc.).</p>
</div></blockquote>
<p><strong>order</strong> : {&#8216;C&#8217;, &#8216;F&#8217;, &#8216;A&#8217;}, optional</p>
<blockquote>
<div><p>Specify the order of the array.  If order is &#8216;C&#8217;, then the array
will be in C-contiguous order (last-index varies the fastest).
If order is &#8216;F&#8217;, then the returned array will be in
Fortran-contiguous order (first-index varies the fastest).
If order is &#8216;A&#8217; (default), then the returned array may be
in any order (either C-, Fortran-contiguous, or even discontiguous),
unless a copy is required, in which case it will be C-contiguous.</p>
</div></blockquote>
<p><strong>subok</strong> : bool, optional</p>
<blockquote>
<div><p>If True, then sub-classes will be passed-through, otherwise
the returned array will be forced to be a base-class array (default).</p>
</div></blockquote>
<p><strong>ndmin</strong> : int, optional</p>
<blockquote>
<div><p>Specifies the minimum number of dimensions that the resulting
array should have.  Ones will be pre-pended to the shape as
needed to meet this requirement.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : ndarray</p>
<blockquote class="last">
<div><p>An array object satisfying the specified requirements.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">empty</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">empty_like</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">zeros</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">zeros_like</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">ones</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">ones_like</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">fill</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([1, 2, 3])</span>
</pre></div>
</div>
<p>Upcasting:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">])</span>
<span class="go">array([ 1.,  2.,  3.])</span>
</pre></div>
</div>
<p>More than one dimension:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="go">array([[1, 2],</span>
<span class="go">       [3, 4]])</span>
</pre></div>
</div>
<p>Minimum dimensions 2:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([[1, 2, 3]])</span>
</pre></div>
</div>
<p>Type provided:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
<span class="go">array([ 1.+0.j,  2.+0.j,  3.+0.j])</span>
</pre></div>
</div>
<p>Data-type consisting of more than one element:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)],</span><span class="n">dtype</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;i4&#39;</span><span class="p">),(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;&lt;i4&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">array([1, 3])</span>
</pre></div>
</div>
<p>Creating an array from sub-classes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="s1">&#39;1 2; 3 4&#39;</span><span class="p">))</span>
<span class="go">array([[1, 2],</span>
<span class="go">       [3, 4]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mat</span><span class="p">(</span><span class="s1">&#39;1 2; 3 4&#39;</span><span class="p">),</span> <span class="n">subok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">matrix([[1, 2],</span>
<span class="go">        [3, 4]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="trilinear-interp">
<h3>trilinear_interp<a class="headerlink" href="#trilinear-interp" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.interpolate.trilinear_interp">
<code class="descclassname">dipy.reconst.interpolate.</code><code class="descname">trilinear_interp</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.interpolate.trilinear_interp" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates data at index</p>
<p>Interpolates data from a 4d volume, first 3 dimensions are x, y, z the
last dimension holds data.</p>
</dd></dl>

</div>
<div class="section" id="mapmrifit">
<h3><code class="xref py py-class docutils literal"><span class="pre">MapmriFit</span></code><a class="headerlink" href="#mapmrifit" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmrimodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">MapmriModel</span></code><a class="headerlink" href="#mapmrimodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id55">
<h3><code class="xref py py-class docutils literal"><span class="pre">ReconstFit</span></code><a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id56">
<h3><code class="xref py py-class docutils literal"><span class="pre">ReconstModel</span></code><a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="b-mat">
<h3>b_mat<a class="headerlink" href="#b-mat" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="create-rspace">
<h3>create_rspace<a class="headerlink" href="#create-rspace" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="factorial">
<h3>factorial<a class="headerlink" href="#factorial" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="factorial2">
<h3>factorial2<a class="headerlink" href="#factorial2" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id57">
<h3>gradient_table<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="hermite">
<h3>hermite<a class="headerlink" href="#hermite" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-eap">
<h3>mapmri_EAP<a class="headerlink" href="#mapmri-eap" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-index-matrix">
<h3>mapmri_index_matrix<a class="headerlink" href="#mapmri-index-matrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-odf-matrix">
<h3>mapmri_odf_matrix<a class="headerlink" href="#mapmri-odf-matrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-phi-1d">
<h3>mapmri_phi_1d<a class="headerlink" href="#mapmri-phi-1d" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-phi-3d">
<h3>mapmri_phi_3d<a class="headerlink" href="#mapmri-phi-3d" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-phi-matrix">
<h3>mapmri_phi_matrix<a class="headerlink" href="#mapmri-phi-matrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-psi-1d">
<h3>mapmri_psi_1d<a class="headerlink" href="#mapmri-psi-1d" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-psi-3d">
<h3>mapmri_psi_3d<a class="headerlink" href="#mapmri-psi-3d" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="mapmri-psi-matrix">
<h3>mapmri_psi_matrix<a class="headerlink" href="#mapmri-psi-matrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id58">
<h3>multi_voxel_fit<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="optional-package">
<h3>optional_package<a class="headerlink" href="#optional-package" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="warn">
<h3>warn<a class="headerlink" href="#warn" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="callablearray">
<h3><a class="reference internal" href="dipy.reconst.multi_voxel.html#dipy.reconst.multi_voxel.CallableArray" title="dipy.reconst.multi_voxel.CallableArray"><code class="xref py py-class docutils literal"><span class="pre">CallableArray</span></code></a><a class="headerlink" href="#callablearray" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.multi_voxel.CallableArray">
<em class="property">class </em><code class="descclassname">dipy.reconst.multi_voxel.</code><code class="descname">CallableArray</code><a class="headerlink" href="#dipy.reconst.multi_voxel.CallableArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></code></p>
<p>An array which can be called like a function</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">__call__</span></code>(*args,&nbsp;**kwargs)</td>
<td></td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">all</span></code>([axis,&nbsp;out,&nbsp;keepdims])</td>
<td>Returns True if all elements evaluate to True.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">any</span></code>([axis,&nbsp;out,&nbsp;keepdims])</td>
<td>Returns True if any of the elements of <cite>a</cite> evaluate to True.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">argmax</span></code>([axis,&nbsp;out])</td>
<td>Return indices of the maximum values along the given axis.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">argmin</span></code>([axis,&nbsp;out])</td>
<td>Return indices of the minimum values along the given axis of <cite>a</cite>.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">argpartition</span></code>(kth[,&nbsp;axis,&nbsp;kind,&nbsp;order])</td>
<td>Returns the indices that would partition this array.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">argsort</span></code>([axis,&nbsp;kind,&nbsp;order])</td>
<td>Returns the indices that would sort this array.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">astype</span></code>(dtype[,&nbsp;order,&nbsp;casting,&nbsp;subok,&nbsp;copy])</td>
<td>Copy of the array, cast to a specified type.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">byteswap</span></code>(inplace)</td>
<td>Swap the bytes of the array elements</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">choose</span></code>(choices[,&nbsp;out,&nbsp;mode])</td>
<td>Use an index array to construct a new array from a set of choices.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">clip</span></code>([min,&nbsp;max,&nbsp;out])</td>
<td>Return an array whose values are limited to <code class="docutils literal"><span class="pre">[min,</span> <span class="pre">max]</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">compress</span></code>(condition[,&nbsp;axis,&nbsp;out])</td>
<td>Return selected slices of this array along given axis.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">conj</span></code>()</td>
<td>Complex-conjugate all elements.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">conjugate</span></code>()</td>
<td>Return the complex conjugate, element-wise.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">copy</span></code>([order])</td>
<td>Return a copy of the array.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">cumprod</span></code>([axis,&nbsp;dtype,&nbsp;out])</td>
<td>Return the cumulative product of the elements along the given axis.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cumsum</span></code>([axis,&nbsp;dtype,&nbsp;out])</td>
<td>Return the cumulative sum of the elements along the given axis.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">diagonal</span></code>([offset,&nbsp;axis1,&nbsp;axis2])</td>
<td>Return specified diagonals.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">dot</span></code>(b[,&nbsp;out])</td>
<td>Dot product of two arrays.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">dump</span></code>(file)</td>
<td>Dump a pickle of the array to the specified file.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">dumps</span></code>()</td>
<td>Returns the pickle of the array as a string.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">fill</span></code>(value)</td>
<td>Fill the array with a scalar value.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">flatten</span></code>([order])</td>
<td>Return a copy of the array collapsed into one dimension.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">getfield</span></code>(dtype[,&nbsp;offset])</td>
<td>Returns a field of the given array as a certain type.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">item</span></code>(*args)</td>
<td>Copy an element of an array to a standard Python scalar and return it.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">itemset</span></code>(*args)</td>
<td>Insert scalar into an array (scalar is cast to array&#8217;s dtype, if possible)</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">max</span></code>([axis,&nbsp;out])</td>
<td>Return the maximum along a given axis.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">mean</span></code>([axis,&nbsp;dtype,&nbsp;out,&nbsp;keepdims])</td>
<td>Returns the average of the array elements along given axis.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">min</span></code>([axis,&nbsp;out,&nbsp;keepdims])</td>
<td>Return the minimum along a given axis.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">newbyteorder</span></code>([new_order])</td>
<td>Return the array with the same data viewed with a different byte order.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">nonzero</span></code>()</td>
<td>Return the indices of the elements that are non-zero.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">partition</span></code>(kth[,&nbsp;axis,&nbsp;kind,&nbsp;order])</td>
<td>Rearranges the elements in the array in such a way that value of the element in kth position is in the position it would be in a sorted array.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">prod</span></code>([axis,&nbsp;dtype,&nbsp;out,&nbsp;keepdims])</td>
<td>Return the product of the array elements over the given axis</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ptp</span></code>([axis,&nbsp;out])</td>
<td>Peak to peak (maximum - minimum) value along a given axis.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">put</span></code>(indices,&nbsp;values[,&nbsp;mode])</td>
<td>Set <code class="docutils literal"><span class="pre">a.flat[n]</span> <span class="pre">=</span> <span class="pre">values[n]</span></code> for all <cite>n</cite> in indices.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">ravel</span></code>([order])</td>
<td>Return a flattened array.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">repeat</span></code>(repeats[,&nbsp;axis])</td>
<td>Repeat elements of an array.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">reshape</span></code>(shape[,&nbsp;order])</td>
<td>Returns an array containing the same data with a new shape.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">resize</span></code>(new_shape[,&nbsp;refcheck])</td>
<td>Change shape and size of array in-place.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">round</span></code>([decimals,&nbsp;out])</td>
<td>Return <cite>a</cite> with each element rounded to the given number of decimals.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">searchsorted</span></code>(v[,&nbsp;side,&nbsp;sorter])</td>
<td>Find indices where elements of v should be inserted in a to maintain order.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">setfield</span></code>(val,&nbsp;dtype[,&nbsp;offset])</td>
<td>Put a value into a specified place in a field defined by a data-type.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">setflags</span></code>([write,&nbsp;align,&nbsp;uic])</td>
<td>Set array flags WRITEABLE, ALIGNED, and UPDATEIFCOPY, respectively.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">sort</span></code>([axis,&nbsp;kind,&nbsp;order])</td>
<td>Sort an array, in-place.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">squeeze</span></code>([axis])</td>
<td>Remove single-dimensional entries from the shape of <cite>a</cite>.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">std</span></code>([axis,&nbsp;dtype,&nbsp;out,&nbsp;ddof,&nbsp;keepdims])</td>
<td>Returns the standard deviation of the array elements along given axis.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">sum</span></code>([axis,&nbsp;dtype,&nbsp;out,&nbsp;keepdims])</td>
<td>Return the sum of the array elements over the given axis.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">swapaxes</span></code>(axis1,&nbsp;axis2)</td>
<td>Return a view of the array with <cite>axis1</cite> and <cite>axis2</cite> interchanged.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">take</span></code>(indices[,&nbsp;axis,&nbsp;out,&nbsp;mode])</td>
<td>Return an array formed from the elements of <cite>a</cite> at the given indices.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">tobytes</span></code>([order])</td>
<td>Construct Python bytes containing the raw data bytes in the array.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">tofile</span></code>(fid[,&nbsp;sep,&nbsp;format])</td>
<td>Write array to a file as text or binary (default).</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">tolist</span></code>()</td>
<td>Return the array as a (possibly nested) list.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">tostring</span></code>([order])</td>
<td>Construct Python bytes containing the raw data bytes in the array.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">trace</span></code>([offset,&nbsp;axis1,&nbsp;axis2,&nbsp;dtype,&nbsp;out])</td>
<td>Return the sum along diagonals of the array.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">transpose</span></code>(*axes)</td>
<td>Returns a view of the array with axes transposed.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">var</span></code>([axis,&nbsp;dtype,&nbsp;out,&nbsp;ddof,&nbsp;keepdims])</td>
<td>Returns the variance of the array elements, along given axis.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">view</span></code>([dtype,&nbsp;type])</td>
<td>New view of array with the same data.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.multi_voxel.CallableArray.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.multi_voxel.CallableArray.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="multivoxelfit">
<h3><a class="reference internal" href="dipy.reconst.multi_voxel.html#dipy.reconst.multi_voxel.MultiVoxelFit" title="dipy.reconst.multi_voxel.MultiVoxelFit"><code class="xref py py-class docutils literal"><span class="pre">MultiVoxelFit</span></code></a><a class="headerlink" href="#multivoxelfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.multi_voxel.MultiVoxelFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.multi_voxel.</code><code class="descname">MultiVoxelFit</code><span class="sig-paren">(</span><em>model</em>, <em>fit_array</em>, <em>mask</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.multi_voxel.MultiVoxelFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Holds an array of fits and allows access to their attributes and
methods</p>
<dl class="method">
<dt id="dipy.reconst.multi_voxel.MultiVoxelFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>fit_array</em>, <em>mask</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.multi_voxel.MultiVoxelFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.multi_voxel.MultiVoxelFit.shape">
<code class="descname">shape</code><a class="headerlink" href="#dipy.reconst.multi_voxel.MultiVoxelFit.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="id59">
<h3><code class="xref py py-class docutils literal"><span class="pre">ReconstFit</span></code><a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="as-strided">
<h3>as_strided<a class="headerlink" href="#as-strided" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.multi_voxel.as_strided">
<code class="descclassname">dipy.reconst.multi_voxel.</code><code class="descname">as_strided</code><span class="sig-paren">(</span><em>x</em>, <em>shape=None</em>, <em>strides=None</em>, <em>subok=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.multi_voxel.as_strided" title="Permalink to this definition">¶</a></dt>
<dd><p>Make an ndarray from the given array with the given shape and strides.</p>
</dd></dl>

</div>
<div class="section" id="id60">
<h3>multi_voxel_fit<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id61">
<h3>ndindex<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.multi_voxel.ndindex">
<code class="descclassname">dipy.reconst.multi_voxel.</code><code class="descname">ndindex</code><span class="sig-paren">(</span><em>shape</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.multi_voxel.ndindex" title="Permalink to this definition">¶</a></dt>
<dd><p>An N-dimensional iterator object to index arrays.</p>
<p>Given the shape of an array, an <cite>ndindex</cite> instance iterates over
the N-dimensional index of the array. At each iteration a tuple
of indices is returned; the last dimension is iterated over first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple of ints</p>
<blockquote class="last">
<div><p>The dimensions of the array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.core.ndindex</span> <span class="kn">import</span> <span class="n">ndindex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">ndindex</span><span class="p">(</span><span class="n">shape</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">index</span>
<span class="go">(0, 0, 0)</span>
<span class="go">(0, 1, 0)</span>
<span class="go">(1, 0, 0)</span>
<span class="go">(1, 1, 0)</span>
<span class="go">(2, 0, 0)</span>
<span class="go">(2, 1, 0)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id62">
<h3><a class="reference internal" href="#dipy.reconst.odf.OdfFit" title="dipy.reconst.odf.OdfFit"><code class="xref py py-class docutils literal"><span class="pre">OdfFit</span></code></a><a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.odf.OdfFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.odf.</code><code class="descname">OdfFit</code><a class="headerlink" href="#dipy.reconst.odf.OdfFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.odf.OdfFit.odf" title="dipy.reconst.odf.OdfFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>To be implemented but specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.odf.OdfFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.odf.OdfFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.odf.OdfFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.odf.OdfFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented but specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id63">
<h3><a class="reference internal" href="dipy.reconst.odf.html#dipy.reconst.odf.OdfModel" title="dipy.reconst.odf.OdfModel"><code class="xref py py-class docutils literal"><span class="pre">OdfModel</span></code></a><a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.odf.OdfModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.odf.</code><code class="descname">OdfModel</code><a class="headerlink" href="#dipy.reconst.odf.OdfModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>An abstract class to be sub-classed by specific odf models</p>
<p>All odf models should provide a fit method which may take data as it&#8217;s
first and only argument.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.odf.html#dipy.reconst.odf.OdfModel.fit" title="dipy.reconst.odf.OdfModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data)</td>
<td>To be implemented by specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.odf.OdfModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.odf.OdfModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.odf.OdfModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.odf.OdfModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented by specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id64">
<h3><code class="xref py py-class docutils literal"><span class="pre">ReconstFit</span></code><a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id65">
<h3><code class="xref py py-class docutils literal"><span class="pre">ReconstModel</span></code><a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id66">
<h3>gfa<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.odf.gfa">
<code class="descclassname">dipy.reconst.odf.</code><code class="descname">gfa</code><span class="sig-paren">(</span><em>samples</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.odf.gfa" title="Permalink to this definition">¶</a></dt>
<dd><p>The general fractional anisotropy of a function evaluated on the unit sphere</p>
</dd></dl>

</div>
<div class="section" id="minmax-normalize">
<h3>minmax_normalize<a class="headerlink" href="#minmax-normalize" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="hemisphere">
<h3><code class="xref py py-class docutils literal"><span class="pre">HemiSphere</span></code><a class="headerlink" href="#hemisphere" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="intemporarydirectory">
<h3><code class="xref py py-class docutils literal"><span class="pre">InTemporaryDirectory</span></code><a class="headerlink" href="#intemporarydirectory" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="peaksandmetrics">
<h3><code class="xref py py-class docutils literal"><span class="pre">PeaksAndMetrics</span></code><a class="headerlink" href="#peaksandmetrics" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="peaksandmetricsdirectiongetter">
<h3><code class="xref py py-class docutils literal"><span class="pre">PeaksAndMetricsDirectionGetter</span></code><a class="headerlink" href="#peaksandmetricsdirectiongetter" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id67">
<h3><code class="xref py py-class docutils literal"><span class="pre">Sphere</span></code><a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="repeat">
<h3><code class="xref py py-class docutils literal"><span class="pre">repeat</span></code><a class="headerlink" href="#repeat" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="xrange">
<h3><code class="xref py py-class docutils literal"><span class="pre">xrange</span></code><a class="headerlink" href="#xrange" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="pool">
<h3>Pool<a class="headerlink" href="#pool" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="cpu-count">
<h3>cpu_count<a class="headerlink" href="#cpu-count" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id68">
<h3>gfa<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id69">
<h3>local_maxima<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id70">
<h3>ndindex<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="peak-directions">
<h3>peak_directions<a class="headerlink" href="#peak-directions" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="peak-directions-nl">
<h3>peak_directions_nl<a class="headerlink" href="#peak-directions-nl" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id71">
<h3>peaks_from_model<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id72">
<h3>remove_similar_vertices<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="reshape-peaks-for-visualization">
<h3>reshape_peaks_for_visualization<a class="headerlink" href="#reshape-peaks-for-visualization" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="search-descending">
<h3>search_descending<a class="headerlink" href="#search-descending" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sh-to-sf-matrix">
<h3>sh_to_sf_matrix<a class="headerlink" href="#sh-to-sf-matrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id73">
<h3>warn<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id74">
<h3><a class="reference internal" href="#dipy.reconst.sfm.Cache" title="dipy.reconst.sfm.Cache"><code class="xref py py-class docutils literal"><span class="pre">Cache</span></code></a><a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.Cache">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">Cache</code><a class="headerlink" href="#dipy.reconst.sfm.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Cache values based on a key object (such as a sphere or gradient table).</p>
<p class="rubric">Notes</p>
<p>This class is meant to be used as a mix-in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">Cache</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelFit</span><span class="p">(</span><span class="n">Fit</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Inside a method on the fit, typical usage would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">odf</span><span class="p">(</span><span class="n">sphere</span><span class="p">):</span>
    <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">M</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_basis_matrix</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.Cache.cache_clear" title="dipy.reconst.sfm.Cache.cache_clear"><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code></a>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.Cache.cache_get" title="dipy.reconst.sfm.Cache.cache_get"><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code></a>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.Cache.cache_set" title="dipy.reconst.sfm.Cache.cache_set"><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code></a>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.Cache.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.Cache.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.Cache.cache_clear">
<code class="descname">cache_clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.Cache.cache_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.Cache.cache_get">
<code class="descname">cache_get</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.Cache.cache_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>default</strong> : object</p>
<blockquote>
<div><p>Value to be returned if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>v</strong> : object</p>
<blockquote class="last">
<div><p>Value from the cache associated with <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.  Returns
<cite>default</cite> if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.Cache.cache_set">
<code class="descname">cache_set</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.Cache.cache_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a value in the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>value</strong> : object</p>
<blockquote class="last">
<div><p>Value stored in the cache for each unique combination
of <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Imagine the following computation is very expensive</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">X1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="ow">is</span> <span class="n">X2</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exponentialisotropicfit">
<h3><a class="reference internal" href="#dipy.reconst.sfm.ExponentialIsotropicFit" title="dipy.reconst.sfm.ExponentialIsotropicFit"><code class="xref py py-class docutils literal"><span class="pre">ExponentialIsotropicFit</span></code></a><a class="headerlink" href="#exponentialisotropicfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.ExponentialIsotropicFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">ExponentialIsotropicFit</code><span class="sig-paren">(</span><em>model</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ExponentialIsotropicFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.sfm.IsotropicFit" title="dipy.reconst.sfm.IsotropicFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.sfm.IsotropicFit</span></code></a></p>
<p>A fit to the ExponentialIsotropicModel object, based on data.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.ExponentialIsotropicFit.predict" title="dipy.reconst.sfm.ExponentialIsotropicFit.predict"><code class="xref py py-obj docutils literal"><span class="pre">predict</span></code></a>([gtab])</td>
<td>Predict the isotropic signal, based on a gradient table.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.ExponentialIsotropicFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ExponentialIsotropicFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an IsotropicFit object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : IsotropicModel class instance</p>
<p><strong>params</strong> : ndarray</p>
<blockquote>
<div><p>The mean isotropic model parameters (the mean diffusion-weighted
signal in each voxel).</p>
</div></blockquote>
<p><strong>n_vox</strong> : int</p>
<blockquote class="last">
<div><p>The number of voxels for which the fit was done.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.ExponentialIsotropicFit.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>gtab=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ExponentialIsotropicFit.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the isotropic signal, based on a gradient table. In this case,
the prediction will be for an exponential decay with the mean
diffusivity derived from the data that was fit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : a GradientTable class instance (optional)</p>
<blockquote class="last">
<div><p>Defaults to use the gtab from the IsotropicModel from which this
fit was derived.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exponentialisotropicmodel">
<h3><a class="reference internal" href="#dipy.reconst.sfm.ExponentialIsotropicModel" title="dipy.reconst.sfm.ExponentialIsotropicModel"><code class="xref py py-class docutils literal"><span class="pre">ExponentialIsotropicModel</span></code></a><a class="headerlink" href="#exponentialisotropicmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.ExponentialIsotropicModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">ExponentialIsotropicModel</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ExponentialIsotropicModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.sfm.IsotropicModel" title="dipy.reconst.sfm.IsotropicModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.sfm.IsotropicModel</span></code></a></p>
<p>Representing the isotropic signal as a fit to an exponential decay function
with b-values</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.ExponentialIsotropicModel.fit" title="dipy.reconst.sfm.ExponentialIsotropicModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data)</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_directions</span></code>(sig)</td>
<td>returns Nx3 array of unit vectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.ExponentialIsotropicModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ExponentialIsotropicModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an IsotropicModel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>gtab</strong> : a GradientTable class instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.ExponentialIsotropicModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ExponentialIsotropicModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> : ndarray</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>ExponentialIsotropicFit class instance.</strong> :</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="isotropicfit">
<h3><a class="reference internal" href="#dipy.reconst.sfm.IsotropicFit" title="dipy.reconst.sfm.IsotropicFit"><code class="xref py py-class docutils literal"><span class="pre">IsotropicFit</span></code></a><a class="headerlink" href="#isotropicfit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.IsotropicFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">IsotropicFit</code><span class="sig-paren">(</span><em>model</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.IsotropicFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.base.ReconstFit" title="dipy.reconst.base.ReconstFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.base.ReconstFit</span></code></a></p>
<p>A fit object for representing the isotropic signal as the mean of the
diffusion-weighted signal.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.IsotropicFit.predict" title="dipy.reconst.sfm.IsotropicFit.predict"><code class="xref py py-obj docutils literal"><span class="pre">predict</span></code></a>([gtab])</td>
<td>Predict the isotropic signal.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.IsotropicFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>params</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.IsotropicFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an IsotropicFit object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : IsotropicModel class instance</p>
<p><strong>params</strong> : ndarray</p>
<blockquote>
<div><p>The mean isotropic model parameters (the mean diffusion-weighted
signal in each voxel).</p>
</div></blockquote>
<p><strong>n_vox</strong> : int</p>
<blockquote class="last">
<div><p>The number of voxels for which the fit was done.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.IsotropicFit.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>gtab=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.IsotropicFit.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the isotropic signal.</p>
<p>Based on a gradient table. In this case, the (naive!) prediction will
be the mean of the diffusion-weighted signal in the voxels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : a GradientTable class instance (optional)</p>
<blockquote class="last">
<div><p>Defaults to use the gtab from the IsotropicModel from which this
fit was derived.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="isotropicmodel">
<h3><a class="reference internal" href="#dipy.reconst.sfm.IsotropicModel" title="dipy.reconst.sfm.IsotropicModel"><code class="xref py py-class docutils literal"><span class="pre">IsotropicModel</span></code></a><a class="headerlink" href="#isotropicmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.IsotropicModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">IsotropicModel</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.IsotropicModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.base.ReconstModel</span></code></a></p>
<p>A base-class for the representation of isotropic signals.</p>
<p>The default behavior, suitable for single b-value data is to calculate the
mean in each voxel as an estimate of the signal that does not depend on
direction.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.IsotropicModel.fit" title="dipy.reconst.sfm.IsotropicModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data)</td>
<td>Fit an IsotropicModel.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_directions</span></code>(sig)</td>
<td>returns Nx3 array of unit vectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.IsotropicModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.IsotropicModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an IsotropicModel.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>gtab</strong> : a GradientTable class instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.IsotropicModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.IsotropicModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit an IsotropicModel.</p>
<p>This boils down to finding the mean diffusion-weighted signal in each
voxel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> : ndarray</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>IsotropicFit class instance.</strong> :</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id75">
<h3><a class="reference internal" href="#dipy.reconst.sfm.ReconstFit" title="dipy.reconst.sfm.ReconstFit"><code class="xref py py-class docutils literal"><span class="pre">ReconstFit</span></code></a><a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.ReconstFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">ReconstFit</code><a class="headerlink" href="#dipy.reconst.sfm.ReconstFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract class which holds the fit result of ReconstModel</p>
<p>For example that could be holding FA or GFA etc.</p>
<dl class="method">
<dt id="dipy.reconst.sfm.ReconstFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ReconstFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id76">
<h3><a class="reference internal" href="#dipy.reconst.sfm.ReconstModel" title="dipy.reconst.sfm.ReconstModel"><code class="xref py py-class docutils literal"><span class="pre">ReconstModel</span></code></a><a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.ReconstModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">ReconstModel</code><a class="headerlink" href="#dipy.reconst.sfm.ReconstModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Abstract class for signal reconstruction models</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.ReconstModel.fit" title="dipy.reconst.sfm.ReconstModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.ReconstModel.get_directions" title="dipy.reconst.sfm.ReconstModel.get_directions"><code class="xref py py-obj docutils literal"><span class="pre">get_directions</span></code></a>(sig)</td>
<td>returns Nx3 array of unit vectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.ReconstModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ReconstModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.ReconstModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ReconstModel.fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.ReconstModel.get_directions">
<code class="descname">get_directions</code><span class="sig-paren">(</span><em>sig</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.ReconstModel.get_directions" title="Permalink to this definition">¶</a></dt>
<dd><p>returns Nx3 array of unit vectors</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sparsefasciclefit">
<h3><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleFit" title="dipy.reconst.sfm.SparseFascicleFit"><code class="xref py py-class docutils literal"><span class="pre">SparseFascicleFit</span></code></a><a class="headerlink" href="#sparsefasciclefit" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.SparseFascicleFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">SparseFascicleFit</code><span class="sig-paren">(</span><em>model</em>, <em>beta</em>, <em>S0</em>, <em>iso</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.base.ReconstFit" title="dipy.reconst.base.ReconstFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.base.ReconstFit</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleFit.odf" title="dipy.reconst.sfm.SparseFascicleFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>The orientation distribution function of the SFM</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleFit.predict" title="dipy.reconst.sfm.SparseFascicleFit.predict"><code class="xref py py-obj docutils literal"><span class="pre">predict</span></code></a>([gtab,&nbsp;response,&nbsp;S0])</td>
<td>Predict the signal based on the SFM parameters</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.SparseFascicleFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>beta</em>, <em>S0</em>, <em>iso</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initalize a SparseFascicleFit class instance</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>model</strong> : a SparseFascicleModel object.</p>
<p><strong>beta</strong> : ndarray</p>
<blockquote>
<div><p>The parameters of fit to data.</p>
</div></blockquote>
<p><strong>S0</strong> : ndarray</p>
<blockquote>
<div><p>The mean non-diffusion-weighted signal.</p>
</div></blockquote>
<p><strong>iso</strong> : IsotropicFit class instance</p>
<blockquote class="last">
<div><p>A representation of the isotropic signal, together with parameters
of the isotropic signal in each voxel, that is capable of
deriving/predicting an isotropic signal, based on a gradient-table.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.SparseFascicleFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>The orientation distribution function of the SFM</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sphere</strong> : Sphere</p>
<blockquote>
<div><p>The points in which the ODF is evaluated</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>odf</strong> :  ndarray of shape (x, y, z, sphere.vertices.shape[0])</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.SparseFascicleFit.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>gtab=None</em>, <em>response=None</em>, <em>S0=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleFit.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the signal based on the SFM parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable, optional</p>
<blockquote>
<div><p>The bvecs/bvals to predict the signal on. Default: the gtab from
the model object.</p>
</div></blockquote>
<p><strong>response</strong> : list of 3 elements, optional</p>
<blockquote>
<div><p>The eigenvalues of a tensor which will serve as a kernel
function. Default: the response of the model object. Default to use
<cite>model.response</cite>.</p>
</div></blockquote>
<p><strong>S0</strong> : float or array, optional</p>
<blockquote>
<div><p>The non-diffusion-weighted signal. Default: use the S0 of the data</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pred_sig</strong> : ndarray</p>
<blockquote class="last">
<div><p>The signal predicted in each voxel/direction</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sparsefasciclemodel">
<h3><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleModel" title="dipy.reconst.sfm.SparseFascicleModel"><code class="xref py py-class docutils literal"><span class="pre">SparseFascicleModel</span></code></a><a class="headerlink" href="#sparsefasciclemodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.sfm.SparseFascicleModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.sfm.</code><code class="descname">SparseFascicleModel</code><span class="sig-paren">(</span><em>gtab, sphere=None, response=[0.0015, 0.0005, 0.0005], solver='ElasticNet', l1_ratio=0.5, alpha=0.001, isotropic=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.base.ReconstModel" title="dipy.reconst.base.ReconstModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.base.ReconstModel</span></code></a>, <a class="reference internal" href="#dipy.reconst.cache.Cache" title="dipy.reconst.cache.Cache"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.cache.Cache</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleModel.design_matrix" title="dipy.reconst.sfm.SparseFascicleModel.design_matrix"><code class="xref py py-obj docutils literal"><span class="pre">design_matrix</span></code></a>()</td>
<td>The design matrix for a SFM.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.sfm.SparseFascicleModel.fit" title="dipy.reconst.sfm.SparseFascicleModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td>Fit the SparseFascicleModel object to data.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">get_directions</span></code>(sig)</td>
<td>returns Nx3 array of unit vectors</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.sfm.SparseFascicleModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab, sphere=None, response=[0.0015, 0.0005, 0.0005], solver='ElasticNet', l1_ratio=0.5, alpha=0.001, isotropic=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a Sparse Fascicle Model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable class instance</p>
<p><strong>sphere</strong> : Sphere class instance, optional</p>
<blockquote>
<div><p>A sphere on which coefficients will be estimated. Default:</p>
</div></blockquote>
<p><strong>symmetric sphere with 362 points (from :mod:`dipy.data`).</strong> :</p>
<p><strong>response</strong> : (3,) array-like, optional</p>
<blockquote>
<div><p>The eigenvalues of a canonical tensor to be used as the response
function of single-fascicle signals.
Default:[0.0015, 0.0005, 0.0005]</p>
</div></blockquote>
<p><strong>solver</strong> : string, dipy.core.optimize.SKLearnLinearSolver object, or sklearn.linear_model.base.LinearModel object, optional.</p>
<blockquote>
<div><p>This will determine the algorithm used to solve the set of linear
equations underlying this model. If it is a string it needs to be
one of the following: {&#8216;ElasticNet&#8217;, &#8216;NNLS&#8217;}. Otherwise, it can be
an object that inherits from <cite>dipy.optimize.SKLearnLinearSolver</cite>.
Default: &#8216;ElasticNet&#8217;.</p>
</div></blockquote>
<p><strong>l1_ratio</strong> : float, optional</p>
<blockquote>
<div><p>Sets the balance betwee L1 and L2 regularization in ElasticNet
<a class="reference internal" href="#zou2005" id="id77">[Zou2005]</a>. Default: 0.5</p>
</div></blockquote>
<p><strong>alpha</strong> : float, optional</p>
<blockquote>
<div><p>Sets the balance between least-squares error and L1/L2
regularization in ElasticNet <a class="reference internal" href="#zou2005" id="id78">[Zou2005]</a>. Default: 0.001</p>
</div></blockquote>
<p><strong>isotropic</strong> : IsotropicModel class instance</p>
<blockquote class="last">
<div><p>This is a class that implements the function that calculates the
value of the isotropic signal. This is a value of the signal that is
independent of direction, and therefore removed from both sides of
the SFM equation. The default is an instance of IsotropicModel, but
other functions can be inherited from IsotropicModel to implement
other fits to the aspects of the data that depend on b-value, but
not on direction.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This is an implementation of the SFM, described in <a class="reference internal" href="#id83" id="id79">[Rokem2015]</a>.</p>
<table class="docutils citation" frame="void" id="id80" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Rokem2014]</td><td>Ariel Rokem, Jason D. Yeatman, Franco Pestilli, Kendrick
N. Kay, Aviv Mezer, Stefan van der Walt, Brian A. Wandell
(2014). Evaluating the accuracy of diffusion MRI models in white
matter. PLoS ONE 10(4): e0123272. doi:10.1371/journal.pone.0123272</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="zou2005" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Zou2005]</td><td><em>(<a class="fn-backref" href="#id77">1</a>, <a class="fn-backref" href="#id78">2</a>)</em> Zou H, Hastie T (2005). Regularization and variable
selection via the elastic net. J R Stat Soc B:301-320</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.SparseFascicleModel.design_matrix">
<code class="descname">design_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleModel.design_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>The design matrix for a SFM.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ndarray</strong> :</p>
<blockquote class="last">
<div><p>The design matrix, where each column is a rotated version of the
response function.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.sfm.SparseFascicleModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.SparseFascicleModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the SparseFascicleModel object to data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : array</p>
<blockquote>
<div><p>The measured signal.</p>
</div></blockquote>
<p><strong>mask</strong> : array, optional</p>
<blockquote>
<div><p>A boolean array used to mark the coordinates in the data that
should be analyzed. Has the shape <cite>data.shape[:-1]</cite>. Default: None,
which implies that all points should be analyzed.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>SparseFascicleFit object</strong> :</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id81">
<h3>auto_attr<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.sfm.auto_attr">
<code class="descclassname">dipy.reconst.sfm.</code><code class="descname">auto_attr</code><span class="sig-paren">(</span><em>func</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.auto_attr" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to create OneTimeProperty attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>func</strong> : method</p>
<blockquote class="last">
<div><p>The method that will be called the first time to compute a value.
Afterwards, the method&#8217;s name will be a standard attribute holding the
value of this computation.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MagicProp</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@auto_attr</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="mi">99</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">MagicProp</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">a</span>
<span class="go">99</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="nanmean">
<h3>nanmean<a class="headerlink" href="#nanmean" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.sfm.nanmean">
<code class="descclassname">dipy.reconst.sfm.</code><code class="descname">nanmean</code><span class="sig-paren">(</span><em>a</em>, <em>axis=None</em>, <em>dtype=None</em>, <em>out=None</em>, <em>keepdims=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.nanmean" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the arithmetic mean along the specified axis, ignoring NaNs.</p>
<p>Returns the average of the array elements.  The average is taken over
the flattened array by default, otherwise over the specified axis.
<cite>float64</cite> intermediate and return values are used for integer inputs.</p>
<p>For all-NaN slices, NaN is returned and a <cite>RuntimeWarning</cite> is raised.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.8.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array_like</p>
<blockquote>
<div><p>Array containing numbers whose mean is desired. If <cite>a</cite> is not an
array, a conversion is attempted.</p>
</div></blockquote>
<p><strong>axis</strong> : int, optional</p>
<blockquote>
<div><p>Axis along which the means are computed. The default is to compute
the mean of the flattened array.</p>
</div></blockquote>
<p><strong>dtype</strong> : data-type, optional</p>
<blockquote>
<div><p>Type to use in computing the mean.  For integer inputs, the default
is <cite>float64</cite>; for inexact inputs, it is the same as the input
dtype.</p>
</div></blockquote>
<p><strong>out</strong> : ndarray, optional</p>
<blockquote>
<div><p>Alternate output array in which to place the result.  The default
is <code class="docutils literal"><span class="pre">None</span></code>; if provided, it must have the same shape as the
expected output, but the type will be cast if necessary.  See
<cite>doc.ufuncs</cite> for details.</p>
</div></blockquote>
<p><strong>keepdims</strong> : bool, optional</p>
<blockquote>
<div><p>If this is set to True, the axes which are reduced are left in the
result as dimensions with size one. With this option, the result
will broadcast correctly against the original <cite>arr</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>m</strong> : ndarray, see dtype parameter above</p>
<blockquote class="last">
<div><p>If <cite>out=None</cite>, returns a new array containing the mean values,
otherwise a reference to the output array is returned. Nan is
returned for slices that contain only NaNs.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">average</span></code></dt>
<dd>Weighted average</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">mean</span></code></dt>
<dd>Arithmetic mean taken while not ignoring NaNs</dd>
</dl>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">var</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">nanvar</span></code></p>
</div>
<p class="rubric">Notes</p>
<p>The arithmetic mean is the sum of the non-NaN elements along the axis
divided by the number of non-NaN elements.</p>
<p>Note that for floating-point input, the mean is computed using the same
precision the input has.  Depending on the input data, this can cause
the results to be inaccurate, especially for <cite>float32</cite>.  Specifying a
higher-precision accumulator using the <cite>dtype</cite> keyword can alleviate
this issue.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">2.6666666666666665</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([ 2.,  4.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([ 1.,  3.5])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id82">
<h3>optional_package<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.sfm.optional_package">
<code class="descclassname">dipy.reconst.sfm.</code><code class="descname">optional_package</code><span class="sig-paren">(</span><em>name</em>, <em>trip_msg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.optional_package" title="Permalink to this definition">¶</a></dt>
<dd><p>Return package-like thing and module setup for package <cite>name</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> : str</p>
<blockquote>
<div><p>package name</p>
</div></blockquote>
<p><strong>trip_msg</strong> : None or str</p>
<blockquote>
<div><p>message to give when someone tries to use the return package, but we
could not import it, and have returned a TripWire object instead.
Default message if None.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pkg_like</strong> : module or <code class="docutils literal"><span class="pre">TripWire</span></code> instance</p>
<blockquote>
<div><p>If we can import the package, return it.  Otherwise return an object
raising an error when accessed</p>
</div></blockquote>
<p><strong>have_pkg</strong> : bool</p>
<blockquote>
<div><p>True if import for package was successful, false otherwise</p>
</div></blockquote>
<p><strong>module_setup</strong> : function</p>
<blockquote class="last">
<div><p>callable usually set as <code class="docutils literal"><span class="pre">setup_module</span></code> in calling namespace, to allow
skipping tests.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="sfm-design-matrix">
<h3>sfm_design_matrix<a class="headerlink" href="#sfm-design-matrix" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.sfm.sfm_design_matrix">
<code class="descclassname">dipy.reconst.sfm.</code><code class="descname">sfm_design_matrix</code><span class="sig-paren">(</span><em>gtab</em>, <em>sphere</em>, <em>response</em>, <em>mode='signal'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.sfm.sfm_design_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the SFM design matrix</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gtab</strong> : GradientTable or Sphere</p>
<blockquote>
<div><p>Sets the rows of the matrix, if the mode is &#8216;signal&#8217;, this should be a
GradientTable. If mode is &#8216;odf&#8217; this should be a Sphere</p>
</div></blockquote>
<p><strong>sphere</strong> : Sphere</p>
<blockquote>
<div><p>Sets the columns of the matrix</p>
</div></blockquote>
<p><strong>response</strong> : list of 3 elements</p>
<blockquote>
<div><p>The eigenvalues of a tensor which will serve as a kernel
function.</p>
</div></blockquote>
<p><strong>mode</strong> : str {&#8216;signal&#8217; | &#8216;odf&#8217;}, optional</p>
<blockquote>
<div><p>Choose the (default) &#8216;signal&#8217; for a design matrix containing predicted
signal in the measurements defined by the gradient table for putative
fascicles oriented along the vertices of the sphere. Otherwise, choose
&#8216;odf&#8217; for an odf convolution matrix, with values of the odf calculated
from a tensor with the provided response eigenvalues, evaluated at the
b-vectors in the gradient table, for the tensors with prinicipal
diffusion directions along the vertices of the sphere.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>mat</strong> : ndarray</p>
<blockquote class="last">
<div><p>A design matrix that can be used for one of the following operations:
when the &#8216;signal&#8217; mode is used, each column contains the putative
signal in each of the bvectors of the <cite>gtab</cite> if a fascicle is oriented
in the direction encoded by the sphere vertex corresponding to this
column. This is used for deconvolution with a measured DWI signal. If
the &#8216;odf&#8217; mode is chosen, each column instead contains the values of
the tensor ODF for a tensor with a principal diffusion direction
corresponding to this vertex. This is used to generate odfs from the
fits of the SFM for the purpose of tracking.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<table class="docutils citation" frame="void" id="id83" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Rokem2015]</td><td>Ariel Rokem, Jason D. Yeatman, Franco Pestilli, Kendrick
N. Kay, Aviv Mezer, Stefan van der Walt, Brian A. Wandell
(2015). Evaluating the accuracy of diffusion MRI models in white
matter. PLoS ONE 10(4): e0123272. doi:10.1371/journal.pone.0123272</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="id84" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Rokem2014]</td><td>Ariel Rokem, Kimberly L. Chan, Jason D. Yeatman, Franco
Pestilli,  Brian A. Wandell (2014). Evaluating the accuracy of diffusion
models at multiple b-values with cross-validation. ISMRM 2014.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="behrens2007" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id86">[Behrens2007]</a></td><td>Behrens TEJ, Berg HJ, Jbabdi S, Rushworth MFS, Woolrich MW
(2007): Probabilistic diffusion tractography with multiple fibre
orientations: What can we gain? Neuroimage 34:144-55.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dipy.data</span> <span class="kn">as</span> <span class="nn">dpd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">gtab</span> <span class="o">=</span> <span class="n">dpd</span><span class="o">.</span><span class="n">dsi_voxels</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sphere</span> <span class="o">=</span> <span class="n">dpd</span><span class="o">.</span><span class="n">get_sphere</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dipy.reconst.sfm</span> <span class="kn">import</span> <span class="n">sfm_design_matrix</span>
</pre></div>
</div>
<p>A canonical tensor approximating corpus-callosum voxels <a class="reference internal" href="#id84" id="id85">[Rokem2014]</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tensor_matrix</span> <span class="o">=</span> <span class="n">sfm_design_matrix</span><span class="p">(</span><span class="n">gtab</span><span class="p">,</span> <span class="n">sphere</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="p">[</span><span class="mf">0.0015</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">])</span>
</pre></div>
</div>
<p>A &#8216;stick&#8217; function (<a class="reference internal" href="#behrens2007" id="id86">[Behrens2007]</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stick_matrix</span> <span class="o">=</span> <span class="n">sfm_design_matrix</span><span class="p">(</span><span class="n">gtab</span><span class="p">,</span> <span class="n">sphere</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id87">
<h3><a class="reference internal" href="#dipy.reconst.shm.Cache" title="dipy.reconst.shm.Cache"><code class="xref py py-class docutils literal"><span class="pre">Cache</span></code></a><a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.Cache">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">Cache</code><a class="headerlink" href="#dipy.reconst.shm.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Cache values based on a key object (such as a sphere or gradient table).</p>
<p class="rubric">Notes</p>
<p>This class is meant to be used as a mix-in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">Cache</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyModelFit</span><span class="p">(</span><span class="n">Fit</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Inside a method on the fit, typical usage would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">odf</span><span class="p">(</span><span class="n">sphere</span><span class="p">):</span>
    <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">M</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_basis_matrix</span><span class="p">(</span><span class="n">sphere</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;odf_basis_matrix&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sphere</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.Cache.cache_clear" title="dipy.reconst.shm.Cache.cache_clear"><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code></a>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#dipy.reconst.shm.Cache.cache_get" title="dipy.reconst.shm.Cache.cache_get"><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code></a>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.Cache.cache_set" title="dipy.reconst.shm.Cache.cache_set"><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code></a>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.Cache.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.Cache.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.shm.Cache.cache_clear">
<code class="descname">cache_clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.Cache.cache_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the cache.</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.shm.Cache.cache_get">
<code class="descname">cache_get</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.Cache.cache_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value from the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>default</strong> : object</p>
<blockquote>
<div><p>Value to be returned if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>v</strong> : object</p>
<blockquote class="last">
<div><p>Value from the cache associated with <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.  Returns
<cite>default</cite> if no cached entry is found.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.shm.Cache.cache_set">
<code class="descname">cache_set</code><span class="sig-paren">(</span><em>tag</em>, <em>key</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.Cache.cache_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a value in the cache.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tag</strong> : str</p>
<blockquote>
<div><p>Description of the cached value.</p>
</div></blockquote>
<p><strong>key</strong> : object</p>
<blockquote>
<div><p>Key object used to look up the cached value.</p>
</div></blockquote>
<p><strong>value</strong> : object</p>
<blockquote class="last">
<div><p>Value stored in the cache for each unique combination
of <code class="docutils literal"><span class="pre">(tag,</span> <span class="pre">key)</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c1"># Imagine the following computation is very expensive</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">(</span><span class="n">p</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Cache</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="o">=</span> <span class="n">compute_expensive_matrix</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">cache_set</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">X1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X2</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">cache_get</span><span class="p">(</span><span class="s1">&#39;expensive_matrix&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">X1</span> <span class="ow">is</span> <span class="n">X2</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="csaodfmodel">
<h3><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.CsaOdfModel" title="dipy.reconst.shm.CsaOdfModel"><code class="xref py py-class docutils literal"><span class="pre">CsaOdfModel</span></code></a><a class="headerlink" href="#csaodfmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.CsaOdfModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">CsaOdfModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.CsaOdfModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmModel" title="dipy.reconst.shm.SphHarmModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.shm.SphHarmModel</span></code></a></p>
<p>Implementation of Constant Solid Angle reconstruction method.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r47" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id88">[R47]</a></td><td>Aganj, I., et. al. 2009. ODF Reconstruction in Q-Ball Imaging With
Solid Angle Consideration.</td></tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code>(data[,&nbsp;mask])</td>
<td>Fits the model to diffusion data and returns the model fit</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.CsaOdfModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.CsaOdfModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a model that can be used to fit or sample diffusion data</p>
</dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.shm.CsaOdfModel.max">
<code class="descname">max</code><em class="property"> = 0.999</em><a class="headerlink" href="#dipy.reconst.shm.CsaOdfModel.max" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.shm.CsaOdfModel.min">
<code class="descname">min</code><em class="property"> = 0.001</em><a class="headerlink" href="#dipy.reconst.shm.CsaOdfModel.min" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="looseversion">
<h3><code class="xref py py-class docutils literal"><span class="pre">LooseVersion</span></code><a class="headerlink" href="#looseversion" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id89">
<h3><a class="reference internal" href="#dipy.reconst.shm.OdfFit" title="dipy.reconst.shm.OdfFit"><code class="xref py py-class docutils literal"><span class="pre">OdfFit</span></code></a><a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.OdfFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">OdfFit</code><a class="headerlink" href="#dipy.reconst.shm.OdfFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.OdfFit.odf" title="dipy.reconst.shm.OdfFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>To be implemented but specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.OdfFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.OdfFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.shm.OdfFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.OdfFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented but specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id90">
<h3><a class="reference internal" href="#dipy.reconst.shm.OdfModel" title="dipy.reconst.shm.OdfModel"><code class="xref py py-class docutils literal"><span class="pre">OdfModel</span></code></a><a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.OdfModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">OdfModel</code><a class="headerlink" href="#dipy.reconst.shm.OdfModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>An abstract class to be sub-classed by specific odf models</p>
<p>All odf models should provide a fit method which may take data as it&#8217;s
first and only argument.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#dipy.reconst.shm.OdfModel.fit" title="dipy.reconst.shm.OdfModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data)</td>
<td>To be implemented by specific odf models</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.OdfModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.OdfModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.shm.OdfModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.OdfModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>To be implemented by specific odf models</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="opdtmodel">
<h3><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.OpdtModel" title="dipy.reconst.shm.OpdtModel"><code class="xref py py-class docutils literal"><span class="pre">OpdtModel</span></code></a><a class="headerlink" href="#opdtmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.OpdtModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">OpdtModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.OpdtModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmModel" title="dipy.reconst.shm.SphHarmModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.shm.SphHarmModel</span></code></a></p>
<p>Implementation of Orientation Probability Density Transform
reconstruction method.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r48" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id91">[R48]</a></td><td>Tristan-Vega, A., et. al. 2010. A new methodology for estimation of
fiber populations in white matter of the brain with Funk-Radon
transform.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r49" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id92">[R49]</a></td><td>Tristan-Vega, A., et. al. 2009. Estimation of fiber orientation
probability density functions in high angular resolution diffusion
imaging.</td></tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code>(data[,&nbsp;mask])</td>
<td>Fits the model to diffusion data and returns the model fit</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.OpdtModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.OpdtModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a model that can be used to fit or sample diffusion data</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="qballbasemodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">QballBaseModel</span></code><a class="headerlink" href="#qballbasemodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="qballmodel">
<h3><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.QballModel" title="dipy.reconst.shm.QballModel"><code class="xref py py-class docutils literal"><span class="pre">QballModel</span></code></a><a class="headerlink" href="#qballmodel" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.QballModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">QballModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.QballModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmModel" title="dipy.reconst.shm.SphHarmModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.shm.SphHarmModel</span></code></a></p>
<p>Implementation of regularized Qball reconstruction method.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r50" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id93">[R50]</a></td><td>Descoteaux, M., et. al. 2007. Regularized, fast, and robust
analytical Q-ball imaging.</td></tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code>(data[,&nbsp;mask])</td>
<td>Fits the model to diffusion data and returns the model fit</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.QballModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.QballModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a model that can be used to fit or sample diffusion data</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="residualbootstrapwrapper">
<h3><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.ResidualBootstrapWrapper" title="dipy.reconst.shm.ResidualBootstrapWrapper"><code class="xref py py-class docutils literal"><span class="pre">ResidualBootstrapWrapper</span></code></a><a class="headerlink" href="#residualbootstrapwrapper" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.ResidualBootstrapWrapper">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">ResidualBootstrapWrapper</code><span class="sig-paren">(</span><em>signal_object</em>, <em>B</em>, <em>where_dwi</em>, <em>min_signal=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.ResidualBootstrapWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Returns a residual bootstrap sample of the signal_object when indexed</p>
<p>Wraps a signal_object, this signal object can be an interpolator. When
indexed, the the wrapper indexes the signal_object to get the signal.
There wrapper than samples the residual boostrap distribution of signal and
returns that sample.</p>
<dl class="method">
<dt id="dipy.reconst.shm.ResidualBootstrapWrapper.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>signal_object</em>, <em>B</em>, <em>where_dwi</em>, <em>min_signal=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.ResidualBootstrapWrapper.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a ResidualBootstrapWapper</p>
<p>Given some linear model described by B, the design matrix, and a
signal_object, returns an object which can sample the residual
bootstrap distribution of the signal. We assume that the signals are
normalized so we clip the bootsrap samples to be between <cite>min_signal</cite>
and 1.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>signal_object</strong> : some object that can be indexed</p>
<blockquote>
<div><p>This object should return diffusion weighted signals when indexed.</p>
</div></blockquote>
<p><strong>B</strong> : ndarray, ndim=2</p>
<blockquote>
<div><p>The design matrix of spherical hormonic model usded to fit the
data. This is the model that will be used to compute the residuals
and sample the residual bootstrap distribution</p>
</div></blockquote>
<p><strong>where_dwi :</strong> :</p>
<blockquote>
<div><p>indexing object to find diffusion weighted signals from signal</p>
</div></blockquote>
<p><strong>min_signal</strong> : float</p>
<blockquote class="last">
<div><p>The lowest allowable signal.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id94">
<h3><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmFit" title="dipy.reconst.shm.SphHarmFit"><code class="xref py py-class docutils literal"><span class="pre">SphHarmFit</span></code></a><a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.SphHarmFit">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">SphHarmFit</code><span class="sig-paren">(</span><em>model</em>, <em>shm_coef</em>, <em>mask</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.SphHarmFit" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dipy.reconst.odf.OdfFit" title="dipy.reconst.odf.OdfFit"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.odf.OdfFit</span></code></a></p>
<p>Diffusion data fit to a spherical harmonic model</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmFit.odf" title="dipy.reconst.shm.SphHarmFit.odf"><code class="xref py py-obj docutils literal"><span class="pre">odf</span></code></a>(sphere)</td>
<td>Samples the odf function on the points of a sphere</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.SphHarmFit.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>model</em>, <em>shm_coef</em>, <em>mask</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.SphHarmFit.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="dipy.reconst.shm.SphHarmFit.odf">
<code class="descname">odf</code><span class="sig-paren">(</span><em>sphere</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.SphHarmFit.odf" title="Permalink to this definition">¶</a></dt>
<dd><p>Samples the odf function on the points of a sphere</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sphere</strong> : Sphere</p>
<blockquote>
<div><p>The points on which to sample the odf.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>values</strong> : ndarray</p>
<blockquote class="last">
<div><p>The value of the odf on each point of <cite>sphere</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="dipy.reconst.shm.SphHarmFit.shape">
<code class="descname">shape</code><a class="headerlink" href="#dipy.reconst.shm.SphHarmFit.shape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="id95">
<h3><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmModel" title="dipy.reconst.shm.SphHarmModel"><code class="xref py py-class docutils literal"><span class="pre">SphHarmModel</span></code></a><a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="dipy.reconst.shm.SphHarmModel">
<em class="property">class </em><code class="descclassname">dipy.reconst.shm.</code><code class="descname">SphHarmModel</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.SphHarmModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dipy.reconst.odf.html#dipy.reconst.odf.OdfModel" title="dipy.reconst.odf.OdfModel"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.odf.OdfModel</span></code></a>, <a class="reference internal" href="#dipy.reconst.cache.Cache" title="dipy.reconst.cache.Cache"><code class="xref py py-class docutils literal"><span class="pre">dipy.reconst.cache.Cache</span></code></a></p>
<p>The base class to sub-classed by specific spherical harmonic models of
diffusion data</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_clear</span></code>()</td>
<td>Clear the cache.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_get</span></code>(tag,&nbsp;key[,&nbsp;default])</td>
<td>Retrieve a value from the cache.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cache_set</span></code>(tag,&nbsp;key,&nbsp;value)</td>
<td>Store a value in the cache.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.SphHarmModel.fit" title="dipy.reconst.shm.SphHarmModel.fit"><code class="xref py py-obj docutils literal"><span class="pre">fit</span></code></a>(data[,&nbsp;mask])</td>
<td>Fits the model to diffusion data and returns the model fit</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="dipy.reconst.shm.SphHarmModel.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>gtab</em>, <em>sh_order</em>, <em>smooth=0</em>, <em>min_signal=1.0</em>, <em>assume_normed=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.SphHarmModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a model that can be used to fit or sample diffusion data</p>
</dd></dl>

<dl class="method">
<dt id="dipy.reconst.shm.SphHarmModel.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>data</em>, <em>mask=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.SphHarmModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits the model to diffusion data and returns the model fit</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="anisotropic-power">
<h3>anisotropic_power<a class="headerlink" href="#anisotropic-power" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id96">
<h3>auto_attr<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="bootstrap-data-array">
<h3>bootstrap_data_array<a class="headerlink" href="#bootstrap-data-array" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.bootstrap_data_array">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">bootstrap_data_array</code><span class="sig-paren">(</span><em>data</em>, <em>H</em>, <em>R</em>, <em>permute=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.bootstrap_data_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the Residual Bootstraps to the data given H and R</p>
<p>data must be normalized, ie 0 &lt; data &lt;= 1</p>
<p>This function, and the bootstrap_data_voxel function, calculat
residual-bootsrap samples given a Hat matrix and a Residual matrix. These
samples can be used for non-parametric statistics or for bootstrap
probabilistic tractography:</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r51" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id97">[R51]</a></td><td>J. I. Berman, et al., &#8220;Probabilistic streamline q-ball tractography
using the residual bootstrap&#8221; 2008.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r52" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id98">[R52]</a></td><td>HA Haroon, et al., &#8220;Using the model-based residual bootstrap to
quantify uncertainty in fiber orientations from Q-ball analysis&#8221;
2009.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r53" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id99">[R53]</a></td><td>B. Jeurissen, et al., &#8220;Probabilistic Fiber Tracking Using the
Residual Bootstrap with Constrained Spherical Deconvolution&#8221; 2011.</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="bootstrap-data-voxel">
<h3>bootstrap_data_voxel<a class="headerlink" href="#bootstrap-data-voxel" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.bootstrap_data_voxel">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">bootstrap_data_voxel</code><span class="sig-paren">(</span><em>data</em>, <em>H</em>, <em>R</em>, <em>permute=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.bootstrap_data_voxel" title="Permalink to this definition">¶</a></dt>
<dd><p>Like bootstrap_data_array but faster when for a single voxel</p>
<p>data must be 1d and normalized</p>
</dd></dl>

</div>
<div class="section" id="calculate-max-order">
<h3>calculate_max_order<a class="headerlink" href="#calculate-max-order" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id100">
<h3>cart2sphere<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.cart2sphere">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">cart2sphere</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.cart2sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Return angles for Cartesian 3D coordinates <cite>x</cite>, <cite>y</cite>, and <cite>z</cite></p>
<p>See doc for <code class="docutils literal"><span class="pre">sphere2cart</span></code> for angle conventions and derivation
of the formulae.</p>
<p><img class="math" src="../_images/math/1c2bdded398e3c6a1c6095d1ea745b01e30c94b5.png" alt="0\le\theta\mathrm{(theta)}\le\pi"/> and <img class="math" src="../_images/math/660487a8e70fa739a709ab6ee4757d8da4db39af.png" alt="-\pi\le\phi\mathrm{(phi)}\le\pi"/></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x</strong> : array_like</p>
<blockquote>
<div><p>x coordinate in Cartesian space</p>
</div></blockquote>
<p><strong>y</strong> : array_like</p>
<blockquote>
<div><p>y coordinate in Cartesian space</p>
</div></blockquote>
<p><strong>z</strong> : array_like</p>
<blockquote>
<div><p>z coordinate</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>r</strong> : array</p>
<blockquote>
<div><p>radius</p>
</div></blockquote>
<p><strong>theta</strong> : array</p>
<blockquote>
<div><p>inclination (polar) angle</p>
</div></blockquote>
<p><strong>phi</strong> : array</p>
<blockquote class="last">
<div><p>azimuth angle</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="concatenate">
<h3>concatenate<a class="headerlink" href="#concatenate" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.concatenate">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">concatenate</code><span class="sig-paren">(</span><em>(a1</em>, <em>a2</em>, <em>...)</em>, <em>axis=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>Join a sequence of arrays along an existing axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a1, a2, ...</strong> : sequence of array_like</p>
<blockquote>
<div><p>The arrays must have the same shape, except in the dimension
corresponding to <cite>axis</cite> (the first, by default).</p>
</div></blockquote>
<p><strong>axis</strong> : int, optional</p>
<blockquote>
<div><p>The axis along which the arrays will be joined.  Default is 0.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>res</strong> : ndarray</p>
<blockquote class="last">
<div><p>The concatenated array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">ma.concatenate</span></code></dt>
<dd>Concatenate function that preserves input masks.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">array_split</span></code></dt>
<dd>Split an array into multiple sub-arrays of equal or near-equal size.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">split</span></code></dt>
<dd>Split array into a list of multiple sub-arrays of equal size.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">hsplit</span></code></dt>
<dd>Split array into multiple sub-arrays horizontally (column wise)</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">vsplit</span></code></dt>
<dd>Split array into multiple sub-arrays vertically (row wise)</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">dsplit</span></code></dt>
<dd>Split array into multiple sub-arrays along the 3rd axis (depth).</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">stack</span></code></dt>
<dd>Stack a sequence of arrays along a new axis.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">hstack</span></code></dt>
<dd>Stack arrays in sequence horizontally (column wise)</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">vstack</span></code></dt>
<dd>Stack arrays in sequence vertically (row wise)</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">dstack</span></code></dt>
<dd>Stack arrays in sequence depth wise (along third dimension)</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>When one or more of the arrays to be concatenated is a MaskedArray,
this function will return a MaskedArray object instead of an ndarray,
but the input masks are <em>not</em> preserved. In cases where a MaskedArray
is expected as input, use the ma.concatenate function from the masked
array module instead.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([[1, 2],</span>
<span class="go">       [3, 4],</span>
<span class="go">       [5, 6]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1, 2, 5],</span>
<span class="go">       [3, 4, 6]])</span>
</pre></div>
</div>
<p>This function will not preserve masking of MaskedArray inputs.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">masked</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">masked_array(data = [0 -- 2],</span>
<span class="go">             mask = [False  True False],</span>
<span class="go">       fill_value = 999999)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">array([2, 3, 4])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">])</span>
<span class="go">masked_array(data = [0 1 2 2 3 4],</span>
<span class="go">             mask = False,</span>
<span class="go">       fill_value = 999999)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">])</span>
<span class="go">masked_array(data = [0 -- 2 2 3 4],</span>
<span class="go">             mask = [False  True False False False False],</span>
<span class="go">       fill_value = 999999)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="diag">
<h3>diag<a class="headerlink" href="#diag" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.diag">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">diag</code><span class="sig-paren">(</span><em>v</em>, <em>k=0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.diag" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a diagonal or construct a diagonal array.</p>
<p>See the more detailed documentation for <code class="docutils literal"><span class="pre">numpy.diagonal</span></code> if you use this
function to extract a diagonal and wish to write to the resulting array;
whether it returns a copy or a view depends on what version of numpy you
are using.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : array_like</p>
<blockquote>
<div><p>If <cite>v</cite> is a 2-D array, return a copy of its <cite>k</cite>-th diagonal.
If <cite>v</cite> is a 1-D array, return a 2-D array with <cite>v</cite> on the <cite>k</cite>-th
diagonal.</p>
</div></blockquote>
<p><strong>k</strong> : int, optional</p>
<blockquote>
<div><p>Diagonal in question. The default is 0. Use <cite>k&gt;0</cite> for diagonals
above the main diagonal, and <cite>k&lt;0</cite> for diagonals below the main
diagonal.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : ndarray</p>
<blockquote class="last">
<div><p>The extracted diagonal or constructed diagonal array.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">diagonal</span></code></dt>
<dd>Return specified diagonals.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">diagflat</span></code></dt>
<dd>Create a 2-D array with the flattened input as a diagonal.</dd>
<dt><a class="reference external" href="http://docs.python.org/library/trace.html#module-trace" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">trace</span></code></a></dt>
<dd>Sum along diagonals.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">triu</span></code></dt>
<dd>Upper triangle of an array.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">tril</span></code></dt>
<dd>Lower triangle of an array.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">array([[0, 1, 2],</span>
<span class="go">       [3, 4, 5],</span>
<span class="go">       [6, 7, 8]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([0, 4, 8])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([1, 5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">k</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([3, 7])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="go">array([[0, 0, 0],</span>
<span class="go">       [0, 4, 0],</span>
<span class="go">       [0, 0, 8]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="diff">
<h3>diff<a class="headerlink" href="#diff" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.diff">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">diff</code><span class="sig-paren">(</span><em>a</em>, <em>n=1</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the n-th order discrete difference along given axis.</p>
<p>The first order difference is given by <code class="docutils literal"><span class="pre">out[n]</span> <span class="pre">=</span> <span class="pre">a[n+1]</span> <span class="pre">-</span> <span class="pre">a[n]</span></code> along
the given axis, higher order differences are calculated by using <cite>diff</cite>
recursively.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array_like</p>
<blockquote>
<div><p>Input array</p>
</div></blockquote>
<p><strong>n</strong> : int, optional</p>
<blockquote>
<div><p>The number of times values are differenced.</p>
</div></blockquote>
<p><strong>axis</strong> : int, optional</p>
<blockquote>
<div><p>The axis along which the difference is taken, default is the last axis.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>diff</strong> : ndarray</p>
<blockquote class="last">
<div><p>The <cite>n</cite> order differences. The shape of the output is the same as <cite>a</cite>
except along <cite>axis</cite> where the dimension is smaller by <cite>n</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">gradient</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">ediff1d</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">cumsum</span></code></p>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([ 1,  2,  3, -7])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([  1,   1, -10])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([[2, 3, 4],</span>
<span class="go">       [5, 1, 2]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([[-1,  2,  0, -2]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="dot">
<h3>dot<a class="headerlink" href="#dot" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.dot">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">dot</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>out=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Dot product of two arrays.</p>
<p>For 2-D arrays it is equivalent to matrix multiplication, and for 1-D
arrays to inner product of vectors (without complex conjugation). For
N dimensions it is a sum product over the last axis of <cite>a</cite> and
the second-to-last of <cite>b</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,:]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">,:,</span><span class="n">m</span><span class="p">])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : array_like</p>
<blockquote>
<div><p>First argument.</p>
</div></blockquote>
<p><strong>b</strong> : array_like</p>
<blockquote>
<div><p>Second argument.</p>
</div></blockquote>
<p><strong>out</strong> : ndarray, optional</p>
<blockquote>
<div><p>Output argument. This must have the exact kind that would be returned
if it was not used. In particular, it must have the right type, must be
C-contiguous, and its dtype must be the dtype that would be returned
for <cite>dot(a,b)</cite>. This is a performance feature. Therefore, if these
conditions are not met, an exception is raised, instead of attempting
to be flexible.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output</strong> : ndarray</p>
<blockquote>
<div><p>Returns the dot product of <cite>a</cite> and <cite>b</cite>.  If <cite>a</cite> and <cite>b</cite> are both
scalars or both 1-D arrays then a scalar is returned; otherwise
an array is returned.
If <cite>out</cite> is given, then it is returned.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong> :</p>
<blockquote class="last">
<div><p>If the last dimension of <cite>a</cite> is not the same size as
the second-to-last dimension of <cite>b</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">vdot</span></code></dt>
<dd>Complex-conjugating dot product.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">tensordot</span></code></dt>
<dd>Sum products over arbitrary axes.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">einsum</span></code></dt>
<dd>Einstein summation convention.</dd>
<dt><code class="xref py py-obj docutils literal"><span class="pre">matmul</span></code></dt>
<dd>&#8216;&#64;&#8217; operator as method with out parameter.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">12</span>
</pre></div>
</div>
<p>Neither argument is complex-conjugated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">([</span><span class="mi">2j</span><span class="p">,</span> <span class="mi">3j</span><span class="p">],</span> <span class="p">[</span><span class="mi">2j</span><span class="p">,</span> <span class="mi">3j</span><span class="p">])</span>
<span class="go">(-13+0j)</span>
</pre></div>
</div>
<p>For 2-D arrays it is the matrix product:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">array([[4, 1],</span>
<span class="go">       [2, 2]])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="go">499128</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,:]</span> <span class="o">*</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,:,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">499128</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="empty">
<h3>empty<a class="headerlink" href="#empty" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.empty">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">empty</code><span class="sig-paren">(</span><em>shape</em>, <em>dtype=float</em>, <em>order='C'</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new array of given shape and type, without initializing entries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : int or tuple of int</p>
<blockquote>
<div><p>Shape of the empty array</p>
</div></blockquote>
<p><strong>dtype</strong> : data-type, optional</p>
<blockquote>
<div><p>Desired output data-type.</p>
</div></blockquote>
<p><strong>order</strong> : {&#8216;C&#8217;, &#8216;F&#8217;}, optional</p>
<blockquote>
<div><p>Whether to store multi-dimensional data in row-major
(C-style) or column-major (Fortran-style) order in
memory.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : ndarray</p>
<blockquote class="last">
<div><p>Array of uninitialized (arbitrary) data with the given
shape, dtype, and order.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">empty_like</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">zeros</span></code>, <code class="xref py py-obj docutils literal"><span class="pre">ones</span></code></p>
</div>
<p class="rubric">Notes</p>
<p><cite>empty</cite>, unlike <cite>zeros</cite>, does not set the array values to zero,
and may therefore be marginally faster.  On the other hand, it requires
the user to manually set all the values in the array, and should be
used with caution.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">array([[ -9.74499359e+001,   6.69583040e-309],</span>
<span class="go">       [  2.13182611e-314,   3.06959433e-309]])         #random</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="go">array([[-1073741821, -1067949133],</span>
<span class="go">       [  496041986,    19249760]])                     #random</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="eye">
<h3>eye<a class="headerlink" href="#eye" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.eye">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">eye</code><span class="sig-paren">(</span><em>N</em>, <em>M=None</em>, <em>k=0</em>, <em>dtype=&lt;type 'float'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.eye" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a 2-D array with ones on the diagonal and zeros elsewhere.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>N</strong> : int</p>
<blockquote>
<div><p>Number of rows in the output.</p>
</div></blockquote>
<p><strong>M</strong> : int, optional</p>
<blockquote>
<div><p>Number of columns in the output. If None, defaults to <cite>N</cite>.</p>
</div></blockquote>
<p><strong>k</strong> : int, optional</p>
<blockquote>
<div><p>Index of the diagonal: 0 (the default) refers to the main diagonal,
a positive value refers to an upper diagonal, and a negative value
to a lower diagonal.</p>
</div></blockquote>
<p><strong>dtype</strong> : data-type, optional</p>
<blockquote>
<div><p>Data-type of the returned array.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>I</strong> : ndarray of shape (N,M)</p>
<blockquote class="last">
<div><p>An array where all elements are equal to zero, except for the <cite>k</cite>-th
diagonal, whose values are equal to one.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">identity</span></code></dt>
<dd>(almost) equivalent function</dd>
<dt><a class="reference internal" href="#dipy.reconst.shm.diag" title="dipy.reconst.shm.diag"><code class="xref py py-obj docutils literal"><span class="pre">diag</span></code></a></dt>
<dd>diagonal 2-D array from a 1-D array specified by the user.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="go">array([[1, 0],</span>
<span class="go">       [0, 1]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[ 0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  1.],</span>
<span class="go">       [ 0.,  0.,  0.]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id101">
<h3>forward_sdeconv_mat<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="gen-dirac">
<h3>gen_dirac<a class="headerlink" href="#gen-dirac" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="hat">
<h3>hat<a class="headerlink" href="#hat" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.hat">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">hat</code><span class="sig-paren">(</span><em>B</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.hat" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the hat matrix for the design matrix B</p>
</dd></dl>

</div>
<div class="section" id="id102">
<h3>lazy_index<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.lazy_index">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">lazy_index</code><span class="sig-paren">(</span><em>index</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.lazy_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a lazy index</p>
<p>Returns a slice that can be used for indexing an array, if no slice can be
made index is returned as is.</p>
</dd></dl>

</div>
<div class="section" id="lcr-matrix">
<h3>lcr_matrix<a class="headerlink" href="#lcr-matrix" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.lcr_matrix">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">lcr_matrix</code><span class="sig-paren">(</span><em>H</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.lcr_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matrix for computing leveraged, centered residuals from data</p>
<p>if r = (d-Hd), the leveraged centered residuals are lcr = (r/l)-mean(r/l)
ruturns the matrix R, such lcr = Rd</p>
</dd></dl>

</div>
<div class="section" id="id103">
<h3>lpn<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.lpn">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">lpn</code><span class="sig-paren">(</span><em>n</em>, <em>z</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.lpn" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute sequence of Legendre functions of the first kind (polynomials),
Pn(z) and derivatives for all degrees from 0 to n (inclusive).</p>
<p>See also special.legendre  for polynomial class.</p>
</dd></dl>

</div>
<div class="section" id="normalize-data">
<h3>normalize_data<a class="headerlink" href="#normalize-data" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.normalize_data">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">normalize_data</code><span class="sig-paren">(</span><em>data</em>, <em>where_b0</em>, <em>min_signal=1.0</em>, <em>out=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.normalize_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes the data with respect to the mean b0</p>
</dd></dl>

</div>
<div class="section" id="order-from-ncoef">
<h3>order_from_ncoef<a class="headerlink" href="#order-from-ncoef" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id104">
<h3>pinv<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.pinv">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">pinv</code><span class="sig-paren">(</span><em>a</em>, <em>rcond=1e-15</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.pinv" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the (Moore-Penrose) pseudo-inverse of a matrix.</p>
<p>Calculate the generalized inverse of a matrix using its
singular-value decomposition (SVD) and including all
<em>large</em> singular values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : (M, N) array_like</p>
<blockquote>
<div><p>Matrix to be pseudo-inverted.</p>
</div></blockquote>
<p><strong>rcond</strong> : float</p>
<blockquote>
<div><p>Cutoff for small singular values.
Singular values smaller (in modulus) than
<cite>rcond</cite> * largest_singular_value (again, in modulus)
are set to zero.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>B</strong> : (N, M) ndarray</p>
<blockquote>
<div><p>The pseudo-inverse of <cite>a</cite>. If <cite>a</cite> is a <cite>matrix</cite> instance, then so
is <cite>B</cite>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>LinAlgError</strong> :</p>
<blockquote class="last">
<div><p>If the SVD computation does not converge.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The pseudo-inverse of a matrix A, denoted <img class="math" src="../_images/math/4d243b665af0fb321523b623492a1ed897817129.png" alt="A^+"/>, is
defined as: &#8220;the matrix that &#8216;solves&#8217; [the least-squares problem]
<img class="math" src="../_images/math/d8023e27d4c75091ac6610586e39ddc8e4c8756d.png" alt="Ax = b"/>,&#8221; i.e., if <img class="math" src="../_images/math/bb3b56c1449e4ae998527d57d942a625594f2345.png" alt="\bar{x}"/> is said solution, then
<img class="math" src="../_images/math/4d243b665af0fb321523b623492a1ed897817129.png" alt="A^+"/> is that matrix such that <img class="math" src="../_images/math/5e7f88d7b6738fa5016dbe3f6b563bab631f547b.png" alt="\bar{x} = A^+b"/>.</p>
<p>It can be shown that if <img class="math" src="../_images/math/7b009ca9140813e420dceebca209fbc3f62100a2.png" alt="Q_1 \Sigma Q_2^T = A"/> is the singular
value decomposition of A, then
<img class="math" src="../_images/math/b29a7370b3dd35232e6ee00489d7ebebd6d93a6e.png" alt="A^+ = Q_2 \Sigma^+ Q_1^T"/>, where <img class="math" src="../_images/math/75c1293ad07232e7ea67b77f77a52e2ab0c5484e.png" alt="Q_{1,2}"/> are
orthogonal matrices, <img class="math" src="../_images/math/19ac15bf260b22dcb61a1042c60259e4b0bfbd64.png" alt="\Sigma"/> is a diagonal matrix consisting
of A&#8217;s so-called singular values, (followed, typically, by
zeros), and then <img class="math" src="../_images/math/2ff76c3efdc9a8a370ee9ddc22cdfca66b0cab76.png" alt="\Sigma^+"/> is simply the diagonal matrix
consisting of the reciprocals of A&#8217;s singular values
(again, followed by zeros). <a class="reference internal" href="#r54" id="id105">[R54]</a></p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r54" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R54]</td><td><em>(<a class="fn-backref" href="#id105">1</a>, <a class="fn-backref" href="#id106">2</a>)</em> G. Strang, <em>Linear Algebra and Its Applications</em>, 2nd Ed., Orlando,
FL, Academic Press, Inc., 1980, pp. 139-142.</td></tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>The following example checks that <code class="docutils literal"><span class="pre">a</span> <span class="pre">*</span> <span class="pre">a+</span> <span class="pre">*</span> <span class="pre">a</span> <span class="pre">==</span> <span class="pre">a</span></code> and
<code class="docutils literal"><span class="pre">a+</span> <span class="pre">*</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">a+</span> <span class="pre">==</span> <span class="pre">a+</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">pinv</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">a</span><span class="p">)))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">B</span><span class="p">)))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="randint">
<h3>randint<a class="headerlink" href="#randint" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.randint">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">randint</code><span class="sig-paren">(</span><em>low</em>, <em>high=None</em>, <em>size=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.randint" title="Permalink to this definition">¶</a></dt>
<dd><p>Return random integers from <cite>low</cite> (inclusive) to <cite>high</cite> (exclusive).</p>
<p>Return random integers from the &#8220;discrete uniform&#8221; distribution in the
&#8220;half-open&#8221; interval [<cite>low</cite>, <cite>high</cite>). If <cite>high</cite> is None (the default),
then results are from [0, <cite>low</cite>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>low</strong> : int</p>
<blockquote>
<div><p>Lowest (signed) integer to be drawn from the distribution (unless
<code class="docutils literal"><span class="pre">high=None</span></code>, in which case this parameter is the <em>highest</em> such
integer).</p>
</div></blockquote>
<p><strong>high</strong> : int, optional</p>
<blockquote>
<div><p>If provided, one above the largest (signed) integer to be drawn
from the distribution (see above for behavior if <code class="docutils literal"><span class="pre">high=None</span></code>).</p>
</div></blockquote>
<p><strong>size</strong> : int or tuple of ints, optional</p>
<blockquote>
<div><p>Output shape.  If the given shape is, e.g., <code class="docutils literal"><span class="pre">(m,</span> <span class="pre">n,</span> <span class="pre">k)</span></code>, then
<code class="docutils literal"><span class="pre">m</span> <span class="pre">*</span> <span class="pre">n</span> <span class="pre">*</span> <span class="pre">k</span></code> samples are drawn.  Default is None, in which case a
single value is returned.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> : int or ndarray of ints</p>
<blockquote class="last">
<div><p><cite>size</cite>-shaped array of random integers from the appropriate
distribution, or a single such random int if <cite>size</cite> not provided.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">random.random_integers</span></code></dt>
<dd>similar to <cite>randint</cite>, only for the closed interval [<cite>low</cite>, <cite>high</cite>], and 1 is the lowest value if <cite>high</cite> is omitted. In particular, this other one is the one to use to generate uniformly distributed discrete non-integers.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">array([1, 0, 0, 0, 1, 1, 0, 0, 1, 0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="go">array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0])</span>
</pre></div>
</div>
<p>Generate a 2 x 4 array of ints between 0 and 4, inclusive:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="go">array([[4, 0, 2, 1],</span>
<span class="go">       [3, 2, 2, 0]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id107">
<h3>real_sph_harm<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.real_sph_harm">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">real_sph_harm</code><span class="sig-paren">(</span><em>m</em>, <em>n</em>, <em>theta</em>, <em>phi</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.real_sph_harm" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute real spherical harmonics, where the real harmonic <img class="math" src="../_images/math/310565e8642905e73f4bd6c638d08275537ab1eb.png" alt="Y^m_n"/> is
defined to be:</p>
<blockquote>
<div>Real(<img class="math" src="../_images/math/310565e8642905e73f4bd6c638d08275537ab1eb.png" alt="Y^m_n"/>) * sqrt(2) if m &gt; 0
<img class="math" src="../_images/math/310565e8642905e73f4bd6c638d08275537ab1eb.png" alt="Y^m_n"/>                 if m == 0
Imag(<img class="math" src="../_images/math/310565e8642905e73f4bd6c638d08275537ab1eb.png" alt="Y^m_n"/>) * sqrt(2) if m &lt; 0</div></blockquote>
<p>This may take scalar or array arguments. The inputs will be broadcasted
against each other.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>m</strong> : int <code class="docutils literal"><span class="pre">|m|</span> <span class="pre">&lt;=</span> <span class="pre">n</span></code></p>
<blockquote>
<div><p>The order of the harmonic.</p>
</div></blockquote>
<p><strong>n</strong> : int <code class="docutils literal"><span class="pre">&gt;=</span> <span class="pre">0</span></code></p>
<blockquote>
<div><p>The degree of the harmonic.</p>
</div></blockquote>
<p><strong>theta</strong> : float [0, 2*pi]</p>
<blockquote>
<div><p>The azimuthal (longitudinal) coordinate.</p>
</div></blockquote>
<p><strong>phi</strong> : float [0, pi]</p>
<blockquote>
<div><p>The polar (colatitudinal) coordinate.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>y_mn</strong> : real float</p>
<blockquote class="last">
<div><p>The real harmonic <img class="math" src="../_images/math/310565e8642905e73f4bd6c638d08275537ab1eb.png" alt="Y^m_n"/> sampled at <cite>theta</cite> and <cite>phi</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-obj docutils literal"><span class="pre">scipy.special.sph_harm</span></code></p>
</div>
</dd></dl>

</div>
<div class="section" id="id108">
<h3>real_sym_sh_basis<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="real-sym-sh-mrtrix">
<h3>real_sym_sh_mrtrix<a class="headerlink" href="#real-sym-sh-mrtrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sf-to-sh">
<h3>sf_to_sh<a class="headerlink" href="#sf-to-sh" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.sf_to_sh">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">sf_to_sh</code><span class="sig-paren">(</span><em>sf</em>, <em>sphere</em>, <em>sh_order=4</em>, <em>basis_type=None</em>, <em>smooth=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.sf_to_sh" title="Permalink to this definition">¶</a></dt>
<dd><p>Spherical function to spherical harmonics (SH).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sf</strong> : ndarray</p>
<blockquote>
<div><p>Values of a function on the given <cite>sphere</cite>.</p>
</div></blockquote>
<p><strong>sphere</strong> : Sphere</p>
<blockquote>
<div><p>The points on which the sf is defined.</p>
</div></blockquote>
<p><strong>sh_order</strong> : int, optional</p>
<blockquote>
<div><p>Maximum SH order in the SH fit.  For <cite>sh_order</cite>, there will be
<code class="docutils literal"><span class="pre">(sh_order</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">*</span> <span class="pre">(sh_order_2)</span> <span class="pre">/</span> <span class="pre">2</span></code> SH coefficients (default 4).</p>
</div></blockquote>
<p><strong>basis_type</strong> : {None, &#8216;mrtrix&#8217;, &#8216;fibernav&#8217;}</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">None</span></code> for the default dipy basis,
<code class="docutils literal"><span class="pre">mrtrix</span></code> for the MRtrix basis, and
<code class="docutils literal"><span class="pre">fibernav</span></code> for the FiberNavigator basis
(default <code class="docutils literal"><span class="pre">None</span></code>).</p>
</div></blockquote>
<p><strong>smooth</strong> : float, optional</p>
<blockquote>
<div><p>Lambda-regularization in the SH fit (default 0.0).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>sh</strong> : ndarray</p>
<blockquote class="last">
<div><p>SH coefficients representing the input function.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id109">
<h3>sh_to_rh<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="sh-to-sf">
<h3>sh_to_sf<a class="headerlink" href="#sh-to-sf" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.sh_to_sf">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">sh_to_sf</code><span class="sig-paren">(</span><em>sh</em>, <em>sphere</em>, <em>sh_order</em>, <em>basis_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.sh_to_sf" title="Permalink to this definition">¶</a></dt>
<dd><p>Spherical harmonics (SH) to spherical function (SF).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sh</strong> : ndarray</p>
<blockquote>
<div><p>SH coefficients representing a spherical function.</p>
</div></blockquote>
<p><strong>sphere</strong> : Sphere</p>
<blockquote>
<div><p>The points on which to sample the spherical function.</p>
</div></blockquote>
<p><strong>sh_order</strong> : int, optional</p>
<blockquote>
<div><p>Maximum SH order in the SH fit.  For <cite>sh_order</cite>, there will be
<code class="docutils literal"><span class="pre">(sh_order</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">*</span> <span class="pre">(sh_order_2)</span> <span class="pre">/</span> <span class="pre">2</span></code> SH coefficients (default 4).</p>
</div></blockquote>
<p><strong>basis_type</strong> : {None, &#8216;mrtrix&#8217;, &#8216;fibernav&#8217;}</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">None</span></code> for the default dipy basis,
<code class="docutils literal"><span class="pre">mrtrix</span></code> for the MRtrix basis, and
<code class="docutils literal"><span class="pre">fibernav</span></code> for the FiberNavigator basis
(default <code class="docutils literal"><span class="pre">None</span></code>).</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>sf</strong> : ndarray</p>
<blockquote class="last">
<div><p>Spherical function values on the <cite>sphere</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id110">
<h3>sh_to_sf_matrix<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="smooth-pinv">
<h3>smooth_pinv<a class="headerlink" href="#smooth-pinv" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.smooth_pinv">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">smooth_pinv</code><span class="sig-paren">(</span><em>B</em>, <em>L</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.smooth_pinv" title="Permalink to this definition">¶</a></dt>
<dd><p>Regularized psudo-inverse</p>
<p>Computes a regularized least square inverse of B</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>B</strong> : array_like (n, m)</p>
<blockquote>
<div><p>Matrix to be inverted</p>
</div></blockquote>
<p><strong>L</strong> : array_like (n,)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>inv</strong> : ndarray (m, n)</p>
<blockquote class="last">
<div><p>regularized least square inverse of B</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>In the literature this inverse is often written <img class="math" src="../_images/math/87e991c85d92f5bc2a96c249bce2af1e897294c5.png" alt="(B^{T}B+L^{2})^{-1}B^{T}"/>.
However here this inverse is implemented using the psudo-inverse because it
is more numerically stable than the direct implementation of the matrix
product.</p>
</dd></dl>

</div>
<div class="section" id="id111">
<h3>sph_harm_ind_list<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.sph_harm_ind_list">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">sph_harm_ind_list</code><span class="sig-paren">(</span><em>sh_order</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.sph_harm_ind_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the degree (n) and order (m) of all the symmetric spherical
harmonics of degree less then or equal it sh_order. The results, m_list
and n_list are kx1 arrays, where k depends on sh_order. They can be
passed to real_sph_harm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sh_order</strong> : int</p>
<blockquote>
<div><p>even int &gt; 0, max degree to return</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>m_list</strong> : array</p>
<blockquote>
<div><p>orders of even spherical harmonics</p>
</div></blockquote>
<p><strong>n_list</strong> : array</p>
<blockquote class="last">
<div><p>degrees of even spherical harmonics</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="dipy.reconst.shm.html#dipy.reconst.shm.real_sph_harm" title="dipy.reconst.shm.real_sph_harm"><code class="xref py py-obj docutils literal"><span class="pre">real_sph_harm</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="spherical-harmonics">
<h3>spherical_harmonics<a class="headerlink" href="#spherical-harmonics" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="svd">
<h3>svd<a class="headerlink" href="#svd" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.svd">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">svd</code><span class="sig-paren">(</span><em>a</em>, <em>full_matrices=1</em>, <em>compute_uv=1</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.svd" title="Permalink to this definition">¶</a></dt>
<dd><p>Singular Value Decomposition.</p>
<p>Factors the matrix <cite>a</cite> as <code class="docutils literal"><span class="pre">u</span> <span class="pre">*</span> <span class="pre">np.diag(s)</span> <span class="pre">*</span> <span class="pre">v</span></code>, where <cite>u</cite> and <cite>v</cite>
are unitary and <cite>s</cite> is a 1-d array of <cite>a</cite>&#8216;s singular values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>a</strong> : (..., M, N) array_like</p>
<blockquote>
<div><p>A real or complex matrix of shape (<cite>M</cite>, <cite>N</cite>) .</p>
</div></blockquote>
<p><strong>full_matrices</strong> : bool, optional</p>
<blockquote>
<div><p>If True (default), <cite>u</cite> and <cite>v</cite> have the shapes (<cite>M</cite>, <cite>M</cite>) and
(<cite>N</cite>, <cite>N</cite>), respectively.  Otherwise, the shapes are (<cite>M</cite>, <cite>K</cite>)
and (<cite>K</cite>, <cite>N</cite>), respectively, where <cite>K</cite> = min(<cite>M</cite>, <cite>N</cite>).</p>
</div></blockquote>
<p><strong>compute_uv</strong> : bool, optional</p>
<blockquote>
<div><p>Whether or not to compute <cite>u</cite> and <cite>v</cite> in addition to <cite>s</cite>.  True
by default.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>u</strong> : { (..., M, M), (..., M, K) } array</p>
<blockquote>
<div><p>Unitary matrices. The actual shape depends on the value of
<code class="docutils literal"><span class="pre">full_matrices</span></code>. Only returned when <code class="docutils literal"><span class="pre">compute_uv</span></code> is True.</p>
</div></blockquote>
<p><strong>s</strong> : (..., K) array</p>
<blockquote>
<div><p>The singular values for every matrix, sorted in descending order.</p>
</div></blockquote>
<p><strong>v</strong> : { (..., N, N), (..., K, N) } array</p>
<blockquote>
<div><p>Unitary matrices. The actual shape depends on the value of
<code class="docutils literal"><span class="pre">full_matrices</span></code>. Only returned when <code class="docutils literal"><span class="pre">compute_uv</span></code> is True.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>LinAlgError</strong> :</p>
<blockquote class="last">
<div><p>If SVD computation does not converge.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.8.0.</span></p>
</div>
<p>Broadcasting rules apply, see the <cite>numpy.linalg</cite> documentation for
details.</p>
<p>The decomposition is performed using LAPACK routine _gesdd</p>
<p>The SVD is commonly written as <code class="docutils literal"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">U</span> <span class="pre">S</span> <span class="pre">V.H</span></code>.  The <cite>v</cite> returned
by this function is <code class="docutils literal"><span class="pre">V.H</span></code> and <code class="docutils literal"><span class="pre">u</span> <span class="pre">=</span> <span class="pre">U</span></code>.</p>
<p>If <code class="docutils literal"><span class="pre">U</span></code> is a unitary matrix, it means that it
satisfies <code class="docutils literal"><span class="pre">U.H</span> <span class="pre">=</span> <span class="pre">inv(U)</span></code>.</p>
<p>The rows of <cite>v</cite> are the eigenvectors of <code class="docutils literal"><span class="pre">a.H</span> <span class="pre">a</span></code>. The columns
of <cite>u</cite> are the eigenvectors of <code class="docutils literal"><span class="pre">a</span> <span class="pre">a.H</span></code>.  For row <code class="docutils literal"><span class="pre">i</span></code> in
<cite>v</cite> and column <code class="docutils literal"><span class="pre">i</span></code> in <cite>u</cite>, the corresponding eigenvalue is
<code class="docutils literal"><span class="pre">s[i]**2</span></code>.</p>
<p>If <cite>a</cite> is a <cite>matrix</cite> object (as opposed to an <cite>ndarray</cite>), then so
are all the return values.</p>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p>Reconstruction based on full SVD:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">U</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">full_matrices</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">U</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">V</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">shape</span>
<span class="go">((9, 9), (6, 6), (6,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">complex</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">[:</span><span class="mi">6</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">V</span><span class="p">)))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Reconstruction based on reduced SVD:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">U</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">V</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">full_matrices</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">U</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">V</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">shape</span>
<span class="go">((9, 6), (6, 6), (6,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">V</span><span class="p">)))</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="unique">
<h3>unique<a class="headerlink" href="#unique" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="dipy.reconst.shm.unique">
<code class="descclassname">dipy.reconst.shm.</code><code class="descname">unique</code><span class="sig-paren">(</span><em>ar</em>, <em>return_index=False</em>, <em>return_inverse=False</em>, <em>return_counts=False</em><span class="sig-paren">)</span><a class="headerlink" href="#dipy.reconst.shm.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the unique elements of an array.</p>
<p>Returns the sorted unique elements of an array. There are three optional
outputs in addition to the unique elements: the indices of the input array
that give the unique values, the indices of the unique array that
reconstruct the input array, and the number of times each unique value
comes up in the input array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>ar</strong> : array_like</p>
<blockquote>
<div><p>Input array. This will be flattened if it is not already 1-D.</p>
</div></blockquote>
<p><strong>return_index</strong> : bool, optional</p>
<blockquote>
<div><p>If True, also return the indices of <cite>ar</cite> that result in the unique
array.</p>
</div></blockquote>
<p><strong>return_inverse</strong> : bool, optional</p>
<blockquote>
<div><p>If True, also return the indices of the unique array that can be used
to reconstruct <cite>ar</cite>.</p>
</div></blockquote>
<p><strong>return_counts</strong> : bool, optional</p>
<blockquote>
<div><p>If True, also return the number of times each unique value comes up
in <cite>ar</cite>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.9.0.</span></p>
</div>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>unique</strong> : ndarray</p>
<blockquote>
<div><p>The sorted unique values.</p>
</div></blockquote>
<p><strong>unique_indices</strong> : ndarray, optional</p>
<blockquote>
<div><p>The indices of the first occurrences of the unique values in the
(flattened) original array. Only provided if <cite>return_index</cite> is True.</p>
</div></blockquote>
<p><strong>unique_inverse</strong> : ndarray, optional</p>
<blockquote>
<div><p>The indices to reconstruct the (flattened) original array from the
unique array. Only provided if <cite>return_inverse</cite> is True.</p>
</div></blockquote>
<p><strong>unique_counts</strong> : ndarray, optional</p>
<blockquote class="last">
<div><p>The number of times each of the unique values comes up in the
original array. Only provided if <cite>return_counts</cite> is True.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.9.0.</span></p>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal"><span class="pre">numpy.lib.arraysetops</span></code></dt>
<dd>Module with a number of other functions for performing set operations on arrays.</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([1, 2, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">array([1, 2, 3])</span>
</pre></div>
</div>
<p>Return the indices of the original array that give the unique values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">return_index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span>
<span class="go">array([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;],</span>
<span class="go">       dtype=&#39;|S1&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span>
<span class="go">array([0, 1, 3])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
<span class="go">array([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;],</span>
<span class="go">       dtype=&#39;|S1&#39;)</span>
</pre></div>
</div>
<p>Reconstruct the input array from the unique values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">return_inverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span>
<span class="go">array([1, 2, 3, 4, 6])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indices</span>
<span class="go">array([0, 1, 4, 3, 1, 2, 1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
<span class="go">array([1, 2, 6, 4, 2, 3, 2])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id112">
<h3><code class="xref py py-class docutils literal"><span class="pre">Cache</span></code><a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="shorefit">
<h3><code class="xref py py-class docutils literal"><span class="pre">ShoreFit</span></code><a class="headerlink" href="#shorefit" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="shoremodel">
<h3><code class="xref py py-class docutils literal"><span class="pre">ShoreModel</span></code><a class="headerlink" href="#shoremodel" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id113">
<h3>cart2sphere<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id114">
<h3>create_rspace<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id115">
<h3>factorial<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="genlaguerre">
<h3>genlaguerre<a class="headerlink" href="#genlaguerre" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="l-shore">
<h3>l_shore<a class="headerlink" href="#l-shore" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id116">
<h3>multi_voxel_fit<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="n-shore">
<h3>n_shore<a class="headerlink" href="#n-shore" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id117">
<h3>optional_package<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id118">
<h3>real_sph_harm<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="shore-indices">
<h3>shore_indices<a class="headerlink" href="#shore-indices" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="shore-matrix">
<h3>shore_matrix<a class="headerlink" href="#shore-matrix" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="shore-matrix-odf">
<h3>shore_matrix_odf<a class="headerlink" href="#shore-matrix-odf" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="shore-matrix-pdf">
<h3>shore_matrix_pdf<a class="headerlink" href="#shore-matrix-pdf" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="shore-order">
<h3>shore_order<a class="headerlink" href="#shore-order" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="id119">
<h3>warn<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
  <li><a href="../index.html">Home</a> |&nbsp;</li>
  <li><a href="../stateoftheart.html">Overview</a> |&nbsp;</li>
  <li><a href="../examples_index.html">Gallery</a> |&nbsp;</li>
  <li><a href="../installation.html">Download</a> |&nbsp;</li>
  <li><a href="../subscribe.html">Subscribe</a> |&nbsp;</li>
  <li><a href="../developers.html">Developers</a> |&nbsp;</li>
  <li><a href="../cite.html">Cite</a> &nbsp;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2008-2013, dipy developers &lt;nipy-devel@neuroimaging.scipy.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>